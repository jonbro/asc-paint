{
  "{\"filename\":\"/app/migrations/migrate0_1.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/migrations\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "../src/Drawing.js",
            "imported": [
              "Drawing"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Drawing",
                "local": "Drawing"
              }
            ]
          },
          {
            "source": "../src/RexPaintCodec",
            "imported": [
              "RexPaintCodec"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "RexPaintCodec",
                "local": "RexPaintCodec"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/migrations/migrate0_1.js",
      "filenameRelative": "/app/migrations/migrate0_1.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "migrate0_1.js",
      "sourceFileName": "migrate0_1.js",
      "sourceRoot": "/app/migrations",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/migrations",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "migrate0_1"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nvar _Drawing = require(\"../src/Drawing.js\");\n\nvar _RexPaintCodec = require(\"../src/RexPaintCodec\");\n\n//\n// prior to this migration, the shares are stored as json in the db\n// after this migration, stored as base64 encodes of the rexpaint format.\n//\n// migration also adds a version column to the db so we can automate migrations later\n//\nvar drawing = new _Drawing.Drawing(64, 40);\n\nvar sqlite3 = require(\"sqlite3\");\n\nvar db = new sqlite3.Database('.data/database.sqlite', function (err) {\n  if (err) {\n    console.error(err.message);\n  }\n  console.log('Connected to the database.');\n});\n\ndb.all(\"SELECT ROWID as rowid, data FROM saves\", function (err, rows) {\n  rows.forEach(function (row) {\n    drawing.setData(JSON.parse(row.data));\n    var rp = new _RexPaintCodec.RexPaintCodec();\n    // rebuild the graphics with the correct setup... this is actually handled already, yay\n    rp.layers = drawing.layers;\n    rp.width = drawing.width;\n    rp.height = drawing.height;\n    var data = rp.encode();\n    db.run(\"UPDATE saves SET data = ? WHERE rowid = ?\", [data.toString('base64'), row.rowid], function (err) {\n      if (err) {\n        return console.error(err.message);\n      }\n      console.log(\"Row(s) updated: \" + this.changes);\n    });\n  });\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1pZ3JhdGUwXzEuanMiXSwibmFtZXMiOlsiZHJhd2luZyIsIkRyYXdpbmciLCJzcWxpdGUzIiwicmVxdWlyZSIsImRiIiwiRGF0YWJhc2UiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJtZXNzYWdlIiwibG9nIiwiYWxsIiwicm93cyIsImZvckVhY2giLCJyb3ciLCJzZXREYXRhIiwiSlNPTiIsInBhcnNlIiwiZGF0YSIsInJwIiwiUmV4UGFpbnRDb2RlYyIsImxheWVycyIsIndpZHRoIiwiaGVpZ2h0IiwiZW5jb2RlIiwicnVuIiwidG9TdHJpbmciLCJyb3dpZCIsImNoYW5nZXMiXSwibWFwcGluZ3MiOiI7O0FBTUE7O0FBQ0E7O0FBUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0EsSUFBSUEsVUFBVSxJQUFJQyxnQkFBSixDQUFZLEVBQVosRUFBZSxFQUFmLENBQWQ7O0FBRUEsSUFBTUMsVUFBVUMsUUFBUSxTQUFSLENBQWhCOztBQUVBLElBQUlDLEtBQUssSUFBSUYsUUFBUUcsUUFBWixDQUFxQix1QkFBckIsRUFBOEMsVUFBQ0MsR0FBRCxFQUFTO0FBQzlELE1BQUlBLEdBQUosRUFBUztBQUNQQyxZQUFRQyxLQUFSLENBQWNGLElBQUlHLE9BQWxCO0FBQ0Q7QUFDREYsVUFBUUcsR0FBUixDQUFZLDRCQUFaO0FBQ0QsQ0FMUSxDQUFUOztBQU9BTixHQUFHTyxHQUFILENBQU8sd0NBQVAsRUFBaUQsVUFBU0wsR0FBVCxFQUFjTSxJQUFkLEVBQW9CO0FBQ2pFQSxPQUFLQyxPQUFMLENBQWEsVUFBU0MsR0FBVCxFQUFjO0FBQ3pCZCxZQUFRZSxPQUFSLENBQWdCQyxLQUFLQyxLQUFMLENBQVdILElBQUlJLElBQWYsQ0FBaEI7QUFDQSxRQUFJQyxLQUFLLElBQUlDLDRCQUFKLEVBQVQ7QUFDQTtBQUNBRCxPQUFHRSxNQUFILEdBQVlyQixRQUFRcUIsTUFBcEI7QUFDQUYsT0FBR0csS0FBSCxHQUFXdEIsUUFBUXNCLEtBQW5CO0FBQ0FILE9BQUdJLE1BQUgsR0FBWXZCLFFBQVF1QixNQUFwQjtBQUNBLFFBQUlMLE9BQU9DLEdBQUdLLE1BQUgsRUFBWDtBQUNBcEIsT0FBR3FCLEdBQUgsQ0FBTywyQ0FBUCxFQUFvRCxDQUFDUCxLQUFLUSxRQUFMLENBQWMsUUFBZCxDQUFELEVBQTBCWixJQUFJYSxLQUE5QixDQUFwRCxFQUEwRixVQUFTckIsR0FBVCxFQUFjO0FBQ3RHLFVBQUlBLEdBQUosRUFBUztBQUNQLGVBQU9DLFFBQVFDLEtBQVIsQ0FBY0YsSUFBSUcsT0FBbEIsQ0FBUDtBQUNEO0FBQ0RGLGNBQVFHLEdBQVIsc0JBQStCLEtBQUtrQixPQUFwQztBQUNELEtBTEQ7QUFNRCxHQWREO0FBZUgsQ0FoQkQiLCJmaWxlIjoibWlncmF0ZTBfMS5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL21pZ3JhdGlvbnMiLCJzb3VyY2VzQ29udGVudCI6WyIvL1xuLy8gcHJpb3IgdG8gdGhpcyBtaWdyYXRpb24sIHRoZSBzaGFyZXMgYXJlIHN0b3JlZCBhcyBqc29uIGluIHRoZSBkYlxuLy8gYWZ0ZXIgdGhpcyBtaWdyYXRpb24sIHN0b3JlZCBhcyBiYXNlNjQgZW5jb2RlcyBvZiB0aGUgcmV4cGFpbnQgZm9ybWF0LlxuLy9cbi8vIG1pZ3JhdGlvbiBhbHNvIGFkZHMgYSB2ZXJzaW9uIGNvbHVtbiB0byB0aGUgZGIgc28gd2UgY2FuIGF1dG9tYXRlIG1pZ3JhdGlvbnMgbGF0ZXJcbi8vXG5pbXBvcnQge0RyYXdpbmd9IGZyb20gXCIuLi9zcmMvRHJhd2luZy5qc1wiXG5pbXBvcnQge1JleFBhaW50Q29kZWN9IGZyb20gXCIuLi9zcmMvUmV4UGFpbnRDb2RlY1wiXG5sZXQgZHJhd2luZyA9IG5ldyBEcmF3aW5nKDY0LDQwKTtcblxuY29uc3Qgc3FsaXRlMyA9IHJlcXVpcmUoXCJzcWxpdGUzXCIpO1xuXG52YXIgZGIgPSBuZXcgc3FsaXRlMy5EYXRhYmFzZSgnLmRhdGEvZGF0YWJhc2Uuc3FsaXRlJywgKGVycikgPT4ge1xuICBpZiAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XG4gIH1cbiAgY29uc29sZS5sb2coJ0Nvbm5lY3RlZCB0byB0aGUgZGF0YWJhc2UuJyk7XG59KTtcblxuZGIuYWxsKFwiU0VMRUNUIFJPV0lEIGFzIHJvd2lkLCBkYXRhIEZST00gc2F2ZXNcIiwgZnVuY3Rpb24oZXJyLCByb3dzKSB7ICBcbiAgICByb3dzLmZvckVhY2goZnVuY3Rpb24ocm93KSB7ICBcbiAgICAgIGRyYXdpbmcuc2V0RGF0YShKU09OLnBhcnNlKHJvdy5kYXRhKSk7XG4gICAgICBsZXQgcnAgPSBuZXcgUmV4UGFpbnRDb2RlYygpO1xuICAgICAgLy8gcmVidWlsZCB0aGUgZ3JhcGhpY3Mgd2l0aCB0aGUgY29ycmVjdCBzZXR1cC4uLiB0aGlzIGlzIGFjdHVhbGx5IGhhbmRsZWQgYWxyZWFkeSwgeWF5XG4gICAgICBycC5sYXllcnMgPSBkcmF3aW5nLmxheWVycztcbiAgICAgIHJwLndpZHRoID0gZHJhd2luZy53aWR0aDtcbiAgICAgIHJwLmhlaWdodCA9IGRyYXdpbmcuaGVpZ2h0O1xuICAgICAgbGV0IGRhdGEgPSBycC5lbmNvZGUoKTtcbiAgICAgIGRiLnJ1bihcIlVQREFURSBzYXZlcyBTRVQgZGF0YSA9ID8gV0hFUkUgcm93aWQgPSA/XCIsIFtkYXRhLnRvU3RyaW5nKCdiYXNlNjQnKSwgcm93LnJvd2lkXSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcihlcnIubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc29sZS5sb2coYFJvdyhzKSB1cGRhdGVkOiAke3RoaXMuY2hhbmdlc31gKTtcbiAgICAgIH0pO1xuICAgIH0pO1xufSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "migrate0_1.js"
      ],
      "names": [
        "drawing",
        "Drawing",
        "sqlite3",
        "require",
        "db",
        "Database",
        "err",
        "console",
        "error",
        "message",
        "log",
        "all",
        "rows",
        "forEach",
        "row",
        "setData",
        "JSON",
        "parse",
        "data",
        "rp",
        "RexPaintCodec",
        "layers",
        "width",
        "height",
        "encode",
        "run",
        "toString",
        "rowid",
        "changes"
      ],
      "mappings": ";;AAMA;;AACA;;AAPA;AACA;AACA;AACA;AACA;AACA;AAGA,IAAIA,UAAU,IAAIC,gBAAJ,CAAY,EAAZ,EAAe,EAAf,CAAd;;AAEA,IAAMC,UAAUC,QAAQ,SAAR,CAAhB;;AAEA,IAAIC,KAAK,IAAIF,QAAQG,QAAZ,CAAqB,uBAArB,EAA8C,UAACC,GAAD,EAAS;AAC9D,MAAIA,GAAJ,EAAS;AACPC,YAAQC,KAAR,CAAcF,IAAIG,OAAlB;AACD;AACDF,UAAQG,GAAR,CAAY,4BAAZ;AACD,CALQ,CAAT;;AAOAN,GAAGO,GAAH,CAAO,wCAAP,EAAiD,UAASL,GAAT,EAAcM,IAAd,EAAoB;AACjEA,OAAKC,OAAL,CAAa,UAASC,GAAT,EAAc;AACzBd,YAAQe,OAAR,CAAgBC,KAAKC,KAAL,CAAWH,IAAII,IAAf,CAAhB;AACA,QAAIC,KAAK,IAAIC,4BAAJ,EAAT;AACA;AACAD,OAAGE,MAAH,GAAYrB,QAAQqB,MAApB;AACAF,OAAGG,KAAH,GAAWtB,QAAQsB,KAAnB;AACAH,OAAGI,MAAH,GAAYvB,QAAQuB,MAApB;AACA,QAAIL,OAAOC,GAAGK,MAAH,EAAX;AACApB,OAAGqB,GAAH,CAAO,2CAAP,EAAoD,CAACP,KAAKQ,QAAL,CAAc,QAAd,CAAD,EAA0BZ,IAAIa,KAA9B,CAApD,EAA0F,UAASrB,GAAT,EAAc;AACtG,UAAIA,GAAJ,EAAS;AACP,eAAOC,QAAQC,KAAR,CAAcF,IAAIG,OAAlB,CAAP;AACD;AACDF,cAAQG,GAAR,sBAA+B,KAAKkB,OAApC;AACD,KALD;AAMD,GAdD;AAeH,CAhBD",
      "file": "migrate0_1.js",
      "sourceRoot": "/app/migrations",
      "sourcesContent": [
        "//\n// prior to this migration, the shares are stored as json in the db\n// after this migration, stored as base64 encodes of the rexpaint format.\n//\n// migration also adds a version column to the db so we can automate migrations later\n//\nimport {Drawing} from \"../src/Drawing.js\"\nimport {RexPaintCodec} from \"../src/RexPaintCodec\"\nlet drawing = new Drawing(64,40);\n\nconst sqlite3 = require(\"sqlite3\");\n\nvar db = new sqlite3.Database('.data/database.sqlite', (err) => {\n  if (err) {\n    console.error(err.message);\n  }\n  console.log('Connected to the database.');\n});\n\ndb.all(\"SELECT ROWID as rowid, data FROM saves\", function(err, rows) {  \n    rows.forEach(function(row) {  \n      drawing.setData(JSON.parse(row.data));\n      let rp = new RexPaintCodec();\n      // rebuild the graphics with the correct setup... this is actually handled already, yay\n      rp.layers = drawing.layers;\n      rp.width = drawing.width;\n      rp.height = drawing.height;\n      let data = rp.encode();\n      db.run(\"UPDATE saves SET data = ? WHERE rowid = ?\", [data.toString('base64'), row.rowid], function(err) {\n        if (err) {\n          return console.error(err.message);\n        }\n        console.log(`Row(s) updated: ${this.changes}`);\n      });\n    });\n});\n"
      ]
    },
    "mtime": 1546993729000
  },
  "{\"filename\":\"/app/src/Drawing.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/src\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "createClass",
        "classCallCheck"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "./UIElements",
            "imported": [
              "UIBase"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "UIBase",
                "local": "UIBase"
              }
            ]
          },
          {
            "source": "./Display",
            "imported": [
              "Display"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Display",
                "local": "Display"
              }
            ]
          },
          {
            "source": "./components/CharButton",
            "imported": [
              "CharButton"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "CharButton",
                "local": "CharButton"
              }
            ]
          },
          {
            "source": "./components/ColorButton",
            "imported": [
              "ColorButton"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "ColorButton",
                "local": "ColorButton"
              }
            ]
          },
          {
            "source": "./RexPaintCodec",
            "imported": [
              "RexPaintCodec"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "RexPaintCodec",
                "local": "RexPaintCodec"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "Drawing"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "Drawing",
              "exported": "Drawing"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/src/Drawing.js",
      "filenameRelative": "/app/src/Drawing.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "Drawing.js",
      "sourceFileName": "Drawing.js",
      "sourceRoot": "/app/src",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/src",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "Drawing"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Drawing = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _UIElements = require(\"./UIElements\");\n\nvar _Display = require(\"./Display\");\n\nvar _CharButton = require(\"./components/CharButton\");\n\nvar _ColorButton = require(\"./components/ColorButton\");\n\nvar _RexPaintCodec = require(\"./RexPaintCodec\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Drawing = exports.Drawing = function () {\n  function Drawing(width, height) {\n    _classCallCheck(this, Drawing);\n\n    this.layers = [[]];\n    this.currentLayer = 0;\n    this.currentBG = 0x000000;\n    this.currentFG = 0xFFFFFF;\n    this.currentChar = \"-\";\n    this.width = width;\n    this.height = height;\n    // just a blank redraw function incase we are running server side\n    this.drawCallback = function () {};\n    this.clear();\n  }\n  // TODO: implement this\n\n\n  _createClass(Drawing, [{\n    key: \"clear\",\n    value: function clear() {\n      var char = this.currentChar;\n      var bg = this.currentBG;\n      var fg = this.currentFG;\n      this.currentBG = 0xFF000000;\n      this.currentFG = 0xFFFFFFFF;\n      this.currentChar = \" \";\n\n      for (var x = 0; x < this.width; x++) {\n        for (var y = 0; y < this.height; y++) {\n          this.drawWithCurrentSettings(x, y);\n        }\n      }\n      this.currentChar = char;\n      this.currentBG = bg;\n      this.currentFG = fg;\n    }\n  }, {\n    key: \"get\",\n    value: function get(x, y, layer) {\n      if (layer == undefined) {\n        layer = this.currentLayer;\n      }\n      //console.log(x+y*this.width);\n      var res = this.layers[layer][x + y * this.width];\n      //console.log(x,y, res);\n      if (this.layers[layer] == undefined || x + y * this.width == NaN || res == undefined) {\n        return { \"char\": \" \", \"fgColor\": 0xFFFFFFFF, \"bgColor\": 0xFF00000 };\n      }\n      return res;\n    }\n  }, {\n    key: \"set\",\n    value: function set(x, y, val, layer) {\n      if (layer == undefined) {\n        layer = this.currentLayer;\n      }\n      var cData = {\n        \"char\": val.char,\n        \"fgColor\": _Display.Display.convertColor(val.fgColor),\n        \"bgColor\": _Display.Display.convertColor(val.bgColor)\n      };\n      this.layers[layer][x + y * this.width] = cData;\n      this.redrawCell(x, y);\n    }\n  }, {\n    key: \"setData\",\n    value: function setData(data) {\n      // if(data.version == undefined)\n      // {\n      //   return;\n      // }\n      this.layers = data.layers;\n    }\n  }, {\n    key: \"redrawCell\",\n    value: function redrawCell(x, y) {\n      var val = this.get(x, y);\n      if (val != undefined) {\n        this.drawCallback(val, x, y);\n      } else {\n        this.drawCallback({ \"char\": \" \", \"fgColor\": 0xFFFFFFFF, \"bgColor\": 0xFF00000 }, x, y);\n      }\n    }\n  }, {\n    key: \"redrawAll\",\n    value: function redrawAll() {\n      for (var x = 0; x < this.width; x++) {\n        for (var y = 0; y < this.height; y++) {\n          this.redrawCell(x, y);\n        }\n      }\n    }\n  }, {\n    key: \"drawWithCurrentSettings\",\n    value: function drawWithCurrentSettings(x, y) {\n      this.draw(x, y, this.currentChar, this.currentFG, this.currentBG);\n    }\n  }, {\n    key: \"drawTempWithCurrentSettings\",\n    value: function drawTempWithCurrentSettings(x, y) {\n      this.drawCallback({ \"char\": this.currentChar, \"fgColor\": this.currentFG, \"bgColor\": this.currentBG }, x, y);\n    }\n  }, {\n    key: \"drawCellTemp\",\n    value: function drawCellTemp(val, x, y) {\n      this.drawCallback(val, x, y);\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(x, y, char, fg, bg) {\n      var cData = {\n        \"char\": char,\n        \"fgColor\": _Display.Display.convertColor(fg),\n        \"bgColor\": _Display.Display.convertColor(bg)\n      };\n      this.set(x, y, cData);\n    }\n  }, {\n    key: \"eyeDrop\",\n    value: function eyeDrop(x, y) {\n      var v = this.get(x, y);\n      this.currentChar = v.char;\n      this.currentFG = v.fgColor;\n      this.currentBG = v.bgColor;\n      _CharButton.CharButton.updateAll();\n      _ColorButton.ColorButton.updateAll();\n    }\n  }, {\n    key: \"deserializeFromJson\",\n    value: function deserializeFromJson(jsonString) {\n      var data = JSON.parse(jsonString);\n      this.setData(data);\n    }\n  }, {\n    key: \"serialize\",\n    value: function serialize() {\n      // always gonna do stuff with rexpaint from here on :)\n      var rp = new _RexPaintCodec.RexPaintCodec();\n      // rebuild the graphics with the correct setup... this is actually handled already, yay\n      rp.layers = this.layers;\n      rp.width = this.width;\n      rp.height = this.height;\n      return rp.encode().toString('base64');\n      //return \n      return JSON.stringify({ layers: this.layers, version: 2 });\n    }\n  }, {\n    key: \"exportToRexpaint\",\n    value: function exportToRexpaint() {\n      // need to fill out the rexpaint data structure with the data that we have currently\n      var rp = new _RexPaintCodec.RexPaintCodec();\n      // rebuild the graphics with the correct setup... this is actually handled already, yay\n      rp.layers = this.layers;\n      rp.width = this.width;\n      rp.height = this.height;\n      var data = rp.encode();\n      //console.log(data);\n      var saveByteArray = function () {\n        var a = document.createElement(\"a\");\n        document.body.appendChild(a);\n        a.style = \"display: none\";\n        return function (data, name) {\n          var blob = new Blob(data, { type: \"octet/stream\" }),\n              url = window.URL.createObjectURL(blob);\n          a.href = url;\n          a.download = name;\n          a.click();\n          window.URL.revokeObjectURL(url);\n        };\n      }();\n      saveByteArray([data.buffer], 'export.xp');\n    }\n  }, {\n    key: \"importFromRexpaint\",\n    value: function importFromRexpaint(buffer) {\n      var rp = new _RexPaintCodec.RexPaintCodec();\n      rp.decode(buffer);\n      this.layers = rp.layers;\n      this.width = rp.width;\n      this.height = rp.height;\n      console.log(this);\n      this.redrawAll();\n    }\n  }]);\n\n  return Drawing;\n}();\n\nDrawing.currentDrawing = null;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkRyYXdpbmcuanMiXSwibmFtZXMiOlsiRHJhd2luZyIsIndpZHRoIiwiaGVpZ2h0IiwibGF5ZXJzIiwiY3VycmVudExheWVyIiwiY3VycmVudEJHIiwiY3VycmVudEZHIiwiY3VycmVudENoYXIiLCJkcmF3Q2FsbGJhY2siLCJjbGVhciIsImNoYXIiLCJiZyIsImZnIiwieCIsInkiLCJkcmF3V2l0aEN1cnJlbnRTZXR0aW5ncyIsImxheWVyIiwidW5kZWZpbmVkIiwicmVzIiwiTmFOIiwidmFsIiwiY0RhdGEiLCJEaXNwbGF5IiwiY29udmVydENvbG9yIiwiZmdDb2xvciIsImJnQ29sb3IiLCJyZWRyYXdDZWxsIiwiZGF0YSIsImdldCIsImRyYXciLCJzZXQiLCJ2IiwiQ2hhckJ1dHRvbiIsInVwZGF0ZUFsbCIsIkNvbG9yQnV0dG9uIiwianNvblN0cmluZyIsIkpTT04iLCJwYXJzZSIsInNldERhdGEiLCJycCIsIlJleFBhaW50Q29kZWMiLCJlbmNvZGUiLCJ0b1N0cmluZyIsInN0cmluZ2lmeSIsInZlcnNpb24iLCJzYXZlQnl0ZUFycmF5IiwiYSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsInN0eWxlIiwibmFtZSIsImJsb2IiLCJCbG9iIiwidHlwZSIsInVybCIsIndpbmRvdyIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsImhyZWYiLCJkb3dubG9hZCIsImNsaWNrIiwicmV2b2tlT2JqZWN0VVJMIiwiYnVmZmVyIiwiZGVjb2RlIiwiY29uc29sZSIsImxvZyIsInJlZHJhd0FsbCIsImN1cnJlbnREcmF3aW5nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztJQUVhQSxPLFdBQUFBLE87QUFFWCxtQkFBWUMsS0FBWixFQUFtQkMsTUFBbkIsRUFDQTtBQUFBOztBQUNFLFNBQUtDLE1BQUwsR0FBYyxDQUFDLEVBQUQsQ0FBZDtBQUNBLFNBQUtDLFlBQUwsR0FB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LEVBQUM0QixNQUFNLGNBQVAsRUFBZixDQUFYO0FBQUEsY0FDSUMsTUFBTUMsT0FBT0MsR0FBUCxDQUFXQyxlQUFYLENBQTJCTixJQUEzQixDQURWO0FBRUFQLFlBQUVjLElBQUYsR0FBU0osR0FBVDtBQUNBVixZQUFFZSxRQUFGLEdBQWFULElBQWI7QUFDQU4sWUFBRWdCLEtBQUY7QUFDQUwsaUJBQU9DLEdBQVAsQ0FBV0ssZUFBWCxDQUEyQlAsR0FBM0I7QUFDSCxTQVBEO0FBUUgsT0Fab0IsRUFBckI7QUFhQVgsb0JBQWMsQ0FBQ2xCLEtBQUtxQyxNQUFOLENBQWQsRUFBNkIsV0FBN0I7QUFDRDs7O3VDQUNrQkEsTSxFQUNuQjtBQUNFLFVBQUl6QixLQUFLLElBQUlDLDRCQUFKLEVBQVQ7QUFDQUQsU0FBRzBCLE1BQUgsQ0FBVUQsTUFBVjtBQUNBLFdBQUs3RCxNQUFMLEdBQWNvQyxHQUFHcEMsTUFBakI7QUFDQSxXQUFLRixLQUFMLEdBQWFzQyxHQUFHdEMsS0FBaEI7QUFDQSxXQUFLQyxNQUFMLEdBQWNxQyxHQUFHckMsTUFBakI7QUFDQWdFLGNBQVFDLEdBQVIsQ0FBWSxJQUFaO0FBQ0EsV0FBS0MsU0FBTDtBQUNEOzs7Ozs7QUFFSHBFLFFBQVFxRSxjQUFSLEdBQXlCLElBQXpCIiwiZmlsZSI6IkRyYXdpbmcuanMiLCJzb3VyY2VSb290IjoiL2FwcC9zcmMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1VJQmFzZX0gZnJvbSBcIi4vVUlFbGVtZW50c1wiXG5pbXBvcnQge0Rpc3BsYXl9IGZyb20gXCIuL0Rpc3BsYXlcIlxuaW1wb3J0IHtDaGFyQnV0dG9ufSBmcm9tIFwiLi9jb21wb25lbnRzL0NoYXJCdXR0b25cIjtcbmltcG9ydCB7Q29sb3JCdXR0b259IGZyb20gXCIuL2NvbXBvbmVudHMvQ29sb3JCdXR0b25cIjtcbmltcG9ydCB7UmV4UGFpbnRDb2RlY30gZnJvbSBcIi4vUmV4UGFpbnRDb2RlY1wiXG5cbmV4cG9ydCBjbGFzcyBEcmF3aW5nXG57XG4gIGNvbnN0cnVjdG9yKHdpZHRoLCBoZWlnaHQpXG4gIHtcbiAgICB0aGlzLmxheWVycyA9IFtbXV07XG4gICAgdGhpcy5jdXJyZW50TGF5ZXIgPSAwO1xuICAgIHRoaXMuY3VycmVudEJHID0gMHgwMDAwMDA7XG4gICAgdGhpcy5jdXJyZW50RkcgPSAweEZGRkZGRjtcbiAgICB0aGlzLmN1cnJlbnRDaGFyID0gXCItXCI7XG4gICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIC8vIGp1c3QgYSBibGFuayByZWRyYXcgZnVuY3Rpb24gaW5jYXNlIHdlIGFyZSBydW5uaW5nIHNlcnZlciBzaWRlXG4gICAgdGhpcy5kcmF3Q2FsbGJhY2sgPSAoKT0+e307XG4gICAgdGhpcy5jbGVhcigpO1xuICB9XG4gIC8vIFRPRE86IGltcGxlbWVudCB0aGlzXG4gIGNsZWFyKClcbiAge1xuICAgIGxldCBjaGFyID0gdGhpcy5jdXJyZW50Q2hhcjtcbiAgICBsZXQgYmcgPSB0aGlzLmN1cnJlbnRCRztcbiAgICBsZXQgZmcgPSB0aGlzLmN1cnJlbnRGRztcbiAgICB0aGlzLmN1cnJlbnRCRyA9IDB4RkYwMDAwMDA7XG4gICAgdGhpcy5jdXJyZW50RkcgPSAweEZGRkZGRkZGO1xuICAgIHRoaXMuY3VycmVudENoYXIgPSBcIiBcIjtcblxuICAgIGZvcihsZXQgeD0wO3g8dGhpcy53aWR0aDt4KyspXG4gICAge1xuICAgICAgZm9yKGxldCB5PTA7eTx0aGlzLmhlaWdodDt5KyspXG4gICAgICB7XG4gICAgICAgIHRoaXMuZHJhd1dpdGhDdXJyZW50U2V0dGluZ3MoeCx5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5jdXJyZW50Q2hhciA9IGNoYXI7XG4gICAgdGhpcy5jdXJyZW50QkcgPSBiZztcbiAgICB0aGlzLmN1cnJlbnRGRyA9IGZnO1xuXG4gIH1cbiAgZ2V0KHgseSxsYXllcilcbiAge1xuICAgIGlmKGxheWVyID09IHVuZGVmaW5lZClcbiAgICB7XG4gICAgICBsYXllciA9IHRoaXMuY3VycmVudExheWVyO1xuICAgIH1cbiAgICAvL2NvbnNvbGUubG9nKHgreSp0aGlzLndpZHRoKTtcbiAgICBsZXQgcmVzID0gdGhpcy5sYXllcnNbbGF5ZXJdW3greSp0aGlzLndpZHRoXTtcbiAgICAvL2NvbnNvbGUubG9nKHgseSwgcmVzKTtcbiAgICBpZih0aGlzLmxheWVyc1tsYXllcl0gPT0gdW5kZWZpbmVkIHx8IHgreSp0aGlzLndpZHRoID09IE5hTiB8fCByZXMgPT0gdW5kZWZpbmVkKVxuICAgIHtcbiAgICAgIHJldHVybiB7XCJjaGFyXCI6IFwiIFwiLCBcImZnQ29sb3JcIjoweEZGRkZGRkZGLCBcImJnQ29sb3JcIjoweEZGMDAwMDB9O1xuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG4gIHNldCh4LHksdmFsLGxheWVyKVxuICB7XG4gICAgaWYobGF5ZXIgPT0gdW5kZWZpbmVkKVxuICAgIHtcbiAgICAgIGxheWVyID0gdGhpcy5jdXJyZW50TGF5ZXI7XG4gICAgfVxuICAgIGxldCBjRGF0YSA9IHtcbiAgICAgIFwiY2hhclwiOnZhbC5jaGFyLFxuICAgICAgXCJmZ0NvbG9yXCI6RGlzcGxheS5jb252ZXJ0Q29sb3IodmFsLmZnQ29sb3IpLFxuICAgICAgXCJiZ0NvbG9yXCI6RGlzcGxheS5jb252ZXJ0Q29sb3IodmFsLmJnQ29sb3IpXG4gICAgfTtcbiAgICB0aGlzLmxheWVyc1tsYXllcl1beCt5KnRoaXMud2lkdGhdID0gY0RhdGE7XG4gICAgdGhpcy5yZWRyYXdDZWxsKHgseSk7XG4gIH1cbiAgc2V0RGF0YShkYXRhKVxuICB7XG4gICAgLy8gaWYoZGF0YS52ZXJzaW9uID09IHVuZGVmaW5lZClcbiAgICAvLyB7XG4gICAgLy8gICByZXR1cm47XG4gICAgLy8gfVxuICAgIHRoaXMubGF5ZXJzID0gZGF0YS5sYXllcnM7XG4gIH1cbiAgcmVkcmF3Q2VsbCh4LHkpXG4gIHtcbiAgICBsZXQgdmFsID0gdGhpcy5nZXQoeCx5KTtcbiAgICBpZih2YWwgIT0gdW5kZWZpbmVkKVxuICAgIHtcbiAgICAgICB0aGlzLmRyYXdDYWxsYmFjayh2YWwsIHgseSk7XG4gICAgfVxuICAgIGVsc2VcbiAgICB7XG4gICAgICB0aGlzLmRyYXdDYWxsYmFjayh7XCJjaGFyXCI6IFwiIFwiLCBcImZnQ29sb3JcIjoweEZGRkZGRkZGLCBcImJnQ29sb3JcIjoweEZGMDAwMDB9LCB4LHkpO1xuICAgIH1cbiAgfVxuICByZWRyYXdBbGwoKVxuICB7XG4gICAgZm9yKGxldCB4PTA7eDx0aGlzLndpZHRoO3grKylcbiAgICB7XG4gICAgICBmb3IobGV0IHk9MDt5PHRoaXMuaGVpZ2h0O3krKylcbiAgICAgIHtcbiAgICAgICAgdGhpcy5yZWRyYXdDZWxsKHgseSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGRyYXdXaXRoQ3VycmVudFNldHRpbmdzKHgseSlcbiAge1xuICAgIHRoaXMuZHJhdyh4LHksdGhpcy5jdXJyZW50Q2hhcix0aGlzLmN1cnJlbnRGRyx0aGlzLmN1cnJlbnRCRyk7XG4gIH1cbiAgZHJhd1RlbXBXaXRoQ3VycmVudFNldHRpbmdzKHgseSlcbiAge1xuICAgIHRoaXMuZHJhd0NhbGxiYWNrKHtcImNoYXJcIjogdGhpcy5jdXJyZW50Q2hhciwgXCJmZ0NvbG9yXCI6dGhpcy5jdXJyZW50RkcsIFwiYmdDb2xvclwiOnRoaXMuY3VycmVudEJHfSwgeCx5KTtcbiAgfVxuICBkcmF3Q2VsbFRlbXAodmFsLCB4LHkpXG4gIHtcbiAgICB0aGlzLmRyYXdDYWxsYmFjayh2YWwseCx5KTtcbiAgfVxuICBkcmF3KHgseSxjaGFyLGZnLGJnKVxuICB7XG4gICAgbGV0IGNEYXRhID0ge1xuICAgICAgXCJjaGFyXCI6Y2hhcixcbiAgICAgIFwiZmdDb2xvclwiOkRpc3BsYXkuY29udmVydENvbG9yKGZnKSxcbiAgICAgIFwiYmdDb2xvclwiOkRpc3BsYXkuY29udmVydENvbG9yKGJnKVxuICAgIH07XG4gICAgdGhpcy5zZXQoeCx5LGNEYXRhKTtcbiAgfVxuICBleWVEcm9wKHgseSlcbiAge1xuICAgIGxldCB2ID0gdGhpcy5nZXQoeCx5KTtcbiAgICB0aGlzLmN1cnJlbnRDaGFyID0gdi5jaGFyO1xuICAgIHRoaXMuY3VycmVudEZHID0gdi5mZ0NvbG9yO1xuICAgIHRoaXMuY3VycmVudEJHID0gdi5iZ0NvbG9yO1xuICAgIENoYXJCdXR0b24udXBkYXRlQWxsKCk7XG4gICAgQ29sb3JCdXR0b24udXBkYXRlQWxsKCk7XG4gIH1cbiAgZGVzZXJpYWxpemVGcm9tSnNvbihqc29uU3RyaW5nKVxuICB7XG4gICAgbGV0IGRhdGEgPSBKU09OLnBhcnNlKGpzb25TdHJpbmcpO1xuICAgIHRoaXMuc2V0RGF0YShkYXRhKTtcbiAgfVxuICBzZXJpYWxpemUoKVxuICB7XG4gICAgLy8gYWx3YXlzIGdvbm5hIGRvIHN0dWZmIHdpdGggcmV4cGFpbnQgZnJvbSBoZXJlIG9uIDopXG4gICAgbGV0IHJwID0gbmV3IFJleFBhaW50Q29kZWMoKTtcbiAgICAvLyByZWJ1aWxkIHRoZSBncmFwaGljcyB3aXRoIHRoZSBjb3JyZWN0IHNldHVwLi4uIHRoaXMgaXMgYWN0dWFsbHkgaGFuZGxlZCBhbHJlYWR5LCB5YXlcbiAgICBycC5sYXllcnMgPSB0aGlzLmxheWVycztcbiAgICBycC53aWR0aCA9IHRoaXMud2lkdGg7XG4gICAgcnAuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG4gICAgcmV0dXJuIHJwLmVuY29kZSgpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgICAvL3JldHVybiBcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoe2xheWVyczp0aGlzLmxheWVycywgdmVyc2lvbjoyfSk7XG4gIH1cbiAgZXhwb3J0VG9SZXhwYWludCgpXG4gIHtcbiAgICAvLyBuZWVkIHRvIGZpbGwgb3V0IHRoZSByZXhwYWludCBkYXRhIHN0cnVjdHVyZSB3aXRoIHRoZSBkYXRhIHRoYXQgd2UgaGF2ZSBjdXJyZW50bHlcbiAgICBsZXQgcnAgPSBuZXcgUmV4UGFpbnRDb2RlYygpO1xuICAgIC8vIHJlYnVpbGQgdGhlIGdyYXBoaWNzIHdpdGggdGhlIGNvcnJlY3Qgc2V0dXAuLi4gdGhpcyBpcyBhY3R1YWxseSBoYW5kbGVkIGFscmVhZHksIHlheVxuICAgIHJwLmxheWVycyA9IHRoaXMubGF5ZXJzO1xuICAgIHJwLndpZHRoID0gdGhpcy53aWR0aDtcbiAgICBycC5oZWlnaHQgPSB0aGlzLmhlaWdodDtcbiAgICBsZXQgZGF0YSA9IHJwLmVuY29kZSgpO1xuICAgIC8vY29uc29sZS5sb2coZGF0YSk7XG4gICAgdmFyIHNhdmVCeXRlQXJyYXkgPSAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpO1xuICAgICAgICBhLnN0eWxlID0gXCJkaXNwbGF5OiBub25lXCI7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0YSwgbmFtZSkge1xuICAgICAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihkYXRhLCB7dHlwZTogXCJvY3RldC9zdHJlYW1cIn0pLFxuICAgICAgICAgICAgICAgIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICAgICAgYS5ocmVmID0gdXJsO1xuICAgICAgICAgICAgYS5kb3dubG9hZCA9IG5hbWU7XG4gICAgICAgICAgICBhLmNsaWNrKCk7XG4gICAgICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xuICAgICAgICB9O1xuICAgIH0oKSk7XG4gICAgc2F2ZUJ5dGVBcnJheShbZGF0YS5idWZmZXJdLCAnZXhwb3J0LnhwJyk7XG4gIH1cbiAgaW1wb3J0RnJvbVJleHBhaW50KGJ1ZmZlcilcbiAge1xuICAgIGxldCBycCA9IG5ldyBSZXhQYWludENvZGVjKCk7XG4gICAgcnAuZGVjb2RlKGJ1ZmZlcik7XG4gICAgdGhpcy5sYXllcnMgPSBycC5sYXllcnM7XG4gICAgdGhpcy53aWR0aCA9IHJwLndpZHRoO1xuICAgIHRoaXMuaGVpZ2h0ID0gcnAuaGVpZ2h0O1xuICAgIGNvbnNvbGUubG9nKHRoaXMpO1xuICAgIHRoaXMucmVkcmF3QWxsKCk7XG4gIH1cbn1cbkRyYXdpbmcuY3VycmVudERyYXdpbmcgPSBudWxsOyJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "Drawing.js"
      ],
      "names": [
        "Drawing",
        "width",
        "height",
        "layers",
        "currentLayer",
        "currentBG",
        "currentFG",
        "currentChar",
        "drawCallback",
        "clear",
        "char",
        "bg",
        "fg",
        "x",
        "y",
        "drawWithCurrentSettings",
        "layer",
        "undefined",
        "res",
        "NaN",
        "val",
        "cData",
        "Display",
        "convertColor",
        "fgColor",
        "bgColor",
        "redrawCell",
        "data",
        "get",
        "draw",
        "set",
        "v",
        "CharButton",
        "updateAll",
        "ColorButton",
        "jsonString",
        "JSON",
        "parse",
        "setData",
        "rp",
        "RexPaintCodec",
        "encode",
        "toString",
        "stringify",
        "version",
        "saveByteArray",
        "a",
        "document",
        "createElement",
        "body",
        "appendChild",
        "style",
        "name",
        "blob",
        "Blob",
        "type",
        "url",
        "window",
        "URL",
        "createObjectURL",
        "href",
        "download",
        "click",
        "revokeObjectURL",
        "buffer",
        "decode",
        "console",
        "log",
        "redrawAll",
        "currentDrawing"
      ],
      "mappings": "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",
      "file": "Drawing.js",
      "sourceRoot": "/app/src",
      "sourcesContent": [
        "import {UIBase} from \"./UIElements\"\nimport {Display} from \"./Display\"\nimport {CharButton} from \"./components/CharButton\";\nimport {ColorButton} from \"./components/ColorButton\";\nimport {RexPaintCodec} from \"./RexPaintCodec\"\n\nexport class Drawing\n{\n  constructor(width, height)\n  {\n    this.layers = [[]];\n    this.currentLayer = 0;\n    this.currentBG = 0x000000;\n    this.currentFG = 0xFFFFFF;\n    this.currentChar = \"-\";\n    this.width = width;\n    this.height = height;\n    // just a blank redraw function incase we are running server side\n    this.drawCallback = ()=>{};\n    this.clear();\n  }\n  // TODO: implement this\n  clear()\n  {\n    let char = this.currentChar;\n    let bg = this.currentBG;\n    let fg = this.currentFG;\n    this.currentBG = 0xFF000000;\n    this.currentFG = 0xFFFFFFFF;\n    this.currentChar = \" \";\n\n    for(let x=0;x<this.width;x++)\n    {\n      for(let y=0;y<this.height;y++)\n      {\n        this.drawWithCurrentSettings(x,y);\n      }\n    }\n    this.currentChar = char;\n    this.currentBG = bg;\n    this.currentFG = fg;\n\n  }\n  get(x,y,layer)\n  {\n    if(layer == undefined)\n    {\n      layer = this.currentLayer;\n    }\n    //console.log(x+y*this.width);\n    let res = this.layers[layer][x+y*this.width];\n    //console.log(x,y, res);\n    if(this.layers[layer] == undefined || x+y*this.width == NaN || res == undefined)\n    {\n      return {\"char\": \" \", \"fgColor\":0xFFFFFFFF, \"bgColor\":0xFF00000};\n    }\n    return res;\n  }\n  set(x,y,val,layer)\n  {\n    if(layer == undefined)\n    {\n      layer = this.currentLayer;\n    }\n    let cData = {\n      \"char\":val.char,\n      \"fgColor\":Display.convertColor(val.fgColor),\n      \"bgColor\":Display.convertColor(val.bgColor)\n    };\n    this.layers[layer][x+y*this.width] = cData;\n    this.redrawCell(x,y);\n  }\n  setData(data)\n  {\n    // if(data.version == undefined)\n    // {\n    //   return;\n    // }\n    this.layers = data.layers;\n  }\n  redrawCell(x,y)\n  {\n    let val = this.get(x,y);\n    if(val != undefined)\n    {\n       this.drawCallback(val, x,y);\n    }\n    else\n    {\n      this.drawCallback({\"char\": \" \", \"fgColor\":0xFFFFFFFF, \"bgColor\":0xFF00000}, x,y);\n    }\n  }\n  redrawAll()\n  {\n    for(let x=0;x<this.width;x++)\n    {\n      for(let y=0;y<this.height;y++)\n      {\n        this.redrawCell(x,y);\n      }\n    }\n  }\n  drawWithCurrentSettings(x,y)\n  {\n    this.draw(x,y,this.currentChar,this.currentFG,this.currentBG);\n  }\n  drawTempWithCurrentSettings(x,y)\n  {\n    this.drawCallback({\"char\": this.currentChar, \"fgColor\":this.currentFG, \"bgColor\":this.currentBG}, x,y);\n  }\n  drawCellTemp(val, x,y)\n  {\n    this.drawCallback(val,x,y);\n  }\n  draw(x,y,char,fg,bg)\n  {\n    let cData = {\n      \"char\":char,\n      \"fgColor\":Display.convertColor(fg),\n      \"bgColor\":Display.convertColor(bg)\n    };\n    this.set(x,y,cData);\n  }\n  eyeDrop(x,y)\n  {\n    let v = this.get(x,y);\n    this.currentChar = v.char;\n    this.currentFG = v.fgColor;\n    this.currentBG = v.bgColor;\n    CharButton.updateAll();\n    ColorButton.updateAll();\n  }\n  deserializeFromJson(jsonString)\n  {\n    let data = JSON.parse(jsonString);\n    this.setData(data);\n  }\n  serialize()\n  {\n    // always gonna do stuff with rexpaint from here on :)\n    let rp = new RexPaintCodec();\n    // rebuild the graphics with the correct setup... this is actually handled already, yay\n    rp.layers = this.layers;\n    rp.width = this.width;\n    rp.height = this.height;\n    return rp.encode().toString('base64');\n    //return \n    return JSON.stringify({layers:this.layers, version:2});\n  }\n  exportToRexpaint()\n  {\n    // need to fill out the rexpaint data structure with the data that we have currently\n    let rp = new RexPaintCodec();\n    // rebuild the graphics with the correct setup... this is actually handled already, yay\n    rp.layers = this.layers;\n    rp.width = this.width;\n    rp.height = this.height;\n    let data = rp.encode();\n    //console.log(data);\n    var saveByteArray = (function () {\n        var a = document.createElement(\"a\");\n        document.body.appendChild(a);\n        a.style = \"display: none\";\n        return function (data, name) {\n            var blob = new Blob(data, {type: \"octet/stream\"}),\n                url = window.URL.createObjectURL(blob);\n            a.href = url;\n            a.download = name;\n            a.click();\n            window.URL.revokeObjectURL(url);\n        };\n    }());\n    saveByteArray([data.buffer], 'export.xp');\n  }\n  importFromRexpaint(buffer)\n  {\n    let rp = new RexPaintCodec();\n    rp.decode(buffer);\n    this.layers = rp.layers;\n    this.width = rp.width;\n    this.height = rp.height;\n    console.log(this);\n    this.redrawAll();\n  }\n}\nDrawing.currentDrawing = null;"
      ]
    },
    "mtime": 1546993729000
  },
  "{\"filename\":\"/app/src/UIElements.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/src\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "createClass",
        "classCallCheck",
        "inherits",
        "possibleConstructorReturn"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "./Display",
            "imported": [
              "Display"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Display",
                "local": "Display"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "UIBase",
            "TextButton"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "UIBase",
              "exported": "UIBase"
            },
            {
              "kind": "local",
              "local": "TextButton",
              "exported": "TextButton"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/src/UIElements.js",
      "filenameRelative": "/app/src/UIElements.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "UIElements.js",
      "sourceFileName": "UIElements.js",
      "sourceRoot": "/app/src",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/src",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "UIElements"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TextButton = exports.UIBase = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Display = require(\"./Display\");\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar uid = 0;\n\nvar UIBase = exports.UIBase = function () {\n  function UIBase(x, y, width, height) {\n    _classCallCheck(this, UIBase);\n\n    this.uid = uid++;\n    this.x = x;\n    this.y = y;\n    this.height = height;\n    this.width = width;\n    this.children = [];\n    this.dirty = true;\n  }\n\n  _createClass(UIBase, [{\n    key: \"addChild\",\n    value: function addChild(child) {\n      this.children.push(child);\n    }\n  }, {\n    key: \"removeChild\",\n    value: function removeChild(child) {\n      this.children.splice(this.children.indexOf(child), 1);\n    }\n  }, {\n    key: \"pointerOver\",\n    value: function pointerOver() {}\n  }, {\n    key: \"pointerOut\",\n    value: function pointerOut() {}\n  }, {\n    key: \"press\",\n    value: function press() {}\n  }, {\n    key: \"release\",\n    value: function release() {}\n  }, {\n    key: \"keypress\",\n    value: function keypress(keyCode) {}\n  }, {\n    key: \"setDirty\",\n    value: function setDirty() {\n      this.dirty = true;\n    }\n  }, {\n    key: \"renderLoop\",\n    value: function renderLoop() {\n      this.children.forEach(function (c) {\n        c.renderLoop();\n      });\n      if (this.dirty) this.render();\n      this.dirty = false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {}\n    // not going to support bubbling right now\n    // this function tries to find the lowest possible child\n    // which will consume its events, then passes it to the\n    // next object up the chain if it can't\n\n  }, {\n    key: \"processMove\",\n    value: function processMove(x, y) {\n      this.processInternal(x, y, function (x, y, e) {\n        if (UIBase.lastOver != null && UIBase.lastOver != e && UIBase.lastOver.pointerOut) {\n          UIBase.lastOver.pointerOut();\n        }\n        if (UIBase.hoverCallback != undefined) {\n          UIBase.hoverCallback(e);\n        }\n        e.pointerOver(x, y);\n        UIBase.lastOver = e;\n      });\n    }\n  }, {\n    key: \"processPress\",\n    value: function processPress(x, y, buttonId) {\n      this.processInternal(x, y, function (x, y, e) {\n        e.press(buttonId, x, y);\n      });\n    }\n  }, {\n    key: \"processRelease\",\n    value: function processRelease(x, y, buttonId) {\n      this.processInternal(x, y, function (x, y, e) {\n        e.release(buttonId, x, y);\n      });\n    }\n  }, {\n    key: \"processInternal\",\n    value: function processInternal(x, y, callback) {\n      // check to see if any children consume the event\n      // do this in reverse so it process most recently added children first\n      for (var i = this.children.length - 1; i >= 0; i--) {\n        var c = this.children[i];\n        if (c.processInternal(x, y, callback)) return true;\n      }\n      if (this.pointOver(x, y)) {\n        callback(x, y, this);\n        return true;\n      }\n      return false;\n    }\n    // key presses just get sent out to everyone\n\n  }, {\n    key: \"processKeyPress\",\n    value: function processKeyPress(keyCode, e) {\n      for (var i = this.children.length - 1; i >= 0; i--) {\n        var c = this.children[i];\n        c.processKeyPress(keyCode, e);\n      }\n      this.keypress(keyCode, e);\n    }\n  }, {\n    key: \"pointOver\",\n    value: function pointOver(x, y) {\n      var res = x >= this.x && x < this.x + this.width & y >= this.y && y < this.y + this.height;\n\n      return res;\n    }\n  }]);\n\n  return UIBase;\n}();\n\nvar TextButton = exports.TextButton = function (_UIBase) {\n  _inherits(TextButton, _UIBase);\n\n  function TextButton(x, y, text) {\n    _classCallCheck(this, TextButton);\n\n    var _this = _possibleConstructorReturn(this, (TextButton.__proto__ || Object.getPrototypeOf(TextButton)).call(this, x, y, text.length, 1));\n\n    _this.text = text;\n    _this.textColor = \"white\";\n    return _this;\n  }\n\n  _createClass(TextButton, [{\n    key: \"render\",\n    value: function render() {\n      _Display.Display.display.drawText(this.x, this.y, \"%c{\" + this.textColor + \"}\" + this.text);\n    }\n  }]);\n\n  return TextButton;\n}(UIBase);\n\nUIBase.lastOver = null;UIBase.display = null;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlVJRWxlbWVudHMuanMiXSwibmFtZXMiOlsidWlkIiwiVUlCYXNlIiwieCIsInkiLCJ3aWR0aCIsImhlaWdodCIsImNoaWxkcmVuIiwiZGlydHkiLCJjaGlsZCIsInB1c2giLCJzcGxpY2UiLCJpbmRleE9mIiwia2V5Q29kZSIsImZvckVhY2giLCJjIiwicmVuZGVyTG9vcCIsInJlbmRlciIsInByb2Nlc3NJbnRlcm5hbCIsImUiLCJsYXN0T3ZlciIsInBvaW50ZXJPdXQiLCJob3ZlckNhbGxiYWNrIiwidW5kZWZpbmVkIiwicG9pbnRlck92ZXIiLCJidXR0b25JZCIsInByZXNzIiwicmVsZWFzZSIsImNhbGxiYWNrIiwiaSIsImxlbmd0aCIsInBvaW50T3ZlciIsInByb2Nlc3NLZXlQcmVzcyIsImtleXByZXNzIiwicmVzIiwiVGV4dEJ1dHRvbiIsInRleHQiLCJ0ZXh0Q29sb3IiLCJEaXNwbGF5IiwiZGlzcGxheSIsImRyYXdUZXh0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7QUFFQSxJQUFJQSxNQUFNLENBQVY7O0lBQ2FDLE0sV0FBQUEsTTtBQUVYLGtCQUFZQyxDQUFaLEVBQWVDLENBQWYsRUFBa0JDLEtBQWxCLEVBQXlCQyxNQUF6QixFQUNBO0FBQUE7O0FBQ0UsU0FBS0wsR0FBTCxHQUFXQSxLQUFYO0FBQ0EsU0FBS0UsQ0FBTCxHQUFTQSxDQUFUO0FBQ0EsU0FBS0MsQ0FBTCxHQUFTQSxDQUFUO0FBQ0EsU0FBS0UsTUFBTCxHQUFjQSxNQUFkO0FBQ0EsU0FBS0QsS0FBTCxHQUFhQSxLQUFiO0FBQ0EsU0FBS0UsUUFBTCxHQUFnQixFQUFoQjtBQUNBLFNBQUtDLEtBQUwsR0FBYSxJQUFiO0FBQ0Q7Ozs7NkJBQ1FDLEssRUFDVDtBQUNFLFdBQUtGLFFBQUwsQ0FBY0csSUFBZCxDQUFtQkQsS0FBbkI7QUFDRDs7O2dDQUNXQSxLLEVBQ1o7QUFDRSxXQUFLRixRQUFMLENBQWNJLE1BQWQsQ0FBcUIsS0FBS0osUUFBTCxDQUFjSyxP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Qk0sQ0FBdkI7QUFDRDs7OzhCQUNTaEIsQyxFQUFFQyxDLEVBQ1o7QUFDRSxVQUFJOEIsTUFBTS9CLEtBQUssS0FBS0EsQ0FBVixJQUNMQSxJQUFJLEtBQUtBLENBQUwsR0FBUyxLQUFLRSxLQUFsQixHQUNERCxLQUFLLEtBQUtBLENBRkosSUFHTEEsSUFBSSxLQUFLQSxDQUFMLEdBQVMsS0FBS0UsTUFIdkI7O0FBS0EsYUFBTzRCLEdBQVA7QUFDRDs7Ozs7O0lBR1VDLFUsV0FBQUEsVTs7O0FBRVgsc0JBQVloQyxDQUFaLEVBQWNDLENBQWQsRUFBZ0JnQyxJQUFoQixFQUNBO0FBQUE7O0FBQUEsd0hBQ1FqQyxDQURSLEVBQ1VDLENBRFYsRUFDWWdDLEtBQUtOLE1BRGpCLEVBQ3dCLENBRHhCOztBQUVFLFVBQUtNLElBQUwsR0FBWUEsSUFBWjtBQUNBLFVBQUtDLFNBQUwsR0FBaUIsT0FBakI7QUFIRjtBQUlDOzs7OzZCQUVEO0FBQ0VDLHVCQUFRQyxPQUFSLENBQWdCQyxRQUFoQixDQUF5QixLQUFLckMsQ0FBOUIsRUFBZ0MsS0FBS0MsQ0FBckMsRUFBdUMsUUFBTSxLQUFLaUMsU0FBWCxHQUFxQixHQUFyQixHQUF5QixLQUFLRCxJQUFyRTtBQUNEOzs7O0VBWDZCbEMsTTs7QUFlaENBLE9BQU9rQixRQUFQLEdBQWtCLElBQWxCLENBQXVCbEIsT0FBT3FDLE9BQVAsR0FBaUIsSUFBakIiLCJmaWxlIjoiVUlFbGVtZW50cy5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL3NyYyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7RGlzcGxheX0gZnJvbSBcIi4vRGlzcGxheVwiXG5cbmxldCB1aWQgPSAwO1xuZXhwb3J0IGNsYXNzIFVJQmFzZVxue1xuICBjb25zdHJ1Y3Rvcih4LCB5LCB3aWR0aCwgaGVpZ2h0KVxuICB7XG4gICAgdGhpcy51aWQgPSB1aWQrKztcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgIHRoaXMuY2hpbGRyZW4gPSBbXTtcbiAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcbiAgfVxuICBhZGRDaGlsZChjaGlsZClcbiAge1xuICAgIHRoaXMuY2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gIH1cbiAgcmVtb3ZlQ2hpbGQoY2hpbGQpXG4gIHtcbiAgICB0aGlzLmNoaWxkcmVuLnNwbGljZSh0aGlzLmNoaWxkcmVuLmluZGV4T2YoY2hpbGQpLCAxKTtcbiAgfVxuICBwb2ludGVyT3ZlcigpXG4gIHtcbiAgfVxuICBwb2ludGVyT3V0KClcbiAge1xuICB9XG4gIHByZXNzKClcbiAge1xuICB9XG4gIHJlbGVhc2UoKVxuICB7XG4gIH1cbiAga2V5cHJlc3Moa2V5Q29kZSlcbiAge1xuICB9XG4gIHNldERpcnR5KClcbiAge1xuICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICB9XG4gIHJlbmRlckxvb3AoKVxuICB7XG4gICAgdGhpcy5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGMpe1xuICAgICAgYy5yZW5kZXJMb29wKCk7XG4gICAgfSk7XG4gICAgaWYodGhpcy5kaXJ0eSlcbiAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuICB9XG4gIHJlbmRlcigpe31cbiAgLy8gbm90IGdvaW5nIHRvIHN1cHBvcnQgYnViYmxpbmcgcmlnaHQgbm93XG4gIC8vIHRoaXMgZnVuY3Rpb24gdHJpZXMgdG8gZmluZCB0aGUgbG93ZXN0IHBvc3NpYmxlIGNoaWxkXG4gIC8vIHdoaWNoIHdpbGwgY29uc3VtZSBpdHMgZXZlbnRzLCB0aGVuIHBhc3NlcyBpdCB0byB0aGVcbiAgLy8gbmV4dCBvYmplY3QgdXAgdGhlIGNoYWluIGlmIGl0IGNhbid0XG4gIHByb2Nlc3NNb3ZlKHgsIHkpXG4gIHtcbiAgICB0aGlzLnByb2Nlc3NJbnRlcm5hbCh4LHksKHgseSxlKT0+e1xuICAgICAgaWYoVUlCYXNlLmxhc3RPdmVyICE9IG51bGxcbiAgICAgICAgICYmIFVJQmFzZS5sYXN0T3ZlciAhPSBlXG4gICAgICAgICAmJiBVSUJhc2UubGFzdE92ZXIucG9pbnRlck91dClcbiAgICAgIHtcbiAgICAgICAgVUlCYXNlLmxhc3RPdmVyLnBvaW50ZXJPdXQoKTtcbiAgICAgIH1cbiAgICAgIGlmKFVJQmFzZS5ob3ZlckNhbGxiYWNrICE9IHVuZGVmaW5lZClcbiAgICAgIHtcbiAgICAgICAgVUlCYXNlLmhvdmVyQ2FsbGJhY2soZSk7XG4gICAgICB9XG4gICAgICBlLnBvaW50ZXJPdmVyKHgseSk7XG4gICAgICBVSUJhc2UubGFzdE92ZXIgPSBlO1xuICAgIH0pXG4gIH1cblxuICBwcm9jZXNzUHJlc3MoeCwgeSwgYnV0dG9uSWQpXG4gIHtcbiAgICB0aGlzLnByb2Nlc3NJbnRlcm5hbCh4LHksKHgseSxlKT0+e1xuICAgICAgZS5wcmVzcyhidXR0b25JZCwgeCx5KTtcbiAgICB9KTtcbiAgfVxuICBwcm9jZXNzUmVsZWFzZSh4LHksYnV0dG9uSWQpXG4gIHtcbiAgICB0aGlzLnByb2Nlc3NJbnRlcm5hbCh4LHksKHgseSxlKT0+e1xuICAgICAgZS5yZWxlYXNlKGJ1dHRvbklkLCB4LHkpO1xuICAgIH0pO1xuICB9XG4gIHByb2Nlc3NJbnRlcm5hbCh4LHksY2FsbGJhY2spXG4gIHtcbiAgICAvLyBjaGVjayB0byBzZWUgaWYgYW55IGNoaWxkcmVuIGNvbnN1bWUgdGhlIGV2ZW50XG4gICAgLy8gZG8gdGhpcyBpbiByZXZlcnNlIHNvIGl0IHByb2Nlc3MgbW9zdCByZWNlbnRseSBhZGRlZCBjaGlsZHJlbiBmaXJzdFxuICAgIGZvcihsZXQgaT10aGlzLmNoaWxkcmVuLmxlbmd0aC0xO2k+PTA7aS0tKVxuICAgIHtcbiAgICAgIGxldCBjID0gdGhpcy5jaGlsZHJlbltpXTtcbiAgICAgIGlmKGMucHJvY2Vzc0ludGVybmFsKHgseSxjYWxsYmFjaykpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZih0aGlzLnBvaW50T3Zlcih4LHkpKVxuICAgIHtcbiAgICAgIGNhbGxiYWNrKHgseSwgdGhpcyk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIGtleSBwcmVzc2VzIGp1c3QgZ2V0IHNlbnQgb3V0IHRvIGV2ZXJ5b25lXG4gIHByb2Nlc3NLZXlQcmVzcyhrZXlDb2RlLGUpXG4gIHtcbiAgICBmb3IobGV0IGk9dGhpcy5jaGlsZHJlbi5sZW5ndGgtMTtpPj0wO2ktLSlcbiAgICB7XG4gICAgICBsZXQgYyA9IHRoaXMuY2hpbGRyZW5baV07XG4gICAgICBjLnByb2Nlc3NLZXlQcmVzcyhrZXlDb2RlLGUpO1xuICAgIH1cbiAgICB0aGlzLmtleXByZXNzKGtleUNvZGUsIGUpO1xuICB9XG4gIHBvaW50T3Zlcih4LHkpXG4gIHtcbiAgICBsZXQgcmVzID0geCA+PSB0aGlzLnhcbiAgICAgICYmIHggPCB0aGlzLnggKyB0aGlzLndpZHRoXG4gICAgICAmIHkgPj0gdGhpcy55XG4gICAgICAmJiB5IDwgdGhpcy55ICsgdGhpcy5oZWlnaHQ7XG5cbiAgICByZXR1cm4gcmVzO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUZXh0QnV0dG9uIGV4dGVuZHMgVUlCYXNlXG57XG4gIGNvbnN0cnVjdG9yKHgseSx0ZXh0KVxuICB7XG4gICAgc3VwZXIoeCx5LHRleHQubGVuZ3RoLDEpO1xuICAgIHRoaXMudGV4dCA9IHRleHQ7XG4gICAgdGhpcy50ZXh0Q29sb3IgPSBcIndoaXRlXCI7XG4gIH1cbiAgcmVuZGVyKClcbiAge1xuICAgIERpc3BsYXkuZGlzcGxheS5kcmF3VGV4dCh0aGlzLngsdGhpcy55LFwiJWN7XCIrdGhpcy50ZXh0Q29sb3IrXCJ9XCIrdGhpcy50ZXh0KTtcbiAgfVxufVxuXG5cblVJQmFzZS5sYXN0T3ZlciA9IG51bGw7VUlCYXNlLmRpc3BsYXkgPSBudWxsOyJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "UIElements.js"
      ],
      "names": [
        "uid",
        "UIBase",
        "x",
        "y",
        "width",
        "height",
        "children",
        "dirty",
        "child",
        "push",
        "splice",
        "indexOf",
        "keyCode",
        "forEach",
        "c",
        "renderLoop",
        "render",
        "processInternal",
        "e",
        "lastOver",
        "pointerOut",
        "hoverCallback",
        "undefined",
        "pointerOver",
        "buttonId",
        "press",
        "release",
        "callback",
        "i",
        "length",
        "pointOver",
        "processKeyPress",
        "keypress",
        "res",
        "TextButton",
        "text",
        "textColor",
        "Display",
        "display",
        "drawText"
      ],
      "mappings": "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",
      "file": "UIElements.js",
      "sourceRoot": "/app/src",
      "sourcesContent": [
        "import {Display} from \"./Display\"\n\nlet uid = 0;\nexport class UIBase\n{\n  constructor(x, y, width, height)\n  {\n    this.uid = uid++;\n    this.x = x;\n    this.y = y;\n    this.height = height;\n    this.width = width;\n    this.children = [];\n    this.dirty = true;\n  }\n  addChild(child)\n  {\n    this.children.push(child);\n  }\n  removeChild(child)\n  {\n    this.children.splice(this.children.indexOf(child), 1);\n  }\n  pointerOver()\n  {\n  }\n  pointerOut()\n  {\n  }\n  press()\n  {\n  }\n  release()\n  {\n  }\n  keypress(keyCode)\n  {\n  }\n  setDirty()\n  {\n    this.dirty = true;\n  }\n  renderLoop()\n  {\n    this.children.forEach(function(c){\n      c.renderLoop();\n    });\n    if(this.dirty)\n      this.render();\n    this.dirty = false;\n  }\n  render(){}\n  // not going to support bubbling right now\n  // this function tries to find the lowest possible child\n  // which will consume its events, then passes it to the\n  // next object up the chain if it can't\n  processMove(x, y)\n  {\n    this.processInternal(x,y,(x,y,e)=>{\n      if(UIBase.lastOver != null\n         && UIBase.lastOver != e\n         && UIBase.lastOver.pointerOut)\n      {\n        UIBase.lastOver.pointerOut();\n      }\n      if(UIBase.hoverCallback != undefined)\n      {\n        UIBase.hoverCallback(e);\n      }\n      e.pointerOver(x,y);\n      UIBase.lastOver = e;\n    })\n  }\n\n  processPress(x, y, buttonId)\n  {\n    this.processInternal(x,y,(x,y,e)=>{\n      e.press(buttonId, x,y);\n    });\n  }\n  processRelease(x,y,buttonId)\n  {\n    this.processInternal(x,y,(x,y,e)=>{\n      e.release(buttonId, x,y);\n    });\n  }\n  processInternal(x,y,callback)\n  {\n    // check to see if any children consume the event\n    // do this in reverse so it process most recently added children first\n    for(let i=this.children.length-1;i>=0;i--)\n    {\n      let c = this.children[i];\n      if(c.processInternal(x,y,callback))\n        return true;\n    }\n    if(this.pointOver(x,y))\n    {\n      callback(x,y, this);\n      return true;\n    }\n    return false;\n  }\n  // key presses just get sent out to everyone\n  processKeyPress(keyCode,e)\n  {\n    for(let i=this.children.length-1;i>=0;i--)\n    {\n      let c = this.children[i];\n      c.processKeyPress(keyCode,e);\n    }\n    this.keypress(keyCode, e);\n  }\n  pointOver(x,y)\n  {\n    let res = x >= this.x\n      && x < this.x + this.width\n      & y >= this.y\n      && y < this.y + this.height;\n\n    return res;\n  }\n}\n\nexport class TextButton extends UIBase\n{\n  constructor(x,y,text)\n  {\n    super(x,y,text.length,1);\n    this.text = text;\n    this.textColor = \"white\";\n  }\n  render()\n  {\n    Display.display.drawText(this.x,this.y,\"%c{\"+this.textColor+\"}\"+this.text);\n  }\n}\n\n\nUIBase.lastOver = null;UIBase.display = null;"
      ]
    },
    "mtime": 1546993729000
  },
  "{\"filename\":\"/app/src/Display.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/src\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "createClass",
        "classCallCheck",
        "typeof"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "rot-js",
            "imported": [
              "Color"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Color",
                "local": "Color"
              }
            ]
          },
          {
            "source": "rot-js",
            "imported": [
              "Text"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Text",
                "local": "Text"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "Display"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "Display",
              "exported": "Display"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/src/Display.js",
      "filenameRelative": "/app/src/Display.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "Display.js",
      "sourceFileName": "Display.js",
      "sourceRoot": "/app/src",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/src",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "Display"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Display = undefined;\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _rotJs = require(\"rot-js\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n// welp, it happened. I am rewriting the rotjs display class to get more speed.\n/*\nvar o = {\n  layout: \"tile\",\n  bg: \"black\",\n  tileWidth: 10,\n  tileHeight: 16,\n  tileColorize: true,\n\twidth: 120,\n\theight: 40,\n  fontSize: 18,\n  tileSet: tileSet,\n  tileMap: tilemap\n}\n*/\n// going to keep using rotjs for the color stuff\nvar Display = exports.Display = function () {\n  function Display(options) {\n    _classCallCheck(this, Display);\n\n    this.randState = 13;\n    this.options = options;\n    this.canvas = document.createElement('canvas');\n\n    // set the canvas size and cache these values\n    // it seems like reading them back from the element is slower\n    this.cw = this.canvas.width = this.options.tileWidth * this.options.width;\n    this.ch = this.canvas.height = this.options.tileHeight * this.options.height;\n\n    this.context = this.canvas.getContext(\"2d\");\n\n    this.context.fillStyle = \"black\";\n    this.context.fillRect(0, 0, this.cw, this.ch);\n\n    // set up the buffer we are going to draw to\n    this.drawBufferImage = this.context.getImageData(0, 0, this.cw, this.ch);\n    var canvasbuf = new ArrayBuffer(this.drawBufferImage.data.length);\n    this.canvasbuf8 = new Uint8ClampedArray(canvasbuf);\n    this.canvasdata = new Uint32Array(canvasbuf);\n\n    // start the tilesetLoad\n    this.tileSetLoaded = false;\n    this.tileSetImg = document.createElement(\"img\");\n    var d = this;\n    this.tileSetImg.onload = function () {\n      d.spriteLoadComplete();\n    };\n    this.tileSetImg.crossOrigin = \"Anonymous\";\n    this.tileSetImg.src = this.options.tileSet;\n    this.dirty = false;\n    // kick off the draw loop\n    this.drawInternal();\n  }\n\n  _createClass(Display, [{\n    key: \"getImageData\",\n    value: function getImageData(img) {\n      var tmpCanvas = document.createElement('canvas');\n      var tmpContext = tmpCanvas.getContext('2d');\n      this.tilesheetWidth = img.width;\n      this.tilesheetHeight = img.height;\n      tmpCanvas.width = img.width;\n      tmpCanvas.height = img.height;\n      tmpContext.drawImage(img, 0, 0);\n      var myData = tmpContext.getImageData(0, 0, img.width, img.height);\n      return myData;\n    }\n  }, {\n    key: \"spriteLoadComplete\",\n    value: function spriteLoadComplete() {\n\n      // load the image data from the tiles\n      this.tileogData = this.getImageData(this.tileSetImg).data;\n      var tilebuf = new ArrayBuffer(this.tileogData.length);\n      var tilebuf8 = new Uint8ClampedArray(tilebuf);\n      this.tiledata = new Uint32Array(tilebuf);\n      tilebuf8.set(this.tileogData);\n\n      this.tileSetLoaded = true;\n      // now that we have completed the load, redraw everything that was requested before the image was loaded\n      if (this.preloadDraws !== undefined) {\n        for (var i = 0; i < this.preloadDraws.length; i++) {\n          var e = this.preloadDraws[i];\n          this.draw(e[0], e[1], e[2], e[3], e[4]);\n        }\n        this.preloadDraws = [];\n      }\n    }\n  }, {\n    key: \"getContainer\",\n    value: function getContainer() {\n      return this.canvas;\n    }\n  }, {\n    key: \"drawText\",\n    value: function drawText(x, y, text, maxWidth) {\n      var fg = null;\n      var bg = null;\n      var cx = x;\n      var cy = y;\n      var lines = 1;\n      if (!maxWidth) {\n        maxWidth = this.options.width - x;\n      }\n      var tokens = _rotJs.Text.tokenize(text, maxWidth);\n      while (tokens.length) {\n        var token = tokens.shift();\n        switch (token.type) {\n          case _rotJs.Text.TYPE_TEXT:\n            var isSpace = false,\n                isPrevSpace = false,\n                isFullWidth = false,\n                isPrevFullWidth = false;\n            for (var i = 0; i < token.value.length; i++) {\n              var cc = token.value.charCodeAt(i);\n              var c = token.value.charAt(i);\n              isFullWidth = cc > 0xff00 && cc < 0xff61 || cc > 0xffdc && cc < 0xffe8 || cc > 0xffee;\n              isSpace = c.charCodeAt(0) == 0x20 || c.charCodeAt(0) == 0x3000;\n              if (isPrevFullWidth && !isFullWidth && !isSpace) {\n                cx++;\n              }\n              if (isFullWidth && !isPrevSpace) {\n                cx++;\n              }\n              this.draw(cx++, cy, c, fg, bg);\n              isPrevSpace = isSpace;\n              isPrevFullWidth = isFullWidth;\n            }\n            break;\n          case _rotJs.Text.TYPE_FG:\n            fg = token.value || null;\n            break;\n          case _rotJs.Text.TYPE_BG:\n            bg = token.value || null;\n            break;\n          case _rotJs.Text.TYPE_NEWLINE:\n            cx = x;\n            cy++;\n            lines++;\n            break;\n        }\n      }\n      return lines;\n    }\n  }, {\n    key: \"rand\",\n    value: function rand() {\n      /* Algorithm \"xor\" from p. 4 of Marsaglia, \"Xorshift RNGs\" */\n      var x = this.randState;\n      x ^= x << 13;\n      x ^= x >> 17;\n      x ^= x << 5;\n      this.randState = x;\n      return x;\n    }\n  }, {\n    key: \"eventToPosition\",\n    value: function eventToPosition(e) {\n      var x = void 0,\n          y = void 0;\n      if (\"touches\" in e) {\n        x = e.touches[0].clientX;\n        y = e.touches[0].clientY;\n      } else {\n        x = e.clientX;\n        y = e.clientY;\n      }\n      var canvas = this.context.canvas;\n      var rect = canvas.getBoundingClientRect();\n      x -= rect.left;\n      y -= rect.top;\n      x *= canvas.width / rect.width;\n      y *= canvas.height / rect.height;\n      if (x < 0 || y < 0 || x >= canvas.width || y >= canvas.height) {\n        return [-1, -1];\n      }\n      return [Math.floor(x / this.options.tileWidth), Math.floor(y / this.options.tileHeight)];\n    }\n  }, {\n    key: \"draw\",\n    value: function draw(x, y, char, fg, bg) {\n      if (!this.tileSetLoaded) {\n        if (this.preloadDraws == undefined) {\n          this.preloadDraws = [];\n        }\n        this.preloadDraws.push([x, y, char, fg, bg]);\n        return;\n      }\n      if (x < 0 || x >= this.options.width || y < 0 || y >= this.options.height) return;\n      //should do some clamping to make sure we aren't drawing out of bounds stuff\n      var tile = this.options.tileMap[char];\n      if (tile != undefined) {\n        /*\n        fg = this.rand()|(0xff<<24);\n        bg = this.rand()|(0xff<<24);\n        */\n        fg = Display.convertColor(fg);\n        if (bg == undefined) {\n          bg = 0x00;\n        }\n        bg = Display.convertColor(bg);\n        this.drawTile(tile[0], tile[1], x * this.options.tileWidth, y * this.options.tileHeight, fg, bg);\n      }\n    }\n  }, {\n    key: \"drawTile\",\n    value: function drawTile(sx, sy, dx, dy, fg, bg) {\n      // not sure if storing these locals helps or not, but just in case\n      var cw = this.cw;\n      var tsw = this.tilesheetWidth;\n      for (var x = 0, lenX = this.options.tileWidth; x < lenX; x++) {\n        // pre calc these values so we don't need to do them on\n        // the inner loop\n        var ddx = dx + x;\n        var dsx = sx + x;\n        for (var y = 0, lenY = this.options.tileHeight; y < lenY; y++) {\n          // only perform this lookup once\n          var tdata = this.tiledata[dsx + (sy + y) * tsw];\n          this.canvasdata[ddx + (dy + y) * cw] = 0xff << 24 | tdata & fg | ~tdata & bg;\n        }\n      }\n      this.dirty = true;\n    }\n  }, {\n    key: \"drawInternal\",\n    value: function drawInternal() {\n      var d = this;\n      // early out if we aren't ready to draw yet\n      if (!this.tileSetLoaded || !this.dirty) {\n        requestAnimationFrame(function () {\n          d.drawInternal();\n        });\n        return;\n      }\n      this.dirty = false;\n      this.drawBufferImage.data.set(this.canvasbuf8);\n      this.context.putImageData(this.drawBufferImage, 0, 0);\n      requestAnimationFrame(function () {\n        d.drawInternal();\n      });\n    }\n  }]);\n\n  return Display;\n}();\n\nDisplay.convertColor = function (c) {\n  if (typeof c == \"string\") {\n    c = _rotJs.Color.fromString(c);\n  }\n  if ((typeof c === \"undefined\" ? \"undefined\" : _typeof(c)) == \"object\") {\n    // convert to our good representation\n    c = c[0] & 0xff | (c[1] & 0xff) << 8 | (c[2] & 0xff) << 16;\n  }\n  return c;\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkRpc3BsYXkuanMiXSwibmFtZXMiOlsiRGlzcGxheSIsIm9wdGlvbnMiLCJyYW5kU3RhdGUiLCJjYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjdyIsIndpZHRoIiwidGlsZVdpZHRoIiwiY2giLCJoZWlnaHQiLCJ0aWxlSGVpZ2h0IiwiY29udGV4dCIsImdldENvbnRleHQiLCJmaWxsU3R5bGUiLCJmaWxsUmVjdCIsImRyYXdCdWZmZXJJbWFnZSIsImdldEltYWdlRGF0YSIsImNhbnZhc2J1ZiIsIkFycmF5QnVmZmVyIiwiZGF0YSIsImxlbmd0aCIsImNhbnZhc2J1ZjgiLCJVaW50OENsYW1wZWRBcnJheSIsImNhbnZhc2RhdGEiLCJVaW50MzJBcnJheSIsInRpbGVTZXRMb2FkZWQiLCJ0aWxlU2V0SW1nIiwiZCIsIm9ubG9hZCIsInNwcml0ZUxvYWRDb21wbGV0ZSIsImNyb3NzT3JpZ2luIiwic3JjIiwidGlsZVNldCIsImRpcnR5IiwiZHJhd0ludGVybmFsIiwiaW1nIiwidG1wQ2FudmFzIiwidG1wQ29udGV4dCIsInRpbGVzaGVldFdpZHRoIiwidGlsZXNoZWV0SGVpZ2h0IiwiZHJhd0ltYWdlIiwibXlEYXRhIiwidGlsZW9nRGF0YSIsInRpbGVidWYiLCJ0aWxlYnVmOCIsInRpbGVkYXRhIiwic2V0IiwicHJlbG9hZERyYXdzIiwidW5kZWZpbmVkIiwiaSIsImUiLCJkcmF3IiwieCIsInkiLCJ0ZXh0IiwibWF4V2lkdGgiLCJmZyIsImJnIiwiY3giLCJjeSIsImxpbmVzIiwidG9rZW5zIiwiVGV4dCIsInRva2VuaXplIiwidG9rZW4iLCJzaGlmdCIsInR5cGUiLCJUWVBFX1RFWFQiLCJpc1NwYWNlIiwiaXNQcmV2U3BhY2UiLCJpc0Z1bGxXaWR0aCIsImlzUHJldkZ1bGxXaWR0aCIsInZhbHVlIiwiY2MiLCJjaGFyQ29kZUF0IiwiYyIsImNoYXJBdCIsIlRZUEVfRkciLCJUWVBFX0JHIiwiVFlQRV9ORVdMSU5FIiwidG91Y2hlcyIsImNsaWVudFgiLCJjbGllbnRZIiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsImxlZnQiLCJ0b3AiLCJNYXRoIiwiZmxvb3IiLCJjaGFyIiwicHVzaCIsInRpbGUiLCJ0aWxlTWFwIiwiY29udmVydENvbG9yIiwiZHJhd1RpbGUiLCJzeCIsInN5IiwiZHgiLCJkeSIsInRzdyIsImxlblgiLCJkZHgiLCJkc3giLCJsZW5ZIiwidGRhdGEiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJwdXRJbWFnZURhdGEiLCJDb2xvciIsImZyb21TdHJpbmciXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7Ozs7QUFFQTtBQUNBOzs7Ozs7Ozs7Ozs7OztBQWNBO0lBQ2FBLE8sV0FBQUEsTztBQUVYLG1CQUFZQyxPQUFaLEVBQ0E7QUFBQTs7QUFDRSxTQUFLQyxTQUFMLEdBQWlCLEVBQWpCO0FBQ0EsU0FBS0QsT0FBTCxHQUFlQSxPQUFmO0FBQ0EsU0FBS0UsTUFBTCxHQUFjQyxTQUFTQyxhQUFULENBQXVCLFFBQXZCLENBQWQ7O0FBRUE7QUFDQTtBQUNBLFNBQUtDLEVBQUwsR0FBVSxLQUFLSCxNQUFMLENBQVlJLEtBQVosR0FBb0IsS0FBS04sT0FBTCxDQUFhTyxTQUFiLEdBQXlCLEtBQUtQLE9BQUwsQ0FBYU0sS0FBcEU7QUFDQSxTQUFLRSxFQUFMLEdBQVUsS0FBS04sTUFBTCxDQUFZTyxNQUFaLEdBQXFCLEtBQUtULE9BQUwsQ0FBYVUsVUFBYixHQUEwQixLQUFLVixPQUFMLENBQWFTLE1BQXRFOztBQUVBLFNBQUtFLE9BQUwsR0FBZSxLQUFLVCxNQUFMLENBQVlVLFVBQVosQ0FBdUIsSUFBdkIsQ0FBZjs7QUFFQSxTQUFLRCxPQUFMLENBQWFFLFNBQWIsR0FBeUIsT0FBekI7QUFDQSxTQUFLRixPQUFMLENBQWFHLFFBQWIsQ0FBc0IsQ0FBdEIsRUFBd0IsQ0FBeEIsRUFBMEIsS0FBS1QsRUFBL0IsRUFBa0MsS0FBS0csRUFBdkM7O0FBRUE7QUFDQSxTQUFLTyxlQUFMLEdBQXVCLEtBQUtKLE9B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QWEsSUFBYjtBQUNEOzs7bUNBRUQ7QUFDRSxVQUFJTixJQUFJLElBQVI7QUFDQTtBQUNBLFVBQUcsQ0FBQyxLQUFLRixhQUFOLElBQXVCLENBQUMsS0FBS1EsS0FBaEMsRUFDQTtBQUNFd0UsOEJBQXNCLFlBQUk7QUFBQzlFLFlBQUVPLFlBQUY7QUFBaUIsU0FBNUM7QUFDQTtBQUNEO0FBQ0QsV0FBS0QsS0FBTCxHQUFhLEtBQWI7QUFDQSxXQUFLbEIsZUFBTCxDQUFxQkksSUFBckIsQ0FBMEIyQixHQUExQixDQUE4QixLQUFLekIsVUFBbkM7QUFDQSxXQUFLVixPQUFMLENBQWErRixZQUFiLENBQTBCLEtBQUszRixlQUEvQixFQUFnRCxDQUFoRCxFQUFtRCxDQUFuRDtBQUNBMEYsNEJBQXNCLFlBQUk7QUFBQzlFLFVBQUVPLFlBQUY7QUFBaUIsT0FBNUM7QUFDRDs7Ozs7O0FBR0huQyxRQUFROEYsWUFBUixHQUF1QixVQUFTbEIsQ0FBVCxFQUN2QjtBQUNFLE1BQUcsT0FBT0EsQ0FBUCxJQUFhLFFBQWhCLEVBQ0E7QUFDRUEsUUFBSWdDLGFBQU1DLFVBQU4sQ0FBaUJqQyxDQUFqQixDQUFKO0FBQ0Q7QUFDRCxNQUFHLFFBQU9BLENBQVAseUNBQU9BLENBQVAsTUFBYSxRQUFoQixFQUNBO0FBQ0U7QUFDQUEsUUFBS0EsRUFBRSxDQUFGLElBQUssSUFBTixHQUNGLENBQUNBLEVBQUUsQ0FBRixJQUFLLElBQU4sS0FBYSxDQURYLEdBRUYsQ0FBQ0EsRUFBRSxDQUFGLElBQUssSUFBTixLQUFhLEVBRmY7QUFHRDtBQUNELFNBQU9BLENBQVA7QUFDRCxDQWREIiwiZmlsZSI6IkRpc3BsYXkuanMiLCJzb3VyY2VSb290IjoiL2FwcC9zcmMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NvbG9yfSBmcm9tIFwicm90LWpzXCJcbmltcG9ydCB7VGV4dH0gZnJvbSBcInJvdC1qc1wiXG4vLyB3ZWxwLCBpdCBoYXBwZW5lZC4gSSBhbSByZXdyaXRpbmcgdGhlIHJvdGpzIGRpc3BsYXkgY2xhc3MgdG8gZ2V0IG1vcmUgc3BlZWQuXG4vKlxudmFyIG8gPSB7XG4gIGxheW91dDogXCJ0aWxlXCIsXG4gIGJnOiBcImJsYWNrXCIsXG4gIHRpbGVXaWR0aDogMTAsXG4gIHRpbGVIZWlnaHQ6IDE2LFxuICB0aWxlQ29sb3JpemU6IHRydWUsXG5cdHdpZHRoOiAxMjAsXG5cdGhlaWdodDogNDAsXG4gIGZvbnRTaXplOiAxOCxcbiAgdGlsZVNldDogdGlsZVNldCxcbiAgdGlsZU1hcDogdGlsZW1hcFxufVxuKi9cbi8vIGdvaW5nIHRvIGtlZXAgdXNpbmcgcm90anMgZm9yIHRoZSBjb2xvciBzdHVmZlxuZXhwb3J0IGNsYXNzIERpc3BsYXlcbntcbiAgY29uc3RydWN0b3Iob3B0aW9ucylcbiAge1xuICAgIHRoaXMucmFuZFN0YXRlID0gMTM7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIFxuICAgIC8vIHNldCB0aGUgY2FudmFzIHNpemUgYW5kIGNhY2hlIHRoZXNlIHZhbHVlc1xuICAgIC8vIGl0IHNlZW1zIGxpa2UgcmVhZGluZyB0aGVtIGJhY2sgZnJvbSB0aGUgZWxlbWVudCBpcyBzbG93ZXJcbiAgICB0aGlzLmN3ID0gdGhpcy5jYW52YXMud2lkdGggPSB0aGlzLm9wdGlvbnMudGlsZVdpZHRoICogdGhpcy5vcHRpb25zLndpZHRoO1xuICAgIHRoaXMuY2ggPSB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLm9wdGlvbnMudGlsZUhlaWdodCAqIHRoaXMub3B0aW9ucy5oZWlnaHQ7XG4gICAgXG4gICAgdGhpcy5jb250ZXh0ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgIFxuICAgIHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSBcImJsYWNrXCI7XG4gICAgdGhpcy5jb250ZXh0LmZpbGxSZWN0KDAsMCx0aGlzLmN3LHRoaXMuY2gpO1xuXG4gICAgLy8gc2V0IHVwIHRoZSBidWZmZXIgd2UgYXJlIGdvaW5nIHRvIGRyYXcgdG9cbiAgICB0aGlzLmRyYXdCdWZmZXJJbWFnZSA9IHRoaXMuY29udGV4dC5nZXRJbWFnZURhdGEoMCwgMCwgdGhpcy5jdywgdGhpcy5jaCk7XG4gICAgdmFyIGNhbnZhc2J1ZiA9IG5ldyBBcnJheUJ1ZmZlcih0aGlzLmRyYXdCdWZmZXJJbWFnZS5kYXRhLmxlbmd0aCk7XG4gICAgdGhpcy5jYW52YXNidWY4ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGNhbnZhc2J1Zik7XG4gICAgdGhpcy5jYW52YXNkYXRhID0gbmV3IFVpbnQzMkFycmF5KGNhbnZhc2J1Zik7XG4gICAgXG4gICAgLy8gc3RhcnQgdGhlIHRpbGVzZXRMb2FkXG4gICAgdGhpcy50aWxlU2V0TG9hZGVkID0gZmFsc2U7XG4gICAgdGhpcy50aWxlU2V0SW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICBsZXQgZCA9IHRoaXM7XG4gICAgdGhpcy50aWxlU2V0SW1nLm9ubG9hZCAgPSAoKT0+e2Quc3ByaXRlTG9hZENvbXBsZXRlKCl9O1xuICAgIHRoaXMudGlsZVNldEltZy5jcm9zc09yaWdpbiA9IFwiQW5vbnltb3VzXCI7XG4gICAgdGhpcy50aWxlU2V0SW1nLnNyYyA9IHRoaXMub3B0aW9ucy50aWxlU2V0O1xuICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgICAvLyBraWNrIG9mZiB0aGUgZHJhdyBsb29wXG4gICAgdGhpcy5kcmF3SW50ZXJuYWwoKTtcbiAgfVxuICBnZXRJbWFnZURhdGEoaW1nKVxuICB7XG4gICAgdmFyIHRtcENhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIHZhciB0bXBDb250ZXh0ID0gdG1wQ2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgdGhpcy50aWxlc2hlZXRXaWR0aCA9IGltZy53aWR0aDtcbiAgICB0aGlzLnRpbGVzaGVldEhlaWdodCA9IGltZy5oZWlnaHQ7XG4gICAgdG1wQ2FudmFzLndpZHRoID0gaW1nLndpZHRoO1xuICAgIHRtcENhbnZhcy5oZWlnaHQgPSBpbWcuaGVpZ2h0O1xuICAgIHRtcENvbnRleHQuZHJhd0ltYWdlKGltZywgMCwgMCk7XG4gICAgdmFyIG15RGF0YSA9IHRtcENvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIGltZy53aWR0aCwgaW1nLmhlaWdodCk7XG4gICAgcmV0dXJuIG15RGF0YTtcbiAgfVxuICBzcHJpdGVMb2FkQ29tcGxldGUoKVxuICB7XG5cbiAgICAvLyBsb2FkIHRoZSBpbWFnZSBkYXRhIGZyb20gdGhlIHRpbGVzXG4gICAgdGhpcy50aWxlb2dEYXRhID0gdGhpcy5nZXRJbWFnZURhdGEodGhpcy50aWxlU2V0SW1nKS5kYXRhO1xuICAgIHZhciB0aWxlYnVmID0gbmV3IEFycmF5QnVmZmVyKHRoaXMudGlsZW9nRGF0YS5sZW5ndGgpO1xuICAgIHZhciB0aWxlYnVmOCA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh0aWxlYnVmKTtcbiAgICB0aGlzLnRpbGVkYXRhID0gbmV3IFVpbnQzMkFycmF5KHRpbGVidWYpO1xuICAgIHRpbGVidWY4LnNldCh0aGlzLnRpbGVvZ0RhdGEpO1xuXG4gICAgdGhpcy50aWxlU2V0TG9hZGVkID0gdHJ1ZTtcbiAgICAvLyBub3cgdGhhdCB3ZSBoYXZlIGNvbXBsZXRlZCB0aGUgbG9hZCwgcmVkcmF3IGV2ZXJ5dGhpbmcgdGhhdCB3YXMgcmVxdWVzdGVkIGJlZm9yZSB0aGUgaW1hZ2Ugd2FzIGxvYWRlZFxuICAgIGlmKHRoaXMucHJlbG9hZERyYXdzICE9PSB1bmRlZmluZWQpXG4gICAge1xuICAgICAgZm9yKGxldCBpPTA7aTx0aGlzLnByZWxvYWREcmF3cy5sZW5ndGg7aSsrKVxuICAgICAge1xuICAgICAgICBsZXQgZSA9IHRoaXMucHJlbG9hZERyYXdzW2ldO1xuICAgICAgICB0aGlzLmRyYXcoZVswXSwgZVsxXSwgZVsyXSwgZVszXSwgZVs0XSk7XG4gICAgICB9XG4gICAgICB0aGlzLnByZWxvYWREcmF3cyA9IFtdO1xuICAgIH1cbiAgICBcbiAgfVxuICBnZXRDb250YWluZXIoKVxuICB7XG4gICAgcmV0dXJuIHRoaXMuY2FudmFzO1xuICB9XG4gIGRyYXdUZXh0KHgsIHksIHRleHQsIG1heFdpZHRoKSB7XG4gICAgICBsZXQgZmcgPSBudWxsO1xuICAgICAgbGV0IGJnID0gbnVsbDtcbiAgICAgIGxldCBjeCA9IHg7XG4gICAgICBsZXQgY3kgPSB5O1xuICAgICAgbGV0IGxpbmVzID0gMTtcbiAgICAgIGlmICghbWF4V2lkdGgpIHtcbiAgICAgICAgICBtYXhXaWR0aCA9IHRoaXMub3B0aW9ucy53aWR0aCAtIHg7XG4gICAgICB9XG4gICAgICBsZXQgdG9rZW5zID0gVGV4dC50b2tlbml6ZSh0ZXh0LCBtYXhXaWR0aCk7XG4gICAgICB3aGlsZSAodG9rZW5zLmxlbmd0aCkge1xuICAgICAgICAgIGxldCB0b2tlbiA9IHRva2Vucy5zaGlmdCgpO1xuICAgICAgICAgIHN3aXRjaCAodG9rZW4udHlwZSkge1xuICAgICAgICAgICAgICBjYXNlIFRleHQuVFlQRV9URVhUOlxuICAgICAgICAgICAgICAgICAgbGV0IGlzU3BhY2UgPSBmYWxzZSwgaXNQcmV2U3BhY2UgPSBmYWxzZSwgaXNGdWxsV2lkdGggPSBmYWxzZSwgaXNQcmV2RnVsbFdpZHRoID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRva2VuLnZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgbGV0IGNjID0gdG9rZW4udmFsdWUuY2hhckNvZGVBdChpKTtcbiAgICAgICAgICAgICAgICAgICAgICBsZXQgYyA9IHRva2VuLnZhbHVlLmNoYXJBdChpKTtcbiAgICAgICAgICAgICAgICAgICAgICBpc0Z1bGxXaWR0aCA9IChjYyA+IDB4ZmYwMCAmJiBjYyA8IDB4ZmY2MSkgfHwgKGNjID4gMHhmZmRjICYmIGNjIDwgMHhmZmU4KSB8fCBjYyA+IDB4ZmZlZTtcbiAgICAgICAgICAgICAgICAgICAgICBpc1NwYWNlID0gKGMuY2hhckNvZGVBdCgwKSA9PSAweDIwIHx8IGMuY2hhckNvZGVBdCgwKSA9PSAweDMwMDApO1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1ByZXZGdWxsV2lkdGggJiYgIWlzRnVsbFdpZHRoICYmICFpc1NwYWNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGN4Kys7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0Z1bGxXaWR0aCAmJiAhaXNQcmV2U3BhY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY3grKztcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmF3KGN4KyssIGN5LCBjLCBmZywgYmcpO1xuICAgICAgICAgICAgICAgICAgICAgIGlzUHJldlNwYWNlID0gaXNTcGFjZTtcbiAgICAgICAgICAgICAgICAgICAgICBpc1ByZXZGdWxsV2lkdGggPSBpc0Z1bGxXaWR0aDtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBjYXNlIFRleHQuVFlQRV9GRzpcbiAgICAgICAgICAgICAgICAgIGZnID0gdG9rZW4udmFsdWUgfHwgbnVsbDtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBjYXNlIFRleHQuVFlQRV9CRzpcbiAgICAgICAgICAgICAgICAgIGJnID0gdG9rZW4udmFsdWUgfHwgbnVsbDtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICBjYXNlIFRleHQuVFlQRV9ORVdMSU5FOlxuICAgICAgICAgICAgICAgICAgY3ggPSB4O1xuICAgICAgICAgICAgICAgICAgY3krKztcbiAgICAgICAgICAgICAgICAgIGxpbmVzKys7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbGluZXM7XG4gIH1cbiAgcmFuZCgpXG4gIHtcbiAgICAvKiBBbGdvcml0aG0gXCJ4b3JcIiBmcm9tIHAuIDQgb2YgTWFyc2FnbGlhLCBcIlhvcnNoaWZ0IFJOR3NcIiAqL1xuICAgIHZhciB4ID0gdGhpcy5yYW5kU3RhdGU7XG4gICAgeCBePSB4IDw8IDEzO1xuICAgIHggXj0geCA+PiAxNztcbiAgICB4IF49IHggPDwgNTtcbiAgICB0aGlzLnJhbmRTdGF0ZSA9IHg7XG4gICAgcmV0dXJuIHg7XG4gIH1cblxuICBldmVudFRvUG9zaXRpb24oZSlcbiAge1xuICAgIGxldCB4LCB5O1xuICAgIGlmIChcInRvdWNoZXNcIiBpbiBlKSB7XG4gICAgICAgIHggPSBlLnRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgICAgeSA9IGUudG91Y2hlc1swXS5jbGllbnRZO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgeCA9IGUuY2xpZW50WDtcbiAgICAgICAgeSA9IGUuY2xpZW50WTtcbiAgICB9XG4gICAgbGV0IGNhbnZhcyA9IHRoaXMuY29udGV4dC5jYW52YXM7XG4gICAgbGV0IHJlY3QgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgeCAtPSByZWN0LmxlZnQ7XG4gICAgeSAtPSByZWN0LnRvcDtcbiAgICB4ICo9IGNhbnZhcy53aWR0aCAvIHJlY3Qud2lkdGg7XG4gICAgeSAqPSBjYW52YXMuaGVpZ2h0IC8gcmVjdC5oZWlnaHQ7XG4gICAgaWYgKHggPCAwIHx8IHkgPCAwIHx8IHggPj0gY2FudmFzLndpZHRoIHx8IHkgPj0gY2FudmFzLmhlaWdodCkge1xuICAgICAgICByZXR1cm4gWy0xLCAtMV07XG4gICAgfVxuICAgIHJldHVybiBbTWF0aC5mbG9vcih4IC8gdGhpcy5vcHRpb25zLnRpbGVXaWR0aCksIE1hdGguZmxvb3IoeSAvIHRoaXMub3B0aW9ucy50aWxlSGVpZ2h0KV07XG4gIH1cbiAgZHJhdyh4LHksY2hhcixmZyxiZylcbiAge1xuICAgIGlmKCF0aGlzLnRpbGVTZXRMb2FkZWQpXG4gICAge1xuICAgICAgaWYodGhpcy5wcmVsb2FkRHJhd3MgPT0gdW5kZWZpbmVkKVxuICAgICAge1xuICAgICAgICB0aGlzLnByZWxvYWREcmF3cyA9IFtdO1xuICAgICAgfVxuICAgICAgdGhpcy5wcmVsb2FkRHJhd3MucHVzaChbeCx5LGNoYXIsZmcsYmddKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYoeCA8IDAgfHwgeCA+PSB0aGlzLm9wdGlvbnMud2lkdGggfHwgeSA8IDAgfHwgeSA+PSB0aGlzLm9wdGlvbnMuaGVpZ2h0KVxuICAgICAgcmV0dXJuO1xuICAgIC8vc2hvdWxkIGRvIHNvbWUgY2xhbXBpbmcgdG8gbWFrZSBzdXJlIHdlIGFyZW4ndCBkcmF3aW5nIG91dCBvZiBib3VuZHMgc3R1ZmZcbiAgICBsZXQgdGlsZSA9IHRoaXMub3B0aW9ucy50aWxlTWFwW2NoYXJdO1xuICAgIGlmKHRpbGUgIT0gdW5kZWZpbmVkKVxuICAgIHtcbiAgICAgIC8qXG4gICAgICBmZyA9IHRoaXMucmFuZCgpfCgweGZmPDwyNCk7XG4gICAgICBiZyA9IHRoaXMucmFuZCgpfCgweGZmPDwyNCk7XG4gICAgICAqL1xuICAgICAgZmcgPSBEaXNwbGF5LmNvbnZlcnRDb2xvcihmZyk7XG4gICAgICBpZihiZyA9PSB1bmRlZmluZWQpXG4gICAgICB7XG4gICAgICAgIGJnID0gMHgwMDtcbiAgICAgIH1cbiAgICAgIGJnID0gRGlzcGxheS5jb252ZXJ0Q29sb3IoYmcpO1xuICAgICAgdGhpcy5kcmF3VGlsZSh0aWxlWzBdLCB0aWxlWzFdLCB4KnRoaXMub3B0aW9ucy50aWxlV2lkdGgsIHkqdGhpcy5vcHRpb25zLnRpbGVIZWlnaHQsIGZnLCBiZyk7XG4gICAgfVxuICB9XG4gIFxuICBkcmF3VGlsZShzeCwgc3ksIGR4LCBkeSwgZmcsIGJnKVxuICB7XG4gICAgLy8gbm90IHN1cmUgaWYgc3RvcmluZyB0aGVzZSBsb2NhbHMgaGVscHMgb3Igbm90LCBidXQganVzdCBpbiBjYXNlXG4gICAgbGV0IGN3ID0gdGhpcy5jdztcbiAgICBsZXQgdHN3ID0gdGhpcy50aWxlc2hlZXRXaWR0aDtcbiAgICBmb3IobGV0IHg9MCwgbGVuWCA9IHRoaXMub3B0aW9ucy50aWxlV2lkdGg7eDxsZW5YO3grKylcbiAgICB7XG4gICAgICAvLyBwcmUgY2FsYyB0aGVzZSB2YWx1ZXMgc28gd2UgZG9uJ3QgbmVlZCB0byBkbyB0aGVtIG9uXG4gICAgICAvLyB0aGUgaW5uZXIgbG9vcFxuICAgICAgbGV0IGRkeCA9IChkeCt4KTtcbiAgICAgIGxldCBkc3ggPSAoc3greCk7XG4gICAgICBmb3IobGV0IHk9MCwgbGVuWSA9IHRoaXMub3B0aW9ucy50aWxlSGVpZ2h0O3k8bGVuWTt5KyspXG4gICAgICB7XG4gICAgICAgIC8vIG9ubHkgcGVyZm9ybSB0aGlzIGxvb2t1cCBvbmNlXG4gICAgICAgIGxldCB0ZGF0YSA9IHRoaXMudGlsZWRhdGFbKGRzeCsoc3kreSkqdHN3KV07XG4gICAgICAgIHRoaXMuY2FudmFzZGF0YVsoZGR4KyhkeSt5KSpjdyldID0gMHhmZjw8MjQgfCB0ZGF0YSZmZyB8IH50ZGF0YSZiZztcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gIH1cbiAgZHJhd0ludGVybmFsKClcbiAge1xuICAgIGxldCBkID0gdGhpcztcbiAgICAvLyBlYXJseSBvdXQgaWYgd2UgYXJlbid0IHJlYWR5IHRvIGRyYXcgeWV0XG4gICAgaWYoIXRoaXMudGlsZVNldExvYWRlZCB8fCAhdGhpcy5kaXJ0eSlcbiAgICB7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCk9PntkLmRyYXdJbnRlcm5hbCgpfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgICB0aGlzLmRyYXdCdWZmZXJJbWFnZS5kYXRhLnNldCh0aGlzLmNhbnZhc2J1ZjgpO1xuICAgIHRoaXMuY29udGV4dC5wdXRJbWFnZURhdGEodGhpcy5kcmF3QnVmZmVySW1hZ2UsIDAsIDApO1xuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKT0+e2QuZHJhd0ludGVybmFsKCl9KTtcbiAgfVxufVxuXG5EaXNwbGF5LmNvbnZlcnRDb2xvciA9IGZ1bmN0aW9uKGMpXG57XG4gIGlmKHR5cGVvZihjKSA9PSBcInN0cmluZ1wiKVxuICB7XG4gICAgYyA9IENvbG9yLmZyb21TdHJpbmcoYyk7XG4gIH1cbiAgaWYodHlwZW9mKGMpID09IFwib2JqZWN0XCIpXG4gIHtcbiAgICAvLyBjb252ZXJ0IHRvIG91ciBnb29kIHJlcHJlc2VudGF0aW9uXG4gICAgYyA9IChjWzBdJjB4ZmYpXG4gICAgfCAoY1sxXSYweGZmKTw8OFxuICAgIHwgKGNbMl0mMHhmZik8PDE2O1xuICB9XG4gIHJldHVybiBjO1xufSJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "Display.js"
      ],
      "names": [
        "Display",
        "options",
        "randState",
        "canvas",
        "document",
        "createElement",
        "cw",
        "width",
        "tileWidth",
        "ch",
        "height",
        "tileHeight",
        "context",
        "getContext",
        "fillStyle",
        "fillRect",
        "drawBufferImage",
        "getImageData",
        "canvasbuf",
        "ArrayBuffer",
        "data",
        "length",
        "canvasbuf8",
        "Uint8ClampedArray",
        "canvasdata",
        "Uint32Array",
        "tileSetLoaded",
        "tileSetImg",
        "d",
        "onload",
        "spriteLoadComplete",
        "crossOrigin",
        "src",
        "tileSet",
        "dirty",
        "drawInternal",
        "img",
        "tmpCanvas",
        "tmpContext",
        "tilesheetWidth",
        "tilesheetHeight",
        "drawImage",
        "myData",
        "tileogData",
        "tilebuf",
        "tilebuf8",
        "tiledata",
        "set",
        "preloadDraws",
        "undefined",
        "i",
        "e",
        "draw",
        "x",
        "y",
        "text",
        "maxWidth",
        "fg",
        "bg",
        "cx",
        "cy",
        "lines",
        "tokens",
        "Text",
        "tokenize",
        "token",
        "shift",
        "type",
        "TYPE_TEXT",
        "isSpace",
        "isPrevSpace",
        "isFullWidth",
        "isPrevFullWidth",
        "value",
        "cc",
        "charCodeAt",
        "c",
        "charAt",
        "TYPE_FG",
        "TYPE_BG",
        "TYPE_NEWLINE",
        "touches",
        "clientX",
        "clientY",
        "rect",
        "getBoundingClientRect",
        "left",
        "top",
        "Math",
        "floor",
        "char",
        "push",
        "tile",
        "tileMap",
        "convertColor",
        "drawTile",
        "sx",
        "sy",
        "dx",
        "dy",
        "tsw",
        "lenX",
        "ddx",
        "dsx",
        "lenY",
        "tdata",
        "requestAnimationFrame",
        "putImageData",
        "Color",
        "fromString"
      ],
      "mappings": ";;;;;;;;;;;AAAA;;;;AAEA;AACA;;;;;;;;;;;;;;AAcA;IACaA,O,WAAAA,O;AAEX,mBAAYC,OAAZ,EACA;AAAA;;AACE,SAAKC,SAAL,GAAiB,EAAjB;AACA,SAAKD,OAAL,GAAeA,OAAf;AACA,SAAKE,MAAL,GAAcC,SAASC,aAAT,CAAuB,QAAvB,CAAd;;AAEA;AACA;AACA,SAAKC,EAAL,GAAU,KAAKH,MAAL,CAAYI,KAAZ,GAAoB,KAAKN,OAAL,CAAaO,SAAb,GAAyB,KAAKP,OAAL,CAAaM,KAApE;AACA,SAAKE,EAAL,GAAU,KAAKN,MAAL,CAAYO,MAAZ,GAAqB,KAAKT,OAAL,CAAaU,UAAb,GAA0B,KAAKV,OAAL,CAAaS,MAAtE;;AAEA,SAAKE,OAAL,GAAe,KAAKT,MAAL,CAAYU,UAAZ,CAAuB,IAAvB,CAAf;;AAEA,SAAKD,OAAL,CAAaE,SAAb,GAAyB,OAAzB;AACA,SAAKF,OAAL,CAAaG,QAAb,CAAsB,CAAtB,EAAwB,CAAxB,EAA0B,KAAKT,EAA/B,EAAkC,KAAKG,EAAvC;;AAEA;AACA,SAAKO,eAAL,GAAuB,KAAKJ,OAAL,CAAaK,YAAb,CAA0B,CAA1B,EAA6B,CAA7B,EAAgC,KAAKX,EAArC,EAAyC,KAAKG,EAA9C,CAAvB;AACA,QAAIS,YAAY,IAAIC,WAAJ,CAAgB,KAAKH,eAAL,CAAqBI,IAArB,CAA0BC,MAA1C,CAAhB;AACA,SAAKC,UAAL,GAAkB,IAAIC,iBAAJ,CAAsBL,SAAtB,CAAlB;AACA,SAAKM,UAAL,GAAkB,IAAIC,WAAJ,CAAgBP,SAAhB,CAAlB;;AAEA;AACA,SAAKQ,aAAL,GAAqB,KAArB;AACA,SAAKC,UAAL,GAAkBvB,SAASC,aAAT,CAAuB,KAAvB,CAAlB;AACA,QAAIuB,IAAI,IAAR;AACA,SAAKD,UAAL,CAAgBE,MAAhB,GAA0B,YAAI;AAACD,QAAEE,kBAAF;AAAuB,KAAtD;AACA,SAAKH,UAAL,CAAgBI,WAAhB,GAA8B,WAA9B;AACA,SAAKJ,UAAL,CAAgBK,GAAhB,GAAsB,KAAK/B,OAAL,CAAagC,OAAnC;AACA,SAAKC,KAAL,GAAa,KAAb;AACA;AACA,SAAKC,YAAL;AACD;;;;iCACYC,G,EACb;AACE,UAAIC,YAAYjC,SAASC,aAAT,CAAuB,QAAvB,CAAhB;AACA,UAAIiC,aAAaD,UAAUxB,UAAV,CAAqB,IAArB,CAAjB;AACA,WAAK0B,cAAL,GAAsBH,IAAI7B,KAA1B;AACA,WAAKiC,eAAL,GAAuBJ,IAAI1B,MAA3B;AACA2B,gBAAU9B,KAAV,GAAkB6B,IAAI7B,KAAtB;AACA8B,gBAAU3B,MAAV,GAAmB0B,IAAI1B,MAAvB;AACA4B,iBAAWG,SAAX,CAAqBL,GAArB,EAA0B,CAA1B,EAA6B,CAA7B;AACA,UAAIM,SAASJ,WAAWrB,YAAX,CAAwB,CAAxB,EAA2B,CAA3B,EAA8BmB,IAAI7B,KAAlC,EAAyC6B,IAAI1B,MAA7C,CAAb;AACA,aAAOgC,MAAP;AACD;;;yCAED;;AAEE;AACA,WAAKC,UAAL,GAAkB,KAAK1B,YAAL,CAAkB,KAAKU,UAAvB,EAAmCP,IAArD;AACA,UAAIwB,UAAU,IAAIzB,WAAJ,CAAgB,KAAKwB,UAAL,CAAgBtB,MAAhC,CAAd;AACA,UAAIwB,WAAW,IAAItB,iBAAJ,CAAsBqB,OAAtB,CAAf;AACA,WAAKE,QAAL,GAAgB,IAAIrB,WAAJ,CAAgBmB,OAAhB,CAAhB;AACAC,eAASE,GAAT,CAAa,KAAKJ,UAAlB;;AAEA,WAAKjB,aAAL,GAAqB,IAArB;AACA;AACA,UAAG,KAAKsB,YAAL,KAAsBC,SAAzB,EACA;AACE,aAAI,IAAIC,IAAE,CAAV,EAAYA,IAAE,KAAKF,YAAL,CAAkB3B,MAAhC,EAAuC6B,GAAvC,EACA;AACE,cAAIC,IAAI,KAAKH,YAAL,CAAkBE,CAAlB,CAAR;AACA,eAAKE,IAAL,CAAUD,EAAE,CAAF,CAAV,EAAgBA,EAAE,CAAF,CAAhB,EAAsBA,EAAE,CAAF,CAAtB,EAA4BA,EAAE,CAAF,CAA5B,EAAkCA,EAAE,CAAF,CAAlC;AACD;AACD,aAAKH,YAAL,GAAoB,EAApB;AACD;AAEF;;;mCAED;AACE,aAAO,KAAK7C,MAAZ;AACD;;;6BACQkD,C,EAAGC,C,EAAGC,I,EAAMC,Q,EAAU;AAC3B,UAAIC,KAAK,IAAT;AACA,UAAIC,KAAK,IAAT;AACA,UAAIC,KAAKN,CAAT;AACA,UAAIO,KAAKN,CAAT;AACA,UAAIO,QAAQ,CAAZ;AACA,UAAI,CAACL,QAAL,EAAe;AACXA,mBAAW,KAAKvD,OAAL,CAAaM,KAAb,GAAqB8C,CAAhC;AACH;AACD,UAAIS,SAASC,YAAKC,QAAL,CAAcT,IAAd,EAAoBC,QAApB,CAAb;AACA,aAAOM,OAAOzC,MAAd,EAAsB;AAClB,YAAI4C,QAAQH,OAAOI,KAAP,EAAZ;AACA,gBAAQD,MAAME,IAAd;AACI,eAAKJ,YAAKK,SAAV;AACI,gBAAIC,UAAU,KAAd;AAAA,gBAAqBC,cAAc,KAAnC;AAAA,gBAA0CC,cAAc,KAAxD;AAAA,gBAA+DC,kBAAkB,KAAjF;AACA,iBAAK,IAAItB,IAAI,CAAb,EAAgBA,IAAIe,MAAMQ,KAAN,CAAYpD,MAAhC,EAAwC6B,GAAxC,EAA6C;AACzC,kBAAIwB,KAAKT,MAAMQ,KAAN,CAAYE,UAAZ,CAAuBzB,CAAvB,CAAT;AACA,kBAAI0B,IAAIX,MAAMQ,KAAN,CAAYI,MAAZ,CAAmB3B,CAAnB,CAAR;AACAqB,4BAAeG,KAAK,MAAL,IAAeA,KAAK,MAArB,IAAiCA,KAAK,MAAL,IAAeA,KAAK,MAArD,IAAgEA,KAAK,MAAnF;AACAL,wBAAWO,EAAED,UAAF,CAAa,CAAb,KAAmB,IAAnB,IAA2BC,EAAED,UAAF,CAAa,CAAb,KAAmB,MAAzD;AACA,kBAAIH,mBAAmB,CAACD,WAApB,IAAmC,CAACF,OAAxC,EAAiD;AAC7CV;AACH;AACD,kBAAIY,eAAe,CAACD,WAApB,EAAiC;AAC7BX;AACH;AACD,mBAAKP,IAAL,CAAUO,IAAV,EAAgBC,EAAhB,EAAoBgB,CAApB,EAAuBnB,EAAvB,EAA2BC,EAA3B;AACAY,4BAAcD,OAAd;AACAG,gCAAkBD,WAAlB;AACH;AACD;AACJ,eAAKR,YAAKe,OAAV;AACIrB,iBAAKQ,MAAMQ,KAAN,IAAe,IAApB;AACA;AACJ,eAAKV,YAAKgB,OAAV;AACIrB,iBAAKO,MAAMQ,KAAN,IAAe,IAApB;AACA;AACJ,eAAKV,YAAKiB,YAAV;AACIrB,iBAAKN,CAAL;AACAO;AACAC;AACA;AA7BR;AA+BH;AACD,aAAOA,KAAP;AACH;;;2BAED;AACE;AACA,UAAIR,IAAI,KAAKnD,SAAb;AACAmD,WAAKA,KAAK,EAAV;AACAA,WAAKA,KAAK,EAAV;AACAA,WAAKA,KAAK,CAAV;AACA,WAAKnD,SAAL,GAAiBmD,CAAjB;AACA,aAAOA,CAAP;AACD;;;oCAEeF,C,EAChB;AACE,UAAIE,UAAJ;AAAA,UAAOC,UAAP;AACA,UAAI,aAAaH,CAAjB,EAAoB;AAChBE,YAAIF,EAAE8B,OAAF,CAAU,CAAV,EAAaC,OAAjB;AACA5B,YAAIH,EAAE8B,OAAF,CAAU,CAAV,EAAaE,OAAjB;AACH,OAHD,MAIK;AACD9B,YAAIF,EAAE+B,OAAN;AACA5B,YAAIH,EAAEgC,OAAN;AACH;AACD,UAAIhF,SAAS,KAAKS,OAAL,CAAaT,MAA1B;AACA,UAAIiF,OAAOjF,OAAOkF,qBAAP,EAAX;AACAhC,WAAK+B,KAAKE,IAAV;AACAhC,WAAK8B,KAAKG,GAAV;AACAlC,WAAKlD,OAAOI,KAAP,GAAe6E,KAAK7E,KAAzB;AACA+C,WAAKnD,OAAOO,MAAP,GAAgB0E,KAAK1E,MAA1B;AACA,UAAI2C,IAAI,CAAJ,IAASC,IAAI,CAAb,IAAkBD,KAAKlD,OAAOI,KAA9B,IAAuC+C,KAAKnD,OAAOO,MAAvD,EAA+D;AAC3D,eAAO,CAAC,CAAC,CAAF,EAAK,CAAC,CAAN,CAAP;AACH;AACD,aAAO,CAAC8E,KAAKC,KAAL,CAAWpC,IAAI,KAAKpD,OAAL,CAAaO,SAA5B,CAAD,EAAyCgF,KAAKC,KAAL,CAAWnC,IAAI,KAAKrD,OAAL,CAAaU,UAA5B,CAAzC,CAAP;AACD;;;yBACI0C,C,EAAEC,C,EAAEoC,I,EAAKjC,E,EAAGC,E,EACjB;AACE,UAAG,CAAC,KAAKhC,aAAT,EACA;AACE,YAAG,KAAKsB,YAAL,IAAqBC,SAAxB,EACA;AACE,eAAKD,YAAL,GAAoB,EAApB;AACD;AACD,aAAKA,YAAL,CAAkB2C,IAAlB,CAAuB,CAACtC,CAAD,EAAGC,CAAH,EAAKoC,IAAL,EAAUjC,EAAV,EAAaC,EAAb,CAAvB;AACA;AACD;AACD,UAAGL,IAAI,CAAJ,IAASA,KAAK,KAAKpD,OAAL,CAAaM,KAA3B,IAAoC+C,IAAI,CAAxC,IAA6CA,KAAK,KAAKrD,OAAL,CAAaS,MAAlE,EACE;AACF;AACA,UAAIkF,OAAO,KAAK3F,OAAL,CAAa4F,OAAb,CAAqBH,IAArB,CAAX;AACA,UAAGE,QAAQ3C,SAAX,EACA;AACE;;;;AAIAQ,aAAKzD,QAAQ8F,YAAR,CAAqBrC,EAArB,CAAL;AACA,YAAGC,MAAMT,SAAT,EACA;AACES,eAAK,IAAL;AACD;AACDA,aAAK1D,QAAQ8F,YAAR,CAAqBpC,EAArB,CAAL;AACA,aAAKqC,QAAL,CAAcH,KAAK,CAAL,CAAd,EAAuBA,KAAK,CAAL,CAAvB,EAAgCvC,IAAE,KAAKpD,OAAL,CAAaO,SAA/C,EAA0D8C,IAAE,KAAKrD,OAAL,CAAaU,UAAzE,EAAqF8C,EAArF,EAAyFC,EAAzF;AACD;AACF;;;6BAEQsC,E,EAAIC,E,EAAIC,E,EAAIC,E,EAAI1C,E,EAAIC,E,EAC7B;AACE;AACA,UAAIpD,KAAK,KAAKA,EAAd;AACA,UAAI8F,MAAM,KAAK7D,cAAf;AACA,WAAI,IAAIc,IAAE,CAAN,EAASgD,OAAO,KAAKpG,OAAL,CAAaO,SAAjC,EAA2C6C,IAAEgD,IAA7C,EAAkDhD,GAAlD,EACA;AACE;AACA;AACA,YAAIiD,MAAOJ,KAAG7C,CAAd;AACA,YAAIkD,MAAOP,KAAG3C,CAAd;AACA,aAAI,IAAIC,IAAE,CAAN,EAASkD,OAAO,KAAKvG,OAAL,CAAaU,UAAjC,EAA4C2C,IAAEkD,IAA9C,EAAmDlD,GAAnD,EACA;AACE;AACA,cAAImD,QAAQ,KAAK3D,QAAL,CAAeyD,MAAI,CAACN,KAAG3C,CAAJ,IAAO8C,GAA1B,CAAZ;AACA,eAAK5E,UAAL,CAAiB8E,MAAI,CAACH,KAAG7C,CAAJ,IAAOhD,EAA5B,IAAmC,QAAM,EAAN,GAAWmG,QAAMhD,EAAjB,GAAsB,CAACgD,KAAD,GAAO/C,EAAhE;AACD;AACF;AACD,WAAKxB,KAAL,GAAa,IAAb;AACD;;;mCAED;AACE,UAAIN,IAAI,IAAR;AACA;AACA,UAAG,CAAC,KAAKF,aAAN,IAAuB,CAAC,KAAKQ,KAAhC,EACA;AACEwE,8BAAsB,YAAI;AAAC9E,YAAEO,YAAF;AAAiB,SAA5C;AACA;AACD;AACD,WAAKD,KAAL,GAAa,KAAb;AACA,WAAKlB,eAAL,CAAqBI,IAArB,CAA0B2B,GAA1B,CAA8B,KAAKzB,UAAnC;AACA,WAAKV,OAAL,CAAa+F,YAAb,CAA0B,KAAK3F,eAA/B,EAAgD,CAAhD,EAAmD,CAAnD;AACA0F,4BAAsB,YAAI;AAAC9E,UAAEO,YAAF;AAAiB,OAA5C;AACD;;;;;;AAGHnC,QAAQ8F,YAAR,GAAuB,UAASlB,CAAT,EACvB;AACE,MAAG,OAAOA,CAAP,IAAa,QAAhB,EACA;AACEA,QAAIgC,aAAMC,UAAN,CAAiBjC,CAAjB,CAAJ;AACD;AACD,MAAG,QAAOA,CAAP,yCAAOA,CAAP,MAAa,QAAhB,EACA;AACE;AACAA,QAAKA,EAAE,CAAF,IAAK,IAAN,GACF,CAACA,EAAE,CAAF,IAAK,IAAN,KAAa,CADX,GAEF,CAACA,EAAE,CAAF,IAAK,IAAN,KAAa,EAFf;AAGD;AACD,SAAOA,CAAP;AACD,CAdD",
      "file": "Display.js",
      "sourceRoot": "/app/src",
      "sourcesContent": [
        "import {Color} from \"rot-js\"\nimport {Text} from \"rot-js\"\n// welp, it happened. I am rewriting the rotjs display class to get more speed.\n/*\nvar o = {\n  layout: \"tile\",\n  bg: \"black\",\n  tileWidth: 10,\n  tileHeight: 16,\n  tileColorize: true,\n\twidth: 120,\n\theight: 40,\n  fontSize: 18,\n  tileSet: tileSet,\n  tileMap: tilemap\n}\n*/\n// going to keep using rotjs for the color stuff\nexport class Display\n{\n  constructor(options)\n  {\n    this.randState = 13;\n    this.options = options;\n    this.canvas = document.createElement('canvas');\n    \n    // set the canvas size and cache these values\n    // it seems like reading them back from the element is slower\n    this.cw = this.canvas.width = this.options.tileWidth * this.options.width;\n    this.ch = this.canvas.height = this.options.tileHeight * this.options.height;\n    \n    this.context = this.canvas.getContext(\"2d\");\n    \n    this.context.fillStyle = \"black\";\n    this.context.fillRect(0,0,this.cw,this.ch);\n\n    // set up the buffer we are going to draw to\n    this.drawBufferImage = this.context.getImageData(0, 0, this.cw, this.ch);\n    var canvasbuf = new ArrayBuffer(this.drawBufferImage.data.length);\n    this.canvasbuf8 = new Uint8ClampedArray(canvasbuf);\n    this.canvasdata = new Uint32Array(canvasbuf);\n    \n    // start the tilesetLoad\n    this.tileSetLoaded = false;\n    this.tileSetImg = document.createElement(\"img\");\n    let d = this;\n    this.tileSetImg.onload  = ()=>{d.spriteLoadComplete()};\n    this.tileSetImg.crossOrigin = \"Anonymous\";\n    this.tileSetImg.src = this.options.tileSet;\n    this.dirty = false;\n    // kick off the draw loop\n    this.drawInternal();\n  }\n  getImageData(img)\n  {\n    var tmpCanvas = document.createElement('canvas');\n    var tmpContext = tmpCanvas.getContext('2d');\n    this.tilesheetWidth = img.width;\n    this.tilesheetHeight = img.height;\n    tmpCanvas.width = img.width;\n    tmpCanvas.height = img.height;\n    tmpContext.drawImage(img, 0, 0);\n    var myData = tmpContext.getImageData(0, 0, img.width, img.height);\n    return myData;\n  }\n  spriteLoadComplete()\n  {\n\n    // load the image data from the tiles\n    this.tileogData = this.getImageData(this.tileSetImg).data;\n    var tilebuf = new ArrayBuffer(this.tileogData.length);\n    var tilebuf8 = new Uint8ClampedArray(tilebuf);\n    this.tiledata = new Uint32Array(tilebuf);\n    tilebuf8.set(this.tileogData);\n\n    this.tileSetLoaded = true;\n    // now that we have completed the load, redraw everything that was requested before the image was loaded\n    if(this.preloadDraws !== undefined)\n    {\n      for(let i=0;i<this.preloadDraws.length;i++)\n      {\n        let e = this.preloadDraws[i];\n        this.draw(e[0], e[1], e[2], e[3], e[4]);\n      }\n      this.preloadDraws = [];\n    }\n    \n  }\n  getContainer()\n  {\n    return this.canvas;\n  }\n  drawText(x, y, text, maxWidth) {\n      let fg = null;\n      let bg = null;\n      let cx = x;\n      let cy = y;\n      let lines = 1;\n      if (!maxWidth) {\n          maxWidth = this.options.width - x;\n      }\n      let tokens = Text.tokenize(text, maxWidth);\n      while (tokens.length) {\n          let token = tokens.shift();\n          switch (token.type) {\n              case Text.TYPE_TEXT:\n                  let isSpace = false, isPrevSpace = false, isFullWidth = false, isPrevFullWidth = false;\n                  for (let i = 0; i < token.value.length; i++) {\n                      let cc = token.value.charCodeAt(i);\n                      let c = token.value.charAt(i);\n                      isFullWidth = (cc > 0xff00 && cc < 0xff61) || (cc > 0xffdc && cc < 0xffe8) || cc > 0xffee;\n                      isSpace = (c.charCodeAt(0) == 0x20 || c.charCodeAt(0) == 0x3000);\n                      if (isPrevFullWidth && !isFullWidth && !isSpace) {\n                          cx++;\n                      }\n                      if (isFullWidth && !isPrevSpace) {\n                          cx++;\n                      }\n                      this.draw(cx++, cy, c, fg, bg);\n                      isPrevSpace = isSpace;\n                      isPrevFullWidth = isFullWidth;\n                  }\n                  break;\n              case Text.TYPE_FG:\n                  fg = token.value || null;\n                  break;\n              case Text.TYPE_BG:\n                  bg = token.value || null;\n                  break;\n              case Text.TYPE_NEWLINE:\n                  cx = x;\n                  cy++;\n                  lines++;\n                  break;\n          }\n      }\n      return lines;\n  }\n  rand()\n  {\n    /* Algorithm \"xor\" from p. 4 of Marsaglia, \"Xorshift RNGs\" */\n    var x = this.randState;\n    x ^= x << 13;\n    x ^= x >> 17;\n    x ^= x << 5;\n    this.randState = x;\n    return x;\n  }\n\n  eventToPosition(e)\n  {\n    let x, y;\n    if (\"touches\" in e) {\n        x = e.touches[0].clientX;\n        y = e.touches[0].clientY;\n    }\n    else {\n        x = e.clientX;\n        y = e.clientY;\n    }\n    let canvas = this.context.canvas;\n    let rect = canvas.getBoundingClientRect();\n    x -= rect.left;\n    y -= rect.top;\n    x *= canvas.width / rect.width;\n    y *= canvas.height / rect.height;\n    if (x < 0 || y < 0 || x >= canvas.width || y >= canvas.height) {\n        return [-1, -1];\n    }\n    return [Math.floor(x / this.options.tileWidth), Math.floor(y / this.options.tileHeight)];\n  }\n  draw(x,y,char,fg,bg)\n  {\n    if(!this.tileSetLoaded)\n    {\n      if(this.preloadDraws == undefined)\n      {\n        this.preloadDraws = [];\n      }\n      this.preloadDraws.push([x,y,char,fg,bg]);\n      return;\n    }\n    if(x < 0 || x >= this.options.width || y < 0 || y >= this.options.height)\n      return;\n    //should do some clamping to make sure we aren't drawing out of bounds stuff\n    let tile = this.options.tileMap[char];\n    if(tile != undefined)\n    {\n      /*\n      fg = this.rand()|(0xff<<24);\n      bg = this.rand()|(0xff<<24);\n      */\n      fg = Display.convertColor(fg);\n      if(bg == undefined)\n      {\n        bg = 0x00;\n      }\n      bg = Display.convertColor(bg);\n      this.drawTile(tile[0], tile[1], x*this.options.tileWidth, y*this.options.tileHeight, fg, bg);\n    }\n  }\n  \n  drawTile(sx, sy, dx, dy, fg, bg)\n  {\n    // not sure if storing these locals helps or not, but just in case\n    let cw = this.cw;\n    let tsw = this.tilesheetWidth;\n    for(let x=0, lenX = this.options.tileWidth;x<lenX;x++)\n    {\n      // pre calc these values so we don't need to do them on\n      // the inner loop\n      let ddx = (dx+x);\n      let dsx = (sx+x);\n      for(let y=0, lenY = this.options.tileHeight;y<lenY;y++)\n      {\n        // only perform this lookup once\n        let tdata = this.tiledata[(dsx+(sy+y)*tsw)];\n        this.canvasdata[(ddx+(dy+y)*cw)] = 0xff<<24 | tdata&fg | ~tdata&bg;\n      }\n    }\n    this.dirty = true;\n  }\n  drawInternal()\n  {\n    let d = this;\n    // early out if we aren't ready to draw yet\n    if(!this.tileSetLoaded || !this.dirty)\n    {\n      requestAnimationFrame(()=>{d.drawInternal()});\n      return;\n    }\n    this.dirty = false;\n    this.drawBufferImage.data.set(this.canvasbuf8);\n    this.context.putImageData(this.drawBufferImage, 0, 0);\n    requestAnimationFrame(()=>{d.drawInternal()});\n  }\n}\n\nDisplay.convertColor = function(c)\n{\n  if(typeof(c) == \"string\")\n  {\n    c = Color.fromString(c);\n  }\n  if(typeof(c) == \"object\")\n  {\n    // convert to our good representation\n    c = (c[0]&0xff)\n    | (c[1]&0xff)<<8\n    | (c[2]&0xff)<<16;\n  }\n  return c;\n}"
      ]
    },
    "mtime": 1546993729000
  },
  "{\"filename\":\"/app/src/components/CharButton.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/src/components\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "inherits",
        "possibleConstructorReturn",
        "classCallCheck",
        "createClass"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "../UIElements",
            "imported": [
              "UIBase"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "UIBase",
                "local": "UIBase"
              }
            ]
          },
          {
            "source": "../Drawing",
            "imported": [
              "Drawing"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Drawing",
                "local": "Drawing"
              }
            ]
          },
          {
            "source": "../Display",
            "imported": [
              "Display"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Display",
                "local": "Display"
              }
            ]
          },
          {
            "source": "./HelpLine",
            "imported": [
              "HelpLine"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "HelpLine",
                "local": "HelpLine"
              }
            ]
          },
          {
            "source": "./Panel",
            "imported": [
              "Panel"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Panel",
                "local": "Panel"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "CharPanel",
            "CharButton"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "CharPanel",
              "exported": "CharPanel"
            },
            {
              "kind": "local",
              "local": "CharButton",
              "exported": "CharButton"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/src/components/CharButton.js",
      "filenameRelative": "/app/src/components/CharButton.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "CharButton.js",
      "sourceFileName": "CharButton.js",
      "sourceRoot": "/app/src/components",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/src/components",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "CharButton"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CharButton = exports.CharPanel = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _UIElements = require(\"../UIElements\");\n\nvar _Drawing = require(\"../Drawing\");\n\nvar _Display = require(\"../Display\");\n\nvar _HelpLine = require(\"./HelpLine\");\n\nvar _Panel2 = require(\"./Panel\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar codePage437 = require('../codePage437.json');\n\nvar lastCharButton;\nvar charButtons = [];\n\nvar CharPanel = exports.CharPanel = function (_Panel) {\n  _inherits(CharPanel, _Panel);\n\n  function CharPanel(x, y) {\n    _classCallCheck(this, CharPanel);\n\n    var _this = _possibleConstructorReturn(this, (CharPanel.__proto__ || Object.getPrototypeOf(CharPanel)).call(this, \"Char\", x, y, 17, 17));\n    // currently this is hardcoded\n    // eventually will switch to a width + height defined by the character set file\n\n\n    for (var _x = 0; _x < 16; _x++) {\n      for (var _y = 0; _y < 16; _y++) {\n        var charVal = codePage437.characters[_x + _y * 16];\n        var cb = new CharButton(_this.x + _x + 1, _this.y + _y + 1, charVal);\n        _this.addChild(cb);\n      }\n    }\n    return _this;\n  }\n\n  return CharPanel;\n}(_Panel2.Panel);\n\nvar CharButton = exports.CharButton = function (_UIBase) {\n  _inherits(CharButton, _UIBase);\n\n  function CharButton(x, y, c) {\n    _classCallCheck(this, CharButton);\n\n    var _this2 = _possibleConstructorReturn(this, (CharButton.__proto__ || Object.getPrototypeOf(CharButton)).call(this, x, y, 1, 1));\n\n    _this2.c = c;\n    charButtons.push(_this2);\n    _HelpLine.HelpLine.help.assignHelpText(_this2, \"left click to set char\");\n    return _this2;\n  }\n\n  _createClass(CharButton, [{\n    key: \"press\",\n    value: function press(buttonId) {\n      charButtons.forEach(function (b) {\n        b.setDirty();\n      });\n      _Drawing.Drawing.currentDrawing.currentChar = this.c;\n      if (lastCharButton != undefined) lastCharButton.setDirty();\n      lastCharButton = this;\n      this.setDirty();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var current = this.c == _Drawing.Drawing.currentDrawing.currentChar;\n      if (current) lastCharButton = this;\n      _Display.Display.display.draw(this.x, this.y, this.c, current ? \"black\" : \"white\", current ? \"white\" : \"black\");\n    }\n  }]);\n\n  return CharButton;\n}(_UIElements.UIBase);\n\nCharButton.updateAll = function () {\n  charButtons.forEach(function (b) {\n    b.setDirty();\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNoYXJCdXR0b24uanMiXSwibmFtZXMiOlsiY29kZVBhZ2U0MzciLCJyZXF1aXJlIiwibGFzdENoYXJCdXR0b24iLCJjaGFyQnV0dG9ucyIsIkNoYXJQYW5lbCIsIngiLCJ5IiwiY2hhclZhbCIsImNoYXJhY3RlcnMiLCJjYiIsIkNoYXJCdXR0b24iLCJhZGRDaGlsZCIsIlBhbmVsIiwiYyIsInB1c2giLCJIZWxwTGluZSIsImhlbHAiLCJhc3NpZ25IZWxwVGV4dCIsImJ1dHRvbklkIiwiZm9yRWFjaCIsImIiLCJzZXREaXJ0eSIsIkRyYXdpbmciLCJjdXJyZW50RHJhd2luZyIsImN1cnJlbnRDaGFyIiwidW5kZWZpbmVkIiwiY3VycmVudCIsIkRpc3BsYXkiLCJkaXNwbGF5IiwiZHJhdyIsIlVJQmFzZSIsInVwZGF0ZUFsbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7Ozs7O0FBQ0EsSUFBTUEsY0FBY0MsUUFBUSxxQkFBUixDQUFwQjs7QUFFQSxJQUFJQyxjQUFKO0FBQ0EsSUFBSUMsY0FBYyxFQUFsQjs7SUFFYUMsUyxXQUFBQSxTOzs7QUFFWCxxQkFBWUMsQ0FBWixFQUFjQyxDQUFkLEVBQ0E7QUFBQTs7QUFBQSxzSEFHUSxNQUhSLEVBR2dCRCxDQUhoQixFQUdrQkMsQ0FIbEIsRUFHb0IsRUFIcEIsRUFHdUIsRUFIdkI7QUFDRTtBQUNBOzs7QUFFQSxTQUFLLElBQUlELEtBQUksQ0FBYixFQUFnQkEsS0FBSSxFQUFwQixFQUF3QkEsSUFBeEIsRUFDQTtBQUNFLFdBQUksSUFBSUMsS0FBSSxDQUFaLEVBQWVBLEtBQUksRUFBbkIsRUFBdUJBLElBQXZCLEVBQ0E7QUFDRSxZQUFJQyxVQUFVUCxZQUFZUSxVQUFaLENBQXVCSCxLQUFFQyxLQUFFLEVBQTNCLENBQWQ7QUFDQSxZQUFJRyxLQUFLLElBQUlDLFVBQUosQ0FBZSxNQUFLTCxDQUFMLEdBQU9BLEVBQVAsR0FBUyxDQUF4QixFQUEwQixNQUFLQyxDQUFMLEdBQU9BLEVBQVAsR0FBUyxDQUFuQyxFQUFxQ0MsT0FBckMsQ0FBVDtBQUNBLGNBQUtJLFFBQUwsQ0FBY0YsRUFBZDtBQUNEO0FBQ0Y7QUFaSDtBQWFDOzs7RUFoQjRCRyxhOztJQW1CbEJGLFUsV0FBQUEsVTs7O0FBRVgsc0JBQVlMLENBQVosRUFBY0MsQ0FBZCxFQUFnQk8sQ0FBaEIsRUFDQTtBQUFBOztBQUFBLHlIQUNRUixDQURSLEVBQ1VDLENBRFYsRUFDWSxDQURaLEVBQ2MsQ0FEZDs7QUFFRSxXQUFLTyxDQUFMLEdBQVNBLENBQVQ7QUFDQVYsZ0JBQVlXLElBQVo7QUFDQUMsdUJBQVNDLElBQVQsQ0FBY0MsY0FBZCxTQUFtQyx3QkFBbkM7QUFKRjtBQUtDOzs7OzBCQUNLQyxRLEVBQ047QUFDRWYsa0JBQVlnQixPQUFaLENBQW9CLFVBQUNDLENBQUQsRUFBSztBQUFDQSxVQUFFQyxRQUFGO0FBQWMsT0FBeEM7QUFDQUMsdUJBQVFDLGNBQVIsQ0FBdUJDLFdBQXZCLEdBQXFDLEtBQUtYLENBQTFDO0FBQ0EsVUFBR1gsa0JBQWtCdUIsU0FBckIsRUFDRXZCLGVBQWVtQixRQUFmO0FBQ0ZuQix1QkFBaUIsSUFBakI7QUFDQSxXQUFLbUIsUUFBTDtBQUNEOzs7NkJBRUQ7QUFDRSxVQUFJSyxVQUFVLEtBQUtiLENBQUwsSUFBVVMsaUJBQVFDLGNBQVIsQ0FBdUJDLFdBQS9DO0FBQ0EsVUFBR0UsT0FBSCxFQUNFeEIsaUJBQWlCLElBQWpCO0FBQ0Z5Qix1QkFBUUMsT0FBUixDQUFnQkMsSUFBaEIsQ0FBcUIsS0FBS3hCLENBQTFCLEVBQTRCLEtBQUtDLENBQWpDLEVBQW1DLEtBQUtPLENBQXhDLEVBQTBDYSxVQUFRLE9BQVIsR0FBZ0IsT0FBMUQsRUFBa0VBLFVBQVEsT0FBUixHQUFnQixPQUFsRjtBQUNEOzs7O0VBeEI2Qkksa0I7O0FBMkJoQ3BCLFdBQVdxQixTQUFYLEdBQXVCLFlBQU07QUFDM0I1QixjQUFZZ0IsT0FBWixDQUFvQixhQUFHO0FBQ3JCQyxNQUFFQyxRQUFGO0FBQ0QsR0FGRDtBQUdELENBSkQiLCJmaWxlIjoiQ2hhckJ1dHRvbi5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL3NyYy9jb21wb25lbnRzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtVSUJhc2V9IGZyb20gXCIuLi9VSUVsZW1lbnRzXCJcbmltcG9ydCB7RHJhd2luZ30gZnJvbSBcIi4uL0RyYXdpbmdcIlxuaW1wb3J0IHtEaXNwbGF5fSBmcm9tIFwiLi4vRGlzcGxheVwiXG5pbXBvcnQge0hlbHBMaW5lfSBmcm9tIFwiLi9IZWxwTGluZVwiXG5pbXBvcnQge1BhbmVsfSBmcm9tIFwiLi9QYW5lbFwiXG5jb25zdCBjb2RlUGFnZTQzNyA9IHJlcXVpcmUoJy4uL2NvZGVQYWdlNDM3Lmpzb24nKTtcblxudmFyIGxhc3RDaGFyQnV0dG9uO1xudmFyIGNoYXJCdXR0b25zID0gW107XG5cbmV4cG9ydCBjbGFzcyBDaGFyUGFuZWwgZXh0ZW5kcyBQYW5lbFxue1xuICBjb25zdHJ1Y3Rvcih4LHkpXG4gIHtcbiAgICAvLyBjdXJyZW50bHkgdGhpcyBpcyBoYXJkY29kZWRcbiAgICAvLyBldmVudHVhbGx5IHdpbGwgc3dpdGNoIHRvIGEgd2lkdGggKyBoZWlnaHQgZGVmaW5lZCBieSB0aGUgY2hhcmFjdGVyIHNldCBmaWxlXG4gICAgc3VwZXIoXCJDaGFyXCIsIHgseSwxNywxNyk7XG4gICAgZm9yIChsZXQgeCA9IDA7IHggPCAxNjsgeCsrKVxuICAgIHtcbiAgICAgIGZvcihsZXQgeSA9IDA7IHkgPCAxNjsgeSsrKVxuICAgICAge1xuICAgICAgICBsZXQgY2hhclZhbCA9IGNvZGVQYWdlNDM3LmNoYXJhY3RlcnNbeCt5KjE2XTtcbiAgICAgICAgbGV0IGNiID0gbmV3IENoYXJCdXR0b24odGhpcy54K3grMSx0aGlzLnkreSsxLGNoYXJWYWwpO1xuICAgICAgICB0aGlzLmFkZENoaWxkKGNiKTtcbiAgICAgIH1cbiAgICB9ICBcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ2hhckJ1dHRvbiBleHRlbmRzIFVJQmFzZVxue1xuICBjb25zdHJ1Y3Rvcih4LHksYylcbiAge1xuICAgIHN1cGVyKHgseSwxLDEpO1xuICAgIHRoaXMuYyA9IGM7XG4gICAgY2hhckJ1dHRvbnMucHVzaCh0aGlzKTtcbiAgICBIZWxwTGluZS5oZWxwLmFzc2lnbkhlbHBUZXh0KHRoaXMsIFwibGVmdCBjbGljayB0byBzZXQgY2hhclwiKTtcbiAgfVxuICBwcmVzcyhidXR0b25JZClcbiAge1xuICAgIGNoYXJCdXR0b25zLmZvckVhY2goKGIpPT57Yi5zZXREaXJ0eSgpO30pO1xuICAgIERyYXdpbmcuY3VycmVudERyYXdpbmcuY3VycmVudENoYXIgPSB0aGlzLmM7XG4gICAgaWYobGFzdENoYXJCdXR0b24gIT0gdW5kZWZpbmVkKVxuICAgICAgbGFzdENoYXJCdXR0b24uc2V0RGlydHkoKTtcbiAgICBsYXN0Q2hhckJ1dHRvbiA9IHRoaXM7XG4gICAgdGhpcy5zZXREaXJ0eSgpO1xuICB9XG4gIHJlbmRlcigpXG4gIHtcbiAgICBsZXQgY3VycmVudCA9IHRoaXMuYyA9PSBEcmF3aW5nLmN1cnJlbnREcmF3aW5nLmN1cnJlbnRDaGFyO1xuICAgIGlmKGN1cnJlbnQpXG4gICAgICBsYXN0Q2hhckJ1dHRvbiA9IHRoaXM7XG4gICAgRGlzcGxheS5kaXNwbGF5LmRyYXcodGhpcy54LHRoaXMueSx0aGlzLmMsY3VycmVudD9cImJsYWNrXCI6XCJ3aGl0ZVwiLGN1cnJlbnQ/XCJ3aGl0ZVwiOlwiYmxhY2tcIik7IFxuICB9XG59XG5cbkNoYXJCdXR0b24udXBkYXRlQWxsID0gKCkgPT4ge1xuICBjaGFyQnV0dG9ucy5mb3JFYWNoKGI9PntcbiAgICBiLnNldERpcnR5KCk7XG4gIH0pO1xufSJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "CharButton.js"
      ],
      "names": [
        "codePage437",
        "require",
        "lastCharButton",
        "charButtons",
        "CharPanel",
        "x",
        "y",
        "charVal",
        "characters",
        "cb",
        "CharButton",
        "addChild",
        "Panel",
        "c",
        "push",
        "HelpLine",
        "help",
        "assignHelpText",
        "buttonId",
        "forEach",
        "b",
        "setDirty",
        "Drawing",
        "currentDrawing",
        "currentChar",
        "undefined",
        "current",
        "Display",
        "display",
        "draw",
        "UIBase",
        "updateAll"
      ],
      "mappings": ";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;;;;;AACA,IAAMA,cAAcC,QAAQ,qBAAR,CAApB;;AAEA,IAAIC,cAAJ;AACA,IAAIC,cAAc,EAAlB;;IAEaC,S,WAAAA,S;;;AAEX,qBAAYC,CAAZ,EAAcC,CAAd,EACA;AAAA;;AAAA,sHAGQ,MAHR,EAGgBD,CAHhB,EAGkBC,CAHlB,EAGoB,EAHpB,EAGuB,EAHvB;AACE;AACA;;;AAEA,SAAK,IAAID,KAAI,CAAb,EAAgBA,KAAI,EAApB,EAAwBA,IAAxB,EACA;AACE,WAAI,IAAIC,KAAI,CAAZ,EAAeA,KAAI,EAAnB,EAAuBA,IAAvB,EACA;AACE,YAAIC,UAAUP,YAAYQ,UAAZ,CAAuBH,KAAEC,KAAE,EAA3B,CAAd;AACA,YAAIG,KAAK,IAAIC,UAAJ,CAAe,MAAKL,CAAL,GAAOA,EAAP,GAAS,CAAxB,EAA0B,MAAKC,CAAL,GAAOA,EAAP,GAAS,CAAnC,EAAqCC,OAArC,CAAT;AACA,cAAKI,QAAL,CAAcF,EAAd;AACD;AACF;AAZH;AAaC;;;EAhB4BG,a;;IAmBlBF,U,WAAAA,U;;;AAEX,sBAAYL,CAAZ,EAAcC,CAAd,EAAgBO,CAAhB,EACA;AAAA;;AAAA,yHACQR,CADR,EACUC,CADV,EACY,CADZ,EACc,CADd;;AAEE,WAAKO,CAAL,GAASA,CAAT;AACAV,gBAAYW,IAAZ;AACAC,uBAASC,IAAT,CAAcC,cAAd,SAAmC,wBAAnC;AAJF;AAKC;;;;0BACKC,Q,EACN;AACEf,kBAAYgB,OAAZ,CAAoB,UAACC,CAAD,EAAK;AAACA,UAAEC,QAAF;AAAc,OAAxC;AACAC,uBAAQC,cAAR,CAAuBC,WAAvB,GAAqC,KAAKX,CAA1C;AACA,UAAGX,kBAAkBuB,SAArB,EACEvB,eAAemB,QAAf;AACFnB,uBAAiB,IAAjB;AACA,WAAKmB,QAAL;AACD;;;6BAED;AACE,UAAIK,UAAU,KAAKb,CAAL,IAAUS,iBAAQC,cAAR,CAAuBC,WAA/C;AACA,UAAGE,OAAH,EACExB,iBAAiB,IAAjB;AACFyB,uBAAQC,OAAR,CAAgBC,IAAhB,CAAqB,KAAKxB,CAA1B,EAA4B,KAAKC,CAAjC,EAAmC,KAAKO,CAAxC,EAA0Ca,UAAQ,OAAR,GAAgB,OAA1D,EAAkEA,UAAQ,OAAR,GAAgB,OAAlF;AACD;;;;EAxB6BI,kB;;AA2BhCpB,WAAWqB,SAAX,GAAuB,YAAM;AAC3B5B,cAAYgB,OAAZ,CAAoB,aAAG;AACrBC,MAAEC,QAAF;AACD,GAFD;AAGD,CAJD",
      "file": "CharButton.js",
      "sourceRoot": "/app/src/components",
      "sourcesContent": [
        "import {UIBase} from \"../UIElements\"\nimport {Drawing} from \"../Drawing\"\nimport {Display} from \"../Display\"\nimport {HelpLine} from \"./HelpLine\"\nimport {Panel} from \"./Panel\"\nconst codePage437 = require('../codePage437.json');\n\nvar lastCharButton;\nvar charButtons = [];\n\nexport class CharPanel extends Panel\n{\n  constructor(x,y)\n  {\n    // currently this is hardcoded\n    // eventually will switch to a width + height defined by the character set file\n    super(\"Char\", x,y,17,17);\n    for (let x = 0; x < 16; x++)\n    {\n      for(let y = 0; y < 16; y++)\n      {\n        let charVal = codePage437.characters[x+y*16];\n        let cb = new CharButton(this.x+x+1,this.y+y+1,charVal);\n        this.addChild(cb);\n      }\n    }  \n  }\n}\n\nexport class CharButton extends UIBase\n{\n  constructor(x,y,c)\n  {\n    super(x,y,1,1);\n    this.c = c;\n    charButtons.push(this);\n    HelpLine.help.assignHelpText(this, \"left click to set char\");\n  }\n  press(buttonId)\n  {\n    charButtons.forEach((b)=>{b.setDirty();});\n    Drawing.currentDrawing.currentChar = this.c;\n    if(lastCharButton != undefined)\n      lastCharButton.setDirty();\n    lastCharButton = this;\n    this.setDirty();\n  }\n  render()\n  {\n    let current = this.c == Drawing.currentDrawing.currentChar;\n    if(current)\n      lastCharButton = this;\n    Display.display.draw(this.x,this.y,this.c,current?\"black\":\"white\",current?\"white\":\"black\"); \n  }\n}\n\nCharButton.updateAll = () => {\n  charButtons.forEach(b=>{\n    b.setDirty();\n  });\n}"
      ]
    },
    "mtime": 1546993729000
  },
  "{\"filename\":\"/app/src/components/HelpLine.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/src/components\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "inherits",
        "possibleConstructorReturn",
        "createClass",
        "classCallCheck"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "../UIElements",
            "imported": [
              "UIBase"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "UIBase",
                "local": "UIBase"
              }
            ]
          },
          {
            "source": "../Drawing",
            "imported": [
              "Drawing"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Drawing",
                "local": "Drawing"
              }
            ]
          },
          {
            "source": "../Display",
            "imported": [
              "Display"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Display",
                "local": "Display"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "HelpLine"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "HelpLine",
              "exported": "HelpLine"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/src/components/HelpLine.js",
      "filenameRelative": "/app/src/components/HelpLine.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "HelpLine.js",
      "sourceFileName": "HelpLine.js",
      "sourceRoot": "/app/src/components",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/src/components",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "HelpLine"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HelpLine = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _UIElements = require(\"../UIElements\");\n\nvar _Drawing = require(\"../Drawing\");\n\nvar _Display = require(\"../Display\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar HelpLine = exports.HelpLine = function (_UIBase) {\n  _inherits(HelpLine, _UIBase);\n\n  function HelpLine(x, y, w, h) {\n    _classCallCheck(this, HelpLine);\n\n    var _this = _possibleConstructorReturn(this, (HelpLine.__proto__ || Object.getPrototypeOf(HelpLine)).call(this, x, y, w, h));\n\n    HelpLine.help = _this;\n    _this.helpElements = {};\n    _this.currentText = \"\";\n    var t = _this;\n    _UIElements.UIBase.hoverCallback = function (e) {\n      _this.updateCurrentHoveredElement(e);\n    };\n    return _this;\n  }\n\n  _createClass(HelpLine, [{\n    key: \"assignHelpText\",\n    value: function assignHelpText(element, text) {\n      this.helpElements[element.uid] = text;\n    }\n  }, {\n    key: \"updateCurrentHoveredElement\",\n    value: function updateCurrentHoveredElement(element) {\n      if (this.helpElements[element.uid] != undefined) {\n        this.currentText = this.helpElements[element.uid];\n      } else {\n        this.currentText = \"\";\n      }\n      this.setDirty();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      // clear then rerender text\n      for (var x = this.x; x < this.x + this.width; x++) {\n        _Display.Display.display.draw(x, this.y, \" \", 0x000000, 0x000000);\n      }\n      _Display.Display.display.drawText(this.x, this.y, \"%c{white}\" + this.currentText);\n    }\n  }]);\n\n  return HelpLine;\n}(_UIElements.UIBase);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkhlbHBMaW5lLmpzIl0sIm5hbWVzIjpbIkhlbHBMaW5lIiwieCIsInkiLCJ3IiwiaCIsImhlbHAiLCJoZWxwRWxlbWVudHMiLCJjdXJyZW50VGV4dCIsInQiLCJVSUJhc2UiLCJob3ZlckNhbGxiYWNrIiwiZSIsInVwZGF0ZUN1cnJlbnRIb3ZlcmVkRWxlbWVudCIsImVsZW1lbnQiLCJ0ZXh0IiwidWlkIiwidW5kZWZpbmVkIiwic2V0RGlydHkiLCJ3aWR0aCIsIkRpc3BsYXkiLCJkaXNwbGF5IiwiZHJhdyIsImRyYXdUZXh0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7SUFFYUEsUSxXQUFBQSxROzs7QUFFWCxvQkFBWUMsQ0FBWixFQUFjQyxDQUFkLEVBQWdCQyxDQUFoQixFQUFrQkMsQ0FBbEIsRUFDQTtBQUFBOztBQUFBLG9IQUNRSCxDQURSLEVBQ1VDLENBRFYsRUFDWUMsQ0FEWixFQUNjQyxDQURkOztBQUVFSixhQUFTSyxJQUFUO0FBQ0EsVUFBS0MsWUFBTCxHQUFvQixFQUFwQjtBQUNBLFVBQUtDLFdBQUwsR0FBbUIsRUFBbkI7QUFDQSxRQUFJQyxTQUFKO0FBQ0FDLHVCQUFPQyxhQUFQLEdBQXVCLFVBQUNDLENBQUQsRUFBSztBQUMxQixZQUFLQywyQkFBTCxDQUFpQ0QsQ0FBakM7QUFDRCxLQUZEO0FBTkY7QUFTQzs7OzttQ0FDY0UsTyxFQUFTQyxJLEVBQ3hCO0FBQ0UsV0FBS1IsWUFBTCxDQUFrQk8sUUFBUUUsR0FBMUIsSUFBaUNELElBQWpDO0FBQ0Q7OztnREFDMkJELE8sRUFDNUI7QUFDRSxVQUFHLEtBQUtQLFlBQUwsQ0FBa0JPLFFBQVFFLEdBQTFCLEtBQWtDQyxTQUFyQyxFQUNBO0FBQ0UsYUFBS1QsV0FBTCxHQUFtQixLQUFLRCxZQUFMLENBQWtCTyxRQUFRRSxHQUExQixDQUFuQjtBQUNELE9BSEQsTUFLQTtBQUNFLGFBQUtSLFdBQUwsR0FBbUIsRUFBbkI7QUFDRDtBQUNELFdBQUtVLFFBQUw7QUFDRDs7OzZCQUVEO0FBQ0U7QUFDQSxXQUFJLElBQUloQixJQUFJLEtBQUtBLENBQWpCLEVBQW9CQSxJQUFJLEtBQUtBLENBQUwsR0FBTyxLQUFLaUIsS0FBcEMsRUFBMENqQixHQUExQyxFQUNBO0FBQ0VrQix5QkFBUUMsT0FBUixDQUFnQkMsSUFBaEIsQ0FBcUJwQixDQUFyQixFQUF3QixLQUFLQyxDQUE3QixFQUFnQyxHQUFoQyxFQUFxQyxRQUFyQyxFQUErQyxRQUEvQztBQUNEO0FBQ0RpQix1QkFBUUMsT0FBUixDQUFnQkUsUUFBaEIsQ0FBeUIsS0FBS3JCLENBQTlCLEVBQWlDLEtBQUtDLENBQXRDLEVBQXlDLGNBQVksS0FBS0ssV0FBMUQ7QUFDRDs7OztFQXJDMkJFLGtCIiwiZmlsZSI6IkhlbHBMaW5lLmpzIiwic291cmNlUm9vdCI6Ii9hcHAvc3JjL2NvbXBvbmVudHMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1VJQmFzZX0gZnJvbSBcIi4uL1VJRWxlbWVudHNcIlxuaW1wb3J0IHtEcmF3aW5nfSBmcm9tIFwiLi4vRHJhd2luZ1wiXG5pbXBvcnQge0Rpc3BsYXl9IGZyb20gXCIuLi9EaXNwbGF5XCJcblxuZXhwb3J0IGNsYXNzIEhlbHBMaW5lIGV4dGVuZHMgVUlCYXNlXG57XG4gIGNvbnN0cnVjdG9yKHgseSx3LGgpXG4gIHtcbiAgICBzdXBlcih4LHksdyxoKTtcbiAgICBIZWxwTGluZS5oZWxwID0gdGhpcztcbiAgICB0aGlzLmhlbHBFbGVtZW50cyA9IHt9O1xuICAgIHRoaXMuY3VycmVudFRleHQgPSBcIlwiO1xuICAgIGxldCB0ID0gdGhpcztcbiAgICBVSUJhc2UuaG92ZXJDYWxsYmFjayA9IChlKT0+e1xuICAgICAgdGhpcy51cGRhdGVDdXJyZW50SG92ZXJlZEVsZW1lbnQoZSk7XG4gICAgfVxuICB9XG4gIGFzc2lnbkhlbHBUZXh0KGVsZW1lbnQsIHRleHQpXG4gIHtcbiAgICB0aGlzLmhlbHBFbGVtZW50c1tlbGVtZW50LnVpZF0gPSB0ZXh0O1xuICB9XG4gIHVwZGF0ZUN1cnJlbnRIb3ZlcmVkRWxlbWVudChlbGVtZW50KVxuICB7XG4gICAgaWYodGhpcy5oZWxwRWxlbWVudHNbZWxlbWVudC51aWRdICE9IHVuZGVmaW5lZClcbiAgICB7XG4gICAgICB0aGlzLmN1cnJlbnRUZXh0ID0gdGhpcy5oZWxwRWxlbWVudHNbZWxlbWVudC51aWRdO1xuICAgIH1cbiAgICBlbHNlXG4gICAge1xuICAgICAgdGhpcy5jdXJyZW50VGV4dCA9IFwiXCI7XG4gICAgfVxuICAgIHRoaXMuc2V0RGlydHkoKTtcbiAgfVxuICByZW5kZXIoKVxuICB7XG4gICAgLy8gY2xlYXIgdGhlbiByZXJlbmRlciB0ZXh0XG4gICAgZm9yKGxldCB4ID0gdGhpcy54OyB4IDwgdGhpcy54K3RoaXMud2lkdGg7eCsrKVxuICAgIHtcbiAgICAgIERpc3BsYXkuZGlzcGxheS5kcmF3KHgsIHRoaXMueSwgXCIgXCIsIDB4MDAwMDAwLCAweDAwMDAwMCk7XG4gICAgfVxuICAgIERpc3BsYXkuZGlzcGxheS5kcmF3VGV4dCh0aGlzLngsIHRoaXMueSwgXCIlY3t3aGl0ZX1cIit0aGlzLmN1cnJlbnRUZXh0KTtcbiAgfVxufSJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "HelpLine.js"
      ],
      "names": [
        "HelpLine",
        "x",
        "y",
        "w",
        "h",
        "help",
        "helpElements",
        "currentText",
        "t",
        "UIBase",
        "hoverCallback",
        "e",
        "updateCurrentHoveredElement",
        "element",
        "text",
        "uid",
        "undefined",
        "setDirty",
        "width",
        "Display",
        "display",
        "draw",
        "drawText"
      ],
      "mappings": ";;;;;;;;;AAAA;;AACA;;AACA;;;;;;;;IAEaA,Q,WAAAA,Q;;;AAEX,oBAAYC,CAAZ,EAAcC,CAAd,EAAgBC,CAAhB,EAAkBC,CAAlB,EACA;AAAA;;AAAA,oHACQH,CADR,EACUC,CADV,EACYC,CADZ,EACcC,CADd;;AAEEJ,aAASK,IAAT;AACA,UAAKC,YAAL,GAAoB,EAApB;AACA,UAAKC,WAAL,GAAmB,EAAnB;AACA,QAAIC,SAAJ;AACAC,uBAAOC,aAAP,GAAuB,UAACC,CAAD,EAAK;AAC1B,YAAKC,2BAAL,CAAiCD,CAAjC;AACD,KAFD;AANF;AASC;;;;mCACcE,O,EAASC,I,EACxB;AACE,WAAKR,YAAL,CAAkBO,QAAQE,GAA1B,IAAiCD,IAAjC;AACD;;;gDAC2BD,O,EAC5B;AACE,UAAG,KAAKP,YAAL,CAAkBO,QAAQE,GAA1B,KAAkCC,SAArC,EACA;AACE,aAAKT,WAAL,GAAmB,KAAKD,YAAL,CAAkBO,QAAQE,GAA1B,CAAnB;AACD,OAHD,MAKA;AACE,aAAKR,WAAL,GAAmB,EAAnB;AACD;AACD,WAAKU,QAAL;AACD;;;6BAED;AACE;AACA,WAAI,IAAIhB,IAAI,KAAKA,CAAjB,EAAoBA,IAAI,KAAKA,CAAL,GAAO,KAAKiB,KAApC,EAA0CjB,GAA1C,EACA;AACEkB,yBAAQC,OAAR,CAAgBC,IAAhB,CAAqBpB,CAArB,EAAwB,KAAKC,CAA7B,EAAgC,GAAhC,EAAqC,QAArC,EAA+C,QAA/C;AACD;AACDiB,uBAAQC,OAAR,CAAgBE,QAAhB,CAAyB,KAAKrB,CAA9B,EAAiC,KAAKC,CAAtC,EAAyC,cAAY,KAAKK,WAA1D;AACD;;;;EArC2BE,kB",
      "file": "HelpLine.js",
      "sourceRoot": "/app/src/components",
      "sourcesContent": [
        "import {UIBase} from \"../UIElements\"\nimport {Drawing} from \"../Drawing\"\nimport {Display} from \"../Display\"\n\nexport class HelpLine extends UIBase\n{\n  constructor(x,y,w,h)\n  {\n    super(x,y,w,h);\n    HelpLine.help = this;\n    this.helpElements = {};\n    this.currentText = \"\";\n    let t = this;\n    UIBase.hoverCallback = (e)=>{\n      this.updateCurrentHoveredElement(e);\n    }\n  }\n  assignHelpText(element, text)\n  {\n    this.helpElements[element.uid] = text;\n  }\n  updateCurrentHoveredElement(element)\n  {\n    if(this.helpElements[element.uid] != undefined)\n    {\n      this.currentText = this.helpElements[element.uid];\n    }\n    else\n    {\n      this.currentText = \"\";\n    }\n    this.setDirty();\n  }\n  render()\n  {\n    // clear then rerender text\n    for(let x = this.x; x < this.x+this.width;x++)\n    {\n      Display.display.draw(x, this.y, \" \", 0x000000, 0x000000);\n    }\n    Display.display.drawText(this.x, this.y, \"%c{white}\"+this.currentText);\n  }\n}"
      ]
    },
    "mtime": 1546993729000
  },
  "{\"filename\":\"/app/src/components/Panel.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/src/components\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "inherits",
        "possibleConstructorReturn",
        "createClass",
        "classCallCheck",
        "interopRequireWildcard"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "../UIElements",
            "imported": [
              "UIBase"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "UIBase",
                "local": "UIBase"
              }
            ]
          },
          {
            "source": "../Drawing",
            "imported": [
              "Drawing"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Drawing",
                "local": "Drawing"
              }
            ]
          },
          {
            "source": "../DrawUtilities",
            "imported": [
              "*"
            ],
            "specifiers": [
              {
                "kind": "namespace",
                "local": "DrawUtilities"
              }
            ]
          },
          {
            "source": "../Display",
            "imported": [
              "Display"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Display",
                "local": "Display"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "Panel"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "Panel",
              "exported": "Panel"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/src/components/Panel.js",
      "filenameRelative": "/app/src/components/Panel.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "Panel.js",
      "sourceFileName": "Panel.js",
      "sourceRoot": "/app/src/components",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/src/components",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "Panel"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Panel = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _UIElements = require(\"../UIElements\");\n\nvar _Drawing = require(\"../Drawing\");\n\nvar _DrawUtilities = require(\"../DrawUtilities\");\n\nvar DrawUtilities = _interopRequireWildcard(_DrawUtilities);\n\nvar _Display = require(\"../Display\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Panel = exports.Panel = function (_UIBase) {\n  _inherits(Panel, _UIBase);\n\n  function Panel(title, x, y, w, h) {\n    _classCallCheck(this, Panel);\n\n    var _this = _possibleConstructorReturn(this, (Panel.__proto__ || Object.getPrototypeOf(Panel)).call(this, x, y, w, h));\n\n    _this.title = title;\n    return _this;\n  }\n\n  _createClass(Panel, [{\n    key: \"render\",\n    value: function render() {\n      DrawUtilities.drawSquare(this.x, this.y, this.width, this.height);\n      _Display.Display.display.drawText(this.x + 1, this.y, \"%c{white}\" + this.title);\n    }\n  }]);\n\n  return Panel;\n}(_UIElements.UIBase);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlBhbmVsLmpzIl0sIm5hbWVzIjpbIkRyYXdVdGlsaXRpZXMiLCJQYW5lbCIsInRpdGxlIiwieCIsInkiLCJ3IiwiaCIsImRyYXdTcXVhcmUiLCJ3aWR0aCIsImhlaWdodCIsIkRpc3BsYXkiLCJkaXNwbGF5IiwiZHJhd1RleHQiLCJVSUJhc2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztJQUFZQSxhOztBQUNaOzs7Ozs7Ozs7O0lBRWFDLEssV0FBQUEsSzs7O0FBRVgsaUJBQVlDLEtBQVosRUFBbUJDLENBQW5CLEVBQXFCQyxDQUFyQixFQUF1QkMsQ0FBdkIsRUFBeUJDLENBQXpCLEVBQ0E7QUFBQTs7QUFBQSw4R0FDUUgsQ0FEUixFQUNVQyxDQURWLEVBQ1lDLENBRFosRUFDY0MsQ0FEZDs7QUFFRSxVQUFLSixLQUFMLEdBQWFBLEtBQWI7QUFGRjtBQUdDOzs7OzZCQUVEO0FBQ0VGLG9CQUFjTyxVQUFkLENBQXlCLEtBQUtKLENBQTlCLEVBQWlDLEtBQUtDLENBQXRDLEVBQXlDLEtBQUtJLEtBQTlDLEVBQXFELEtBQUtDLE1BQTFEO0FBQ0FDLHVCQUFRQyxPQUFSLENBQWdCQyxRQUFoQixDQUF5QixLQUFLVCxDQUFMLEdBQU8sQ0FBaEMsRUFBbUMsS0FBS0MsQ0FBeEMsRUFBMkMsY0FBWSxLQUFLRixLQUE1RDtBQUNEOzs7O0VBWHdCVyxrQiIsImZpbGUiOiJQYW5lbC5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL3NyYy9jb21wb25lbnRzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtVSUJhc2V9IGZyb20gXCIuLi9VSUVsZW1lbnRzXCI7XG5pbXBvcnQge0RyYXdpbmd9IGZyb20gXCIuLi9EcmF3aW5nXCI7XG5pbXBvcnQgKiBhcyBEcmF3VXRpbGl0aWVzIGZyb20gXCIuLi9EcmF3VXRpbGl0aWVzXCJcbmltcG9ydCB7RGlzcGxheX0gZnJvbSBcIi4uL0Rpc3BsYXlcIlxuXG5leHBvcnQgY2xhc3MgUGFuZWwgZXh0ZW5kcyBVSUJhc2VcbntcbiAgY29uc3RydWN0b3IodGl0bGUsIHgseSx3LGgpXG4gIHtcbiAgICBzdXBlcih4LHksdyxoKTtcbiAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG4gIH1cbiAgcmVuZGVyKClcbiAge1xuICAgIERyYXdVdGlsaXRpZXMuZHJhd1NxdWFyZSh0aGlzLngsIHRoaXMueSwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuICAgIERpc3BsYXkuZGlzcGxheS5kcmF3VGV4dCh0aGlzLngrMSwgdGhpcy55LCBcIiVje3doaXRlfVwiK3RoaXMudGl0bGUpO1xuICB9XG5cbn0iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "Panel.js"
      ],
      "names": [
        "DrawUtilities",
        "Panel",
        "title",
        "x",
        "y",
        "w",
        "h",
        "drawSquare",
        "width",
        "height",
        "Display",
        "display",
        "drawText",
        "UIBase"
      ],
      "mappings": ";;;;;;;;;AAAA;;AACA;;AACA;;IAAYA,a;;AACZ;;;;;;;;;;IAEaC,K,WAAAA,K;;;AAEX,iBAAYC,KAAZ,EAAmBC,CAAnB,EAAqBC,CAArB,EAAuBC,CAAvB,EAAyBC,CAAzB,EACA;AAAA;;AAAA,8GACQH,CADR,EACUC,CADV,EACYC,CADZ,EACcC,CADd;;AAEE,UAAKJ,KAAL,GAAaA,KAAb;AAFF;AAGC;;;;6BAED;AACEF,oBAAcO,UAAd,CAAyB,KAAKJ,CAA9B,EAAiC,KAAKC,CAAtC,EAAyC,KAAKI,KAA9C,EAAqD,KAAKC,MAA1D;AACAC,uBAAQC,OAAR,CAAgBC,QAAhB,CAAyB,KAAKT,CAAL,GAAO,CAAhC,EAAmC,KAAKC,CAAxC,EAA2C,cAAY,KAAKF,KAA5D;AACD;;;;EAXwBW,kB",
      "file": "Panel.js",
      "sourceRoot": "/app/src/components",
      "sourcesContent": [
        "import {UIBase} from \"../UIElements\";\nimport {Drawing} from \"../Drawing\";\nimport * as DrawUtilities from \"../DrawUtilities\"\nimport {Display} from \"../Display\"\n\nexport class Panel extends UIBase\n{\n  constructor(title, x,y,w,h)\n  {\n    super(x,y,w,h);\n    this.title = title;\n  }\n  render()\n  {\n    DrawUtilities.drawSquare(this.x, this.y, this.width, this.height);\n    Display.display.drawText(this.x+1, this.y, \"%c{white}\"+this.title);\n  }\n\n}"
      ]
    },
    "mtime": 1546993729000
  },
  "{\"filename\":\"/app/src/DrawUtilities.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/src\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "./Display",
            "imported": [
              "Display"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Display",
                "local": "Display"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "drawSquare",
            "x",
            "y",
            "width",
            "height",
            "getSquareCells",
            "x",
            "y",
            "width",
            "height",
            "outline",
            "calculateLine",
            "x1",
            "y1",
            "x2",
            "y2"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "drawSquare",
              "exported": "drawSquare"
            },
            {
              "kind": "local",
              "local": "x",
              "exported": "x"
            },
            {
              "kind": "local",
              "local": "y",
              "exported": "y"
            },
            {
              "kind": "local",
              "local": "width",
              "exported": "width"
            },
            {
              "kind": "local",
              "local": "height",
              "exported": "height"
            },
            {
              "kind": "local",
              "local": "getSquareCells",
              "exported": "getSquareCells"
            },
            {
              "kind": "local",
              "local": "x",
              "exported": "x"
            },
            {
              "kind": "local",
              "local": "y",
              "exported": "y"
            },
            {
              "kind": "local",
              "local": "width",
              "exported": "width"
            },
            {
              "kind": "local",
              "local": "height",
              "exported": "height"
            },
            {
              "kind": "local",
              "local": "outline",
              "exported": "outline"
            },
            {
              "kind": "local",
              "local": "calculateLine",
              "exported": "calculateLine"
            },
            {
              "kind": "local",
              "local": "x1",
              "exported": "x1"
            },
            {
              "kind": "local",
              "local": "y1",
              "exported": "y1"
            },
            {
              "kind": "local",
              "local": "x2",
              "exported": "x2"
            },
            {
              "kind": "local",
              "local": "y2",
              "exported": "y2"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/src/DrawUtilities.js",
      "filenameRelative": "/app/src/DrawUtilities.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "DrawUtilities.js",
      "sourceFileName": "DrawUtilities.js",
      "sourceRoot": "/app/src",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/src",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "DrawUtilities"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.drawSquare = drawSquare;\nexports.getSquareCells = getSquareCells;\nexports.calculateLine = calculateLine;\n\nvar _Display = require(\"./Display\");\n\nvar d = function d() {\n  return _Display.Display.display;\n};\n\n// draws a ui outline square\nfunction drawSquare(x, y, width, height) {\n  var dirtyCells = [];\n  for (var _x = x + 1; _x < width + x; _x++) {\n    dirtyCells.push([_x, y]);\n    dirtyCells.push([_x, y + height]);\n    d().draw(_x, y, \"─\", \"white\", \"black\");\n    d().draw(_x, y + height, \"─\", \"white\", \"black\");\n  }\n\n  for (var _y = y + 1; _y < height + y; _y++) {\n    dirtyCells.push([x, _y]);\n    dirtyCells.push([x + width, _y]);\n    d().draw(x, _y, \"│\", \"white\", \"black\");\n    d().draw(x + width, _y, \"│\", \"white\", \"black\");\n  }\n  dirtyCells.push([x, y]);\n  dirtyCells.push([x, y + height]);\n  dirtyCells.push([x + width, y]);\n  dirtyCells.push([x + width, y + height]);\n  d().draw(x, y, \"┌\", \"white\", \"black\");\n  d().draw(x, y + height, \"└\", \"white\", \"black\");\n  d().draw(x + width, y, \"┐\", \"white\", \"black\");\n  d().draw(x + width, y + height, \"┘\", \"white\", \"black\");\n  return dirtyCells;\n}\n\nfunction getSquareCells(x, y, width, height, outline) {\n  var dirtyCells = [];\n  if (!outline) {\n    for (var _x = x; _x < x + width; _x++) {\n      for (var _y = y; _y < y + height; _y++) {\n        dirtyCells.push([_x, _y]);\n      }\n    }\n  } else {\n    for (var _x2 = x + 1; _x2 < width + x; _x2++) {\n      dirtyCells.push([_x2, y]);\n      dirtyCells.push([_x2, y + height]);\n    }\n\n    for (var _y2 = y + 1; _y2 < height + y; _y2++) {\n      dirtyCells.push([x, _y2]);\n      dirtyCells.push([x + width, _y2]);\n    }\n    dirtyCells.push([x, y]);\n    dirtyCells.push([x, y + height]);\n    dirtyCells.push([x + width, y]);\n    dirtyCells.push([x + width, y + height]);\n  }\n  return dirtyCells;\n}\n\n// from here: https://stackoverflow.com/questions/4672279/bresenham-algorithm-in-javascript\nfunction calculateLine(x1, y1, x2, y2) {\n  var coordinatesArray = new Array();\n  // Define differences and error check\n  var dx = Math.abs(x2 - x1);\n  var dy = Math.abs(y2 - y1);\n  var sx = x1 < x2 ? 1 : -1;\n  var sy = y1 < y2 ? 1 : -1;\n  var err = dx - dy;\n  // Set first coordinates\n  coordinatesArray.push([x1, y1]);\n  // Main loop\n  while (!(x1 == x2 && y1 == y2)) {\n    var e2 = err << 1;\n    if (e2 > -dy) {\n      err -= dy;\n      x1 += sx;\n    }\n    if (e2 < dx) {\n      err += dx;\n      y1 += sy;\n    }\n    // Set coordinates\n    coordinatesArray.push([x1, y1]);\n  }\n  // Return the result\n  return coordinatesArray;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkRyYXdVdGlsaXRpZXMuanMiXSwibmFtZXMiOlsiZHJhd1NxdWFyZSIsImdldFNxdWFyZUNlbGxzIiwiY2FsY3VsYXRlTGluZSIsImQiLCJEaXNwbGF5IiwiZGlzcGxheSIsIngiLCJ5Iiwid2lkdGgiLCJoZWlnaHQiLCJkaXJ0eUNlbGxzIiwiX3giLCJwdXNoIiwiZHJhdyIsIl95Iiwib3V0bGluZSIsIngxIiwieTEiLCJ4MiIsInkyIiwiY29vcmRpbmF0ZXNBcnJheSIsIkFycmF5IiwiZHgiLCJNYXRoIiwiYWJzIiwiZHkiLCJzeCIsInN5IiwiZXJyIiwiZTIiXSwibWFwcGluZ3MiOiI7Ozs7O1FBT2dCQSxVLEdBQUFBLFU7UUE2QkFDLGMsR0FBQUEsYztRQW1DQUMsYSxHQUFBQSxhOztBQXZFaEI7O0FBRUEsSUFBSUMsSUFBSSxTQUFKQSxDQUFJLEdBQUk7QUFDVixTQUFPQyxpQkFBUUMsT0FBZjtBQUNELENBRkQ7O0FBSUE7QUFDTyxTQUFTTCxVQUFULENBQW9CTSxDQUFwQixFQUFzQkMsQ0FBdEIsRUFBd0JDLEtBQXhCLEVBQThCQyxNQUE5QixFQUNQO0FBQ0UsTUFBSUMsYUFBYSxFQUFqQjtBQUNBLE9BQUksSUFBSUMsS0FBR0wsSUFBRSxDQUFiLEVBQWVLLEtBQUdILFFBQU1GLENBQXhCLEVBQTBCSyxJQUExQixFQUNBO0FBQ0VELGVBQVdFLElBQVgsQ0FBZ0IsQ0FBQ0QsRUFBRCxFQUFJSixDQUFKLENBQWhCO0FBQ0FHLGVBQVdFLElBQVgsQ0FBZ0IsQ0FBQ0QsRUFBRCxFQUFJSixJQUFFRSxNQUFOLENBQWhCO0FBQ0FOLFFBQUlVLElBQUosQ0FBU0YsRUFBVCxFQUFZSixDQUFaLEVBQWMsR0FBZCxFQUFrQixPQUFsQixFQUEwQixPQUExQjtBQUNBSixRQUFJVSxJQUFKLENBQVNGLEVBQVQsRUFBWUosSUFBRUUsTUFBZCxFQUFxQixHQUFyQixFQUF5QixPQUF6QixFQUFpQyxPQUFqQztBQUNEOztBQUVELE9BQUksSUFBSUssS0FBR1AsSUFBRSxD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LENBQWdCLENBQUNOLElBQUVFLEtBQUgsRUFBU0QsSUFBRUUsTUFBWCxDQUFoQjtBQUNEO0FBQ0QsU0FBT0MsVUFBUDtBQUNEOztBQUVEO0FBQ08sU0FBU1IsYUFBVCxDQUF3QmMsRUFBeEIsRUFBMkJDLEVBQTNCLEVBQStCQyxFQUEvQixFQUFrQ0MsRUFBbEMsRUFBc0M7QUFDM0MsTUFBSUMsbUJBQW1CLElBQUlDLEtBQUosRUFBdkI7QUFDQTtBQUNBLE1BQUlDLEtBQUtDLEtBQUtDLEdBQUwsQ0FBU04sS0FBS0YsRUFBZCxDQUFUO0FBQ0EsTUFBSVMsS0FBS0YsS0FBS0MsR0FBTCxDQUFTTCxLQUFLRixFQUFkLENBQVQ7QUFDQSxNQUFJUyxLQUFNVixLQUFLRSxFQUFOLEdBQVksQ0FBWixHQUFnQixDQUFDLENBQTFCO0FBQ0EsTUFBSVMsS0FBTVYsS0FBS0UsRUFBTixHQUFZLENBQVosR0FBZ0IsQ0FBQyxDQUExQjtBQUNBLE1BQUlTLE1BQU1OLEtBQUtHLEVBQWY7QUFDQTtBQUNBTCxtQkFBaUJSLElBQWpCLENBQXNCLENBQUNJLEVBQUQsRUFBS0MsRUFBTCxDQUF0QjtBQUNBO0FBQ0EsU0FBTyxFQUFHRCxNQUFNRSxFQUFQLElBQWVELE1BQU1FLEVBQXZCLENBQVAsRUFBb0M7QUFDbEMsUUFBSVUsS0FBS0QsT0FBTyxDQUFoQjtBQUNBLFFBQUlDLEtBQUssQ0FBQ0osRUFBVixFQUFjO0FBQ1pHLGFBQU9ILEVBQVA7QUFDQVQsWUFBTVUsRUFBTjtBQUNEO0FBQ0QsUUFBSUcsS0FBS1AsRUFBVCxFQUFhO0FBQ1hNLGFBQU9OLEVBQVA7QUFDQUwsWUFBTVUsRUFBTjtBQUNEO0FBQ0Q7QUFDQVAscUJBQWlCUixJQUFqQixDQUFzQixDQUFDSSxFQUFELEVBQUtDLEVBQUwsQ0FBdEI7QUFDRDtBQUNEO0FBQ0EsU0FBT0csZ0JBQVA7QUFDRCIsImZpbGUiOiJEcmF3VXRpbGl0aWVzLmpzIiwic291cmNlUm9vdCI6Ii9hcHAvc3JjIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtEaXNwbGF5fSBmcm9tIFwiLi9EaXNwbGF5XCJcblxubGV0IGQgPSAoKT0+e1xuICByZXR1cm4gRGlzcGxheS5kaXNwbGF5O1xufVxuXG4vLyBkcmF3cyBhIHVpIG91dGxpbmUgc3F1YXJlXG5leHBvcnQgZnVuY3Rpb24gZHJhd1NxdWFyZSh4LHksd2lkdGgsaGVpZ2h0KVxue1xuICBsZXQgZGlydHlDZWxscyA9IFtdO1xuICBmb3IobGV0IF94PXgrMTtfeDx3aWR0aCt4O194KyspXG4gIHtcbiAgICBkaXJ0eUNlbGxzLnB1c2goW194LHldKTtcbiAgICBkaXJ0eUNlbGxzLnB1c2goW194LHkraGVpZ2h0XSk7XG4gICAgZCgpLmRyYXcoX3gseSxcIuKUgFwiLFwid2hpdGVcIixcImJsYWNrXCIpO1xuICAgIGQoKS5kcmF3KF94LHkraGVpZ2h0LFwi4pSAXCIsXCJ3aGl0ZVwiLFwiYmxhY2tcIik7XG4gIH1cbiAgXG4gIGZvcihsZXQgX3k9eSsxO195PGhlaWdodCt5O195KyspXG4gIHtcbiAgICBkaXJ0eUNlbGxzLnB1c2goW3gsX3ldKTtcbiAgICBkaXJ0eUNlbGxzLnB1c2goW3grd2lkdGgsX3ldKTtcbiAgICBkKCkuZHJhdyh4LF95LFwi4pSCXCIsXCJ3aGl0ZVwiLFwiYmxhY2tcIik7XG4gICAgZCgpLmRyYXcoeCt3aWR0aCxfeSxcIuKUglwiLFwid2hpdGVcIixcImJsYWNrXCIpO1xuICB9XG4gIGRpcnR5Q2VsbHMucHVzaChbeCx5XSk7XG4gIGRpcnR5Q2VsbHMucHVzaChbeCx5K2hlaWdodF0pO1xuICBkaXJ0eUNlbGxzLnB1c2goW3grd2lkdGgseV0pO1xuICBkaXJ0eUNlbGxzLnB1c2goW3grd2lkdGgseStoZWlnaHRdKTtcbiAgZCgpLmRyYXcoeCx5LFwi4pSMXCIsXCJ3aGl0ZVwiLFwiYmxhY2tcIik7XG4gIGQoKS5kcmF3KHgseStoZWlnaHQsXCLilJRcIixcIndoaXRlXCIsXCJibGFja1wiKTtcbiAgZCgpLmRyYXcoeCt3aWR0aCx5LFwi4pSQXCIsXCJ3aGl0ZVwiLFwiYmxhY2tcIik7XG4gIGQoKS5kcmF3KHgrd2lkdGgseStoZWlnaHQsXCLilJhcIixcIndoaXRlXCIsXCJibGFja1wiKTtcbiAgcmV0dXJuIGRpcnR5Q2VsbHM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTcXVhcmVDZWxscyh4LHksd2lkdGgsaGVpZ2h0LG91dGxpbmUpXG57XG4gIGxldCBkaXJ0eUNlbGxzID0gW107XG4gIGlmKCFvdXRsaW5lKVxuICB7XG4gICAgZm9yKGxldCBfeD14O194PHgrd2lkdGg7X3grKylcbiAgICB7ICAgIFxuICAgICAgZm9yKGxldCBfeT15O195PHkraGVpZ2h0O195KyspXG4gICAgICB7XG4gICAgICAgIGRpcnR5Q2VsbHMucHVzaChbX3gsX3ldKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgZWxzZVxuICB7XG4gICAgZm9yKGxldCBfeD14KzE7X3g8d2lkdGgreDtfeCsrKVxuICAgIHtcbiAgICAgIGRpcnR5Q2VsbHMucHVzaChbX3gseV0pO1xuICAgICAgZGlydHlDZWxscy5wdXNoKFtfeCx5K2hlaWdodF0pO1xuICAgIH1cblxuICAgIGZvcihsZXQgX3k9eSsxO195PGhlaWdodCt5O195KyspXG4gICAge1xuICAgICAgZGlydHlDZWxscy5wdXNoKFt4LF95XSk7XG4gICAgICBkaXJ0eUNlbGxzLnB1c2goW3grd2lkdGgsX3ldKTtcbiAgICB9XG4gICAgZGlydHlDZWxscy5wdXNoKFt4LHldKTtcbiAgICBkaXJ0eUNlbGxzLnB1c2goW3gseStoZWlnaHRdKTtcbiAgICBkaXJ0eUNlbGxzLnB1c2goW3grd2lkdGgseV0pO1xuICAgIGRpcnR5Q2VsbHMucHVzaChbeCt3aWR0aCx5K2hlaWdodF0pO1xuICB9XG4gIHJldHVybiBkaXJ0eUNlbGxzO1xufVxuXG4vLyBmcm9tIGhlcmU6IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzQ2NzIyNzkvYnJlc2VuaGFtLWFsZ29yaXRobS1pbi1qYXZhc2NyaXB0XG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlTGluZSAoeDEseTEsIHgyLHkyKSB7XG4gIHZhciBjb29yZGluYXRlc0FycmF5ID0gbmV3IEFycmF5KCk7XG4gIC8vIERlZmluZSBkaWZmZXJlbmNlcyBhbmQgZXJyb3IgY2hlY2tcbiAgdmFyIGR4ID0gTWF0aC5hYnMoeDIgLSB4MSk7XG4gIHZhciBkeSA9IE1hdGguYWJzKHkyIC0geTEpO1xuICB2YXIgc3ggPSAoeDEgPCB4MikgPyAxIDogLTE7XG4gIHZhciBzeSA9ICh5MSA8IHkyKSA/IDEgOiAtMTtcbiAgdmFyIGVyciA9IGR4IC0gZHk7XG4gIC8vIFNldCBmaXJzdCBjb29yZGluYXRlc1xuICBjb29yZGluYXRlc0FycmF5LnB1c2goW3gxLCB5MV0pO1xuICAvLyBNYWluIGxvb3BcbiAgd2hpbGUgKCEoKHgxID09IHgyKSAmJiAoeTEgPT0geTIpKSkge1xuICAgIHZhciBlMiA9IGVyciA8PCAxO1xuICAgIGlmIChlMiA+IC1keSkge1xuICAgICAgZXJyIC09IGR5O1xuICAgICAgeDEgKz0gc3g7XG4gICAgfVxuICAgIGlmIChlMiA8IGR4KSB7XG4gICAgICBlcnIgKz0gZHg7XG4gICAgICB5MSArPSBzeTtcbiAgICB9XG4gICAgLy8gU2V0IGNvb3JkaW5hdGVzXG4gICAgY29vcmRpbmF0ZXNBcnJheS5wdXNoKFt4MSwgeTFdKTtcbiAgfVxuICAvLyBSZXR1cm4gdGhlIHJlc3VsdFxuICByZXR1cm4gY29vcmRpbmF0ZXNBcnJheTtcbn0iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "DrawUtilities.js"
      ],
      "names": [
        "drawSquare",
        "getSquareCells",
        "calculateLine",
        "d",
        "Display",
        "display",
        "x",
        "y",
        "width",
        "height",
        "dirtyCells",
        "_x",
        "push",
        "draw",
        "_y",
        "outline",
        "x1",
        "y1",
        "x2",
        "y2",
        "coordinatesArray",
        "Array",
        "dx",
        "Math",
        "abs",
        "dy",
        "sx",
        "sy",
        "err",
        "e2"
      ],
      "mappings": "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",
      "file": "DrawUtilities.js",
      "sourceRoot": "/app/src",
      "sourcesContent": [
        "import {Display} from \"./Display\"\n\nlet d = ()=>{\n  return Display.display;\n}\n\n// draws a ui outline square\nexport function drawSquare(x,y,width,height)\n{\n  let dirtyCells = [];\n  for(let _x=x+1;_x<width+x;_x++)\n  {\n    dirtyCells.push([_x,y]);\n    dirtyCells.push([_x,y+height]);\n    d().draw(_x,y,\"─\",\"white\",\"black\");\n    d().draw(_x,y+height,\"─\",\"white\",\"black\");\n  }\n  \n  for(let _y=y+1;_y<height+y;_y++)\n  {\n    dirtyCells.push([x,_y]);\n    dirtyCells.push([x+width,_y]);\n    d().draw(x,_y,\"│\",\"white\",\"black\");\n    d().draw(x+width,_y,\"│\",\"white\",\"black\");\n  }\n  dirtyCells.push([x,y]);\n  dirtyCells.push([x,y+height]);\n  dirtyCells.push([x+width,y]);\n  dirtyCells.push([x+width,y+height]);\n  d().draw(x,y,\"┌\",\"white\",\"black\");\n  d().draw(x,y+height,\"└\",\"white\",\"black\");\n  d().draw(x+width,y,\"┐\",\"white\",\"black\");\n  d().draw(x+width,y+height,\"┘\",\"white\",\"black\");\n  return dirtyCells;\n}\n\nexport function getSquareCells(x,y,width,height,outline)\n{\n  let dirtyCells = [];\n  if(!outline)\n  {\n    for(let _x=x;_x<x+width;_x++)\n    {    \n      for(let _y=y;_y<y+height;_y++)\n      {\n        dirtyCells.push([_x,_y]);\n      }\n    }\n  }\n  else\n  {\n    for(let _x=x+1;_x<width+x;_x++)\n    {\n      dirtyCells.push([_x,y]);\n      dirtyCells.push([_x,y+height]);\n    }\n\n    for(let _y=y+1;_y<height+y;_y++)\n    {\n      dirtyCells.push([x,_y]);\n      dirtyCells.push([x+width,_y]);\n    }\n    dirtyCells.push([x,y]);\n    dirtyCells.push([x,y+height]);\n    dirtyCells.push([x+width,y]);\n    dirtyCells.push([x+width,y+height]);\n  }\n  return dirtyCells;\n}\n\n// from here: https://stackoverflow.com/questions/4672279/bresenham-algorithm-in-javascript\nexport function calculateLine (x1,y1, x2,y2) {\n  var coordinatesArray = new Array();\n  // Define differences and error check\n  var dx = Math.abs(x2 - x1);\n  var dy = Math.abs(y2 - y1);\n  var sx = (x1 < x2) ? 1 : -1;\n  var sy = (y1 < y2) ? 1 : -1;\n  var err = dx - dy;\n  // Set first coordinates\n  coordinatesArray.push([x1, y1]);\n  // Main loop\n  while (!((x1 == x2) && (y1 == y2))) {\n    var e2 = err << 1;\n    if (e2 > -dy) {\n      err -= dy;\n      x1 += sx;\n    }\n    if (e2 < dx) {\n      err += dx;\n      y1 += sy;\n    }\n    // Set coordinates\n    coordinatesArray.push([x1, y1]);\n  }\n  // Return the result\n  return coordinatesArray;\n}"
      ]
    },
    "mtime": 1546993729000
  },
  "{\"filename\":\"/app/src/components/ColorButton.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/src/components\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "inherits",
        "possibleConstructorReturn",
        "classCallCheck",
        "createClass"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "../UIElements",
            "imported": [
              "UIBase"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "UIBase",
                "local": "UIBase"
              }
            ]
          },
          {
            "source": "../Drawing",
            "imported": [
              "Drawing"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Drawing",
                "local": "Drawing"
              }
            ]
          },
          {
            "source": "../Display",
            "imported": [
              "Display"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Display",
                "local": "Display"
              }
            ]
          },
          {
            "source": "./HelpLine",
            "imported": [
              "HelpLine"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "HelpLine",
                "local": "HelpLine"
              }
            ]
          },
          {
            "source": "./Panel",
            "imported": [
              "Panel"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Panel",
                "local": "Panel"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "ColorPanel",
            "ColorButton"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "ColorPanel",
              "exported": "ColorPanel"
            },
            {
              "kind": "local",
              "local": "ColorButton",
              "exported": "ColorButton"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/src/components/ColorButton.js",
      "filenameRelative": "/app/src/components/ColorButton.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "ColorButton.js",
      "sourceFileName": "ColorButton.js",
      "sourceRoot": "/app/src/components",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/src/components",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "ColorButton"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ColorButton = exports.ColorPanel = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _UIElements = require(\"../UIElements\");\n\nvar _Drawing = require(\"../Drawing\");\n\nvar _Display = require(\"../Display\");\n\nvar _HelpLine = require(\"./HelpLine\");\n\nvar _Panel2 = require(\"./Panel\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar baseColors = require('../baseColors.json').colors;\n\nvar lastBGButton;\nvar lastFGButton;\n\nvar colorButtons = [];\n\nvar ColorPanel = exports.ColorPanel = function (_Panel) {\n  _inherits(ColorPanel, _Panel);\n\n  function ColorPanel(x, y) {\n    _classCallCheck(this, ColorPanel);\n\n    var _this = _possibleConstructorReturn(this, (ColorPanel.__proto__ || Object.getPrototypeOf(ColorPanel)).call(this, \"Color\", x, y, 17, 13));\n    // currently this is hardcoded\n    // eventually will switch to a width + height defined by the character set file\n\n\n    for (var _x = 0; _x < 16; _x++) {\n      for (var _y = 0; _y < 12; _y++) {\n        var bColor = baseColors[_x + _y * 16];\n        var c = bColor[0] & 0xff | (bColor[1] & 0xff) << 8 | (bColor[2] & 0xff) << 16 | 0xff < 24;\n        var cb = new ColorButton(_this.x + _x + 1, _this.y + _y + 1, 1, 1, bColor);\n        colorButtons.push(cb);\n        _this.addChild(cb);\n      }\n    }\n    return _this;\n  }\n\n  return ColorPanel;\n}(_Panel2.Panel);\n\nvar ColorButton = exports.ColorButton = function (_UIBase) {\n  _inherits(ColorButton, _UIBase);\n\n  function ColorButton(x, y, w, h, color) {\n    _classCallCheck(this, ColorButton);\n\n    var _this2 = _possibleConstructorReturn(this, (ColorButton.__proto__ || Object.getPrototypeOf(ColorButton)).call(this, x, y, w, h));\n\n    _this2.color = color;\n    var colorArray = _this2.color;\n    var avgColor = (colorArray[0] + colorArray[1] + colorArray[2]) / 3;\n    _this2.textColor = avgColor < 128 ? \"white\" : \"black\";\n    colorButtons.push(_this2);\n    _HelpLine.HelpLine.help.assignHelpText(_this2, \"left click to set foreground / right click to set background\");\n    return _this2;\n  }\n\n  _createClass(ColorButton, [{\n    key: \"pointerOver\",\n    value: function pointerOver(x, y) {\n      this.over = true;\n      this.setDirty();\n    }\n  }, {\n    key: \"pointerOut\",\n    value: function pointerOut() {\n      this.over = false;\n      this.setDirty();\n    }\n  }, {\n    key: \"press\",\n    value: function press(buttonId) {\n      colorButtons.forEach(function (b) {\n        b.setDirty();\n      });\n      if (buttonId == 0) {\n        if (lastFGButton != undefined) {\n          lastFGButton.setDirty();\n        }\n        lastFGButton = this;\n        _Drawing.Drawing.currentDrawing.currentFG = this.color;\n      } else if (buttonId == 1) {\n        if (lastBGButton != undefined) {\n          lastBGButton.setDirty();\n        }\n        lastBGButton = this;\n        _Drawing.Drawing.currentDrawing.currentBG = this.color;\n      }\n      this.setDirty();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var t = \" \";\n      if (this.over) t = \"°\";\n      var c = _Display.Display.convertColor(this.color);\n      var cfg = _Display.Display.convertColor(_Drawing.Drawing.currentDrawing.currentFG);\n      var cbg = _Display.Display.convertColor(_Drawing.Drawing.currentDrawing.currentBG);\n      if (cfg == c) t = \"f\";\n      if (cbg == c) t = \"b\";\n      if (cfg == c && cbg == c) t = \"x\";\n      _Display.Display.display.draw(this.x, this.y, t, this.textColor, this.color);\n    }\n  }]);\n\n  return ColorButton;\n}(_UIElements.UIBase);\n\nColorButton.updateAll = function () {\n  colorButtons.forEach(function (b) {\n    b.setDirty();\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbG9yQnV0dG9uLmpzIl0sIm5hbWVzIjpbImJhc2VDb2xvcnMiLCJyZXF1aXJlIiwiY29sb3JzIiwibGFzdEJHQnV0dG9uIiwibGFzdEZHQnV0dG9uIiwiY29sb3JCdXR0b25zIiwiQ29sb3JQYW5lbCIsIngiLCJ5IiwiYkNvbG9yIiwiYyIsImNiIiwiQ29sb3JCdXR0b24iLCJwdXNoIiwiYWRkQ2hpbGQiLCJQYW5lbCIsInciLCJoIiwiY29sb3IiLCJjb2xvckFycmF5IiwiYXZnQ29sb3IiLCJ0ZXh0Q29sb3IiLCJIZWxwTGluZSIsImhlbHAiLCJhc3NpZ25IZWxwVGV4dCIsIm92ZXIiLCJzZXREaXJ0eSIsImJ1dHRvbklkIiwiZm9yRWFjaCIsImIiLCJ1bmRlZmluZWQiLCJEcmF3aW5nIiwiY3VycmVudERyYXdpbmciLCJjdXJyZW50RkciLCJjdXJyZW50QkciLCJ0IiwiRGlzcGxheSIsImNvbnZlcnRDb2xvciIsImNmZyIsImNiZyIsImRpc3BsYXkiLCJkcmF3IiwiVUlCYXNlIiwidXBkYXRlQWxsIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7QUFDQSxJQUFNQSxhQUFhQyxRQUFRLG9CQUFSLEVBQThCQyxNQUFqRDs7QUFFQSxJQUFJQyxZQUFKO0FBQ0EsSUFBSUMsWUFBSjs7QUFFQSxJQUFJQyxlQUFlLEVBQW5COztJQUNhQyxVLFdBQUFBLFU7OztBQUVYLHNCQUFZQyxDQUFaLEVBQWNDLENBQWQsRUFDQTtBQUFBOztBQUFBLHdIQUdRLE9BSFIsRUFHaUJELENBSGpCLEVBR21CQyxDQUhuQixFQUdxQixFQUhyQixFQUd3QixFQUh4QjtBQUNFO0FBQ0E7OztBQUVBLFNBQUssSUFBSUQsS0FBSSxDQUFiLEVBQWdCQSxLQUFJLEVBQXBCLEVBQXdCQSxJQUF4QixFQUNBO0FBQ0UsV0FBSSxJQUFJQyxLQUFJLENBQVosRUFBZUEsS0FBSSxFQUFuQixFQUF1QkEsSUFBdkIsRUFDQTtBQUNFLFlB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Q0FBZ0JDLElBQWhCLENBQXFCLEtBQUtsQyxDQUExQixFQUE2QixLQUFLQyxDQUFsQyxFQUFvQzJCLENBQXBDLEVBQXNDLEtBQUtkLFNBQTNDLEVBQXNELEtBQUtILEtBQTNEO0FBQ0Q7Ozs7RUF6RDhCd0Isa0I7O0FBMkRqQzlCLFlBQVkrQixTQUFaLEdBQXdCLFlBQU07QUFDNUJ0QyxlQUFhdUIsT0FBYixDQUFxQixhQUFHO0FBQ3RCQyxNQUFFSCxRQUFGO0FBQ0QsR0FGRDtBQUdELENBSkQiLCJmaWxlIjoiQ29sb3JCdXR0b24uanMiLCJzb3VyY2VSb290IjoiL2FwcC9zcmMvY29tcG9uZW50cyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7VUlCYXNlfSBmcm9tIFwiLi4vVUlFbGVtZW50c1wiXG5pbXBvcnQge0RyYXdpbmd9IGZyb20gXCIuLi9EcmF3aW5nXCJcbmltcG9ydCB7RGlzcGxheX0gZnJvbSBcIi4uL0Rpc3BsYXlcIlxuaW1wb3J0IHtIZWxwTGluZX0gZnJvbSBcIi4vSGVscExpbmVcIlxuaW1wb3J0IHtQYW5lbH0gZnJvbSBcIi4vUGFuZWxcIlxuY29uc3QgYmFzZUNvbG9ycyA9IHJlcXVpcmUoJy4uL2Jhc2VDb2xvcnMuanNvbicpLmNvbG9ycztcblxudmFyIGxhc3RCR0J1dHRvbjtcbnZhciBsYXN0RkdCdXR0b247XG5cbnZhciBjb2xvckJ1dHRvbnMgPSBbXTtcbmV4cG9ydCBjbGFzcyBDb2xvclBhbmVsIGV4dGVuZHMgUGFuZWxcbntcbiAgY29uc3RydWN0b3IoeCx5KVxuICB7XG4gICAgLy8gY3VycmVudGx5IHRoaXMgaXMgaGFyZGNvZGVkXG4gICAgLy8gZXZlbnR1YWxseSB3aWxsIHN3aXRjaCB0byBhIHdpZHRoICsgaGVpZ2h0IGRlZmluZWQgYnkgdGhlIGNoYXJhY3RlciBzZXQgZmlsZVxuICAgIHN1cGVyKFwiQ29sb3JcIiwgeCx5LDE3LDEzKTtcbiAgICBmb3IgKGxldCB4ID0gMDsgeCA8IDE2OyB4KyspXG4gICAge1xuICAgICAgZm9yKGxldCB5ID0gMDsgeSA8IDEyOyB5KyspXG4gICAgICB7XG4gICAgICAgIGxldCBiQ29sb3IgPSBiYXNlQ29sb3JzW3greSoxNl07XG4gICAgICAgIGxldCBjID0gKGJDb2xvclswXSYweGZmKVxuICAgICAgICAgICAgfCAoYkNvbG9yWzFdJjB4ZmYpPDw4XG4gICAgICAgICAgICB8IChiQ29sb3JbMl0mMHhmZik8PDE2XG4gICAgICAgICAgICB8IDB4ZmYgPCAyNDtcbiAgICAgICAgbGV0IGNiID0gbmV3IENvbG9yQnV0dG9uKHRoaXMueCt4KzEsdGhpcy55K3krMSwxLDEsIGJDb2xvcik7XG4gICAgICAgIGNvbG9yQnV0dG9ucy5wdXNoKGNiKTtcbiAgICAgICAgdGhpcy5hZGRDaGlsZChjYik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5leHBvcnQgY2xhc3MgQ29sb3JCdXR0b24gZXh0ZW5kcyBVSUJhc2VcbntcbiAgY29uc3RydWN0b3IoeCx5LHcsaCxjb2xvcilcbiAge1xuICAgIHN1cGVyKHgseSx3LGgpO1xuICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcbiAgICBsZXQgY29sb3JBcnJheSA9IHRoaXMuY29sb3I7XG4gICAgbGV0IGF2Z0NvbG9yID0gKGNvbG9yQXJyYXlbMF0rY29sb3JBcnJheVsxXStjb2xvckFycmF5WzJdKS8zO1xuICAgIHRoaXMudGV4dENvbG9yID0gYXZnQ29sb3I8MTI4P1wid2hpdGVcIjpcImJsYWNrXCI7XG4gICAgY29sb3JCdXR0b25zLnB1c2godGhpcyk7XG4gICAgSGVscExpbmUuaGVscC5hc3NpZ25IZWxwVGV4dCh0aGlzLCBcImxlZnQgY2xpY2sgdG8gc2V0IGZvcmVncm91bmQgLyByaWdodCBjbGljayB0byBzZXQgYmFja2dyb3VuZFwiKTtcbiAgfVxuICBwb2ludGVyT3Zlcih4LHkpXG4gIHtcbiAgICB0aGlzLm92ZXIgPSB0cnVlO1xuICAgIHRoaXMuc2V0RGlydHkoKTtcbiAgfVxuICBwb2ludGVyT3V0KClcbiAge1xuICAgIHRoaXMub3ZlciA9IGZhbHNlO1xuICAgIHRoaXMuc2V0RGlydHkoKTtcbiAgfVxuXG4gIHByZXNzKGJ1dHRvbklkKVxuICB7XG4gICAgY29sb3JCdXR0b25zLmZvckVhY2goKGIpPT57Yi5zZXREaXJ0eSgpO30pO1xuICAgIGlmKGJ1dHRvbklkID09IDApXG4gICAge1xuICAgICAgaWYobGFzdEZHQnV0dG9uICE9IHVuZGVmaW5lZClcbiAgICAgIHtcbiAgICAgICAgbGFzdEZHQnV0dG9uLnNldERpcnR5KCk7XG4gICAgICB9XG4gICAgICBsYXN0RkdCdXR0b24gPSB0aGlzO1xuICAgICAgRHJhd2luZy5jdXJyZW50RHJhd2luZy5jdXJyZW50RkcgPSB0aGlzLmNvbG9yO1xuICAgIH1cbiAgICBlbHNlIGlmKGJ1dHRvbklkID09IDEpXG4gICAge1xuICAgICAgaWYobGFzdEJHQnV0dG9uICE9IHVuZGVmaW5lZClcbiAgICAgIHtcbiAgICAgICAgbGFzdEJHQnV0dG9uLnNldERpcnR5KCk7XG4gICAgICB9XG4gICAgICBsYXN0QkdCdXR0b24gPSB0aGlzO1xuICAgICAgRHJhd2luZy5jdXJyZW50RHJhd2luZy5jdXJyZW50QkcgPSB0aGlzLmNvbG9yO1xuICAgIH1cbiAgICB0aGlzLnNldERpcnR5KCk7XG4gIH1cbiAgcmVuZGVyKClcbiAge1xuICAgIGxldCB0ID0gXCIgXCI7XG4gICAgaWYodGhpcy5vdmVyKSB0ID0gXCLCsFwiO1xuICAgIGxldCBjID0gRGlzcGxheS5jb252ZXJ0Q29sb3IodGhpcy5jb2xvcik7XG4gICAgbGV0IGNmZyA9IERpc3BsYXkuY29udmVydENvbG9yKERyYXdpbmcuY3VycmVudERyYXdpbmcuY3VycmVudEZHKTtcbiAgICBsZXQgY2JnID0gRGlzcGxheS5jb252ZXJ0Q29sb3IoRHJhd2luZy5jdXJyZW50RHJhd2luZy5jdXJyZW50QkcpO1xuICAgIGlmKGNmZyA9PSBjKSB0ID0gXCJmXCI7XG4gICAgaWYoY2JnID09IGMpIHQgPSBcImJcIjtcbiAgICBpZihjZmcgPT0gYyAmJiBjYmcgPT0gYykgdCA9IFwieFwiO1xuICAgIERpc3BsYXkuZGlzcGxheS5kcmF3KHRoaXMueCwgdGhpcy55LHQsdGhpcy50ZXh0Q29sb3IsIHRoaXMuY29sb3IpO1xuICB9XG59XG5Db2xvckJ1dHRvbi51cGRhdGVBbGwgPSAoKSA9PiB7XG4gIGNvbG9yQnV0dG9ucy5mb3JFYWNoKGI9PntcbiAgICBiLnNldERpcnR5KCk7XG4gIH0pO1xufSJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "ColorButton.js"
      ],
      "names": [
        "baseColors",
        "require",
        "colors",
        "lastBGButton",
        "lastFGButton",
        "colorButtons",
        "ColorPanel",
        "x",
        "y",
        "bColor",
        "c",
        "cb",
        "ColorButton",
        "push",
        "addChild",
        "Panel",
        "w",
        "h",
        "color",
        "colorArray",
        "avgColor",
        "textColor",
        "HelpLine",
        "help",
        "assignHelpText",
        "over",
        "setDirty",
        "buttonId",
        "forEach",
        "b",
        "undefined",
        "Drawing",
        "currentDrawing",
        "currentFG",
        "currentBG",
        "t",
        "Display",
        "convertColor",
        "cfg",
        "cbg",
        "display",
        "draw",
        "UIBase",
        "updateAll"
      ],
      "mappings": "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",
      "file": "ColorButton.js",
      "sourceRoot": "/app/src/components",
      "sourcesContent": [
        "import {UIBase} from \"../UIElements\"\nimport {Drawing} from \"../Drawing\"\nimport {Display} from \"../Display\"\nimport {HelpLine} from \"./HelpLine\"\nimport {Panel} from \"./Panel\"\nconst baseColors = require('../baseColors.json').colors;\n\nvar lastBGButton;\nvar lastFGButton;\n\nvar colorButtons = [];\nexport class ColorPanel extends Panel\n{\n  constructor(x,y)\n  {\n    // currently this is hardcoded\n    // eventually will switch to a width + height defined by the character set file\n    super(\"Color\", x,y,17,13);\n    for (let x = 0; x < 16; x++)\n    {\n      for(let y = 0; y < 12; y++)\n      {\n        let bColor = baseColors[x+y*16];\n        let c = (bColor[0]&0xff)\n            | (bColor[1]&0xff)<<8\n            | (bColor[2]&0xff)<<16\n            | 0xff < 24;\n        let cb = new ColorButton(this.x+x+1,this.y+y+1,1,1, bColor);\n        colorButtons.push(cb);\n        this.addChild(cb);\n      }\n    }\n  }\n}\nexport class ColorButton extends UIBase\n{\n  constructor(x,y,w,h,color)\n  {\n    super(x,y,w,h);\n    this.color = color;\n    let colorArray = this.color;\n    let avgColor = (colorArray[0]+colorArray[1]+colorArray[2])/3;\n    this.textColor = avgColor<128?\"white\":\"black\";\n    colorButtons.push(this);\n    HelpLine.help.assignHelpText(this, \"left click to set foreground / right click to set background\");\n  }\n  pointerOver(x,y)\n  {\n    this.over = true;\n    this.setDirty();\n  }\n  pointerOut()\n  {\n    this.over = false;\n    this.setDirty();\n  }\n\n  press(buttonId)\n  {\n    colorButtons.forEach((b)=>{b.setDirty();});\n    if(buttonId == 0)\n    {\n      if(lastFGButton != undefined)\n      {\n        lastFGButton.setDirty();\n      }\n      lastFGButton = this;\n      Drawing.currentDrawing.currentFG = this.color;\n    }\n    else if(buttonId == 1)\n    {\n      if(lastBGButton != undefined)\n      {\n        lastBGButton.setDirty();\n      }\n      lastBGButton = this;\n      Drawing.currentDrawing.currentBG = this.color;\n    }\n    this.setDirty();\n  }\n  render()\n  {\n    let t = \" \";\n    if(this.over) t = \"°\";\n    let c = Display.convertColor(this.color);\n    let cfg = Display.convertColor(Drawing.currentDrawing.currentFG);\n    let cbg = Display.convertColor(Drawing.currentDrawing.currentBG);\n    if(cfg == c) t = \"f\";\n    if(cbg == c) t = \"b\";\n    if(cfg == c && cbg == c) t = \"x\";\n    Display.display.draw(this.x, this.y,t,this.textColor, this.color);\n  }\n}\nColorButton.updateAll = () => {\n  colorButtons.forEach(b=>{\n    b.setDirty();\n  });\n}"
      ]
    },
    "mtime": 1546993729000
  },
  "{\"filename\":\"/app/src/RexPaintCodec.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],{\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}],[[],{\"spec\":false,\"loose\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/src\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [
        "createClass",
        "classCallCheck",
        "interopRequireWildcard"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "zlib",
            "imported": [
              "*"
            ],
            "specifiers": [
              {
                "kind": "namespace",
                "local": "zlib"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "RexPaintCodec"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "RexPaintCodec",
              "exported": "RexPaintCodec"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/src/RexPaintCodec.js",
      "filenameRelative": "/app/src/RexPaintCodec.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ],
        [
          [],
          {
            "spec": false,
            "loose": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "RexPaintCodec.js",
      "sourceFileName": "RexPaintCodec.js",
      "sourceRoot": "/app/src",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/src",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "RexPaintCodec"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RexPaintCodec = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _zlib = require(\"zlib\");\n\nvar zlib = _interopRequireWildcard(_zlib);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/*\n#-----xp format version (32)\nA-----number of layers (32)\n /----image width (32)\n |    image height (32)\n |  /-ASCII code (32) (little-endian!)\nB|  | foreground color red (8)\n |  | foreground color green (8)\n |  | foreground color blue (8)\n | C| background color red (8)\n |  | background color green (8)\n \\--\\-background color blue (8)\n The file begins with the internal .xp format version number, You can ignore this value, as it is only used by REXPaint itself (in case future changes to the format are required). Note that because pre-R9 versions of REXPaint did not include an .xp version number, it's actually stored as a negative value to differentiate old image files (which begin with a positive layer count) in order to detect and automatically update them.\n\tThe actual image data begins with A, the number of image layers (always a number from 1 to 9 in the current version), followed by a section B for each layer (the image width/height is stored for every layer due to the method of serialization used, but will always be the same values for every layer). Section C is then repeated for each cell in the image, storing the image's 2D matrix in 1D array format. I.e., the length of that matrix would equal width*height, and if you need them you can get the x-value with \"index/height\", and y-value with \"index%height\" (my own matrix class stores its data in a 1D array so I just read all the cells straight in). Note that this means the image data happens to be stored in column-major order!\n\tOne thing to remember about directly reading .xp files is that undrawn (empty) cells on any layer (even the base layer) are considered transparent, which is identified by the background color 255,0,255. Thus to rebuild the image as seen in REXPaint, always first test a cell's background color and skip drawing those cells which are transparent, while converting any visible (i.e., non-covered) transparent cells on the lowest layer to black.\n*/\nvar codePage437 = require('./codePage437.json');\n// reverse the encoding\nvar decodeTable = {};\nvar count = 0;\ncodePage437.characters.forEach(function (e) {\n  decodeTable[e] = count++;\n});\n\nvar RexPaintCodec = exports.RexPaintCodec = function () {\n  function RexPaintCodec() {\n    _classCallCheck(this, RexPaintCodec);\n\n    this.layers = [];\n    // currently these are stored for the total drawing, rather than per layer\n    // but they need to be stored in each layer.\n    this.width = 0;\n    this.height = 0;\n  }\n\n  _createClass(RexPaintCodec, [{\n    key: \"encode\",\n    value: function encode() {\n      // calculate the length of the buffer we need\n      // these are all in bytes, where above they are given in bits\n      // 4+4+(4+4+4*width*height+24*width*height+24*width*height)*nLayers\n      var numLayers = this.layers.length;\n      var layerLength = this.width * this.height;\n      var buffer = new ArrayBuffer(4 + 4 + (4 + 4 + 4 * layerLength + 24 * layerLength + 24 * layerLength) * numLayers);\n      var Uint8View = new Uint8Array(buffer);\n      var Uint32View = new Uint32Array(buffer, 0, 4);\n      var offset = 0;\n      // store the preamble\n      // need to look up the actual number here\n      Uint32View[offset / 4] = 9;\n      offset += 4;\n      Uint32View[offset / 4] = numLayers;\n      offset += 4;\n      for (var l = 0; l < numLayers; l++) {\n        // store the layer preamble\n        Uint8View[offset] = this.width;\n        offset += 4;\n        Uint8View[offset] = this.height;\n        offset += 4;\n        // start storing the actual layer data\n        for (var x = 0; x < this.width; x++) {\n          for (var y = 0; y < this.height; y++) {\n            // might need to force the endian ness of this data at some point\n            // my system stores in row major, this gets converted to column major for rexpaint\n\n            // need to fix the character encoding here\n            // if there are every more than 0xff characters, then this is gonna blow up :(\n            var c = decodeTable[this.layers[l][x + y * this.width].char];\n            Uint8View[offset] = c;\n\n            var correctOffset = offset / 4;\n            offset += 4;\n            // store the foreground and background colors\n            // fg, r, g, b\n            // this makes sure that we aren't trying to push a 32 bit number into a 24 bit space\n            Uint8View[offset++] = this.layers[l][x + y * this.width].fgColor >>> 0 & 0xFF;\n            Uint8View[offset++] = this.layers[l][x + y * this.width].fgColor >>> 8 & 0xFF;\n            Uint8View[offset++] = this.layers[l][x + y * this.width].fgColor >>> 16 & 0xFF;\n            // bg, r, g, b\n            Uint8View[offset++] = this.layers[l][x + y * this.width].bgColor >>> 0 & 0xFF;\n            Uint8View[offset++] = this.layers[l][x + y * this.width].bgColor >>> 8 & 0xFF;\n            Uint8View[offset++] = this.layers[l][x + y * this.width].bgColor >>> 16 & 0xFF;\n          }\n        }\n      }\n      // smush it with zlib\n      // if I move this routine to the server, we would get much much smaller client side js file size.\n      // worth doing at some point.\n      var compressed = zlib.gzipSync(Buffer.from(Uint8View));\n      // it might be valuable for quicker testing to return just a buffer view.\n      // return Buffer.from(Uint8View);\n      // send it down to the client\n      return compressed;\n    }\n  }, {\n    key: \"decode\",\n    value: function decode(compressedBuffer) {\n      var buffer = zlib.gunzipSync(Buffer.from(compressedBuffer));\n      // this is a unint8array now\n      console.log(buffer);\n      var offset = 0;\n      // store the preamble\n      // need to look up the actual number here\n      var version = buffer[offset];\n      offset += 4;\n      var nLayers = buffer[offset];\n      offset += 4;\n      for (var l = 0; l < nLayers; l++) {\n        this.width = buffer[offset];\n        offset += 4;\n        this.height = buffer[offset];\n        offset += 4;\n        var currentLayer = new Array(this.width * this.height);\n        // read in the layer data\n        for (var x = 0; x < this.width; x++) {\n          for (var y = 0; y < this.height; y++) {\n            var cell = {};\n            cell.char = codePage437.characters[buffer[offset]];\n            offset += 4;\n            // construct fg\n            var r = buffer[offset++];\n            var g = buffer[offset++];\n            var b = buffer[offset++];\n            cell.fgColor = r << 0 | g << 8 | b << 16;\n\n            r = buffer[offset++];\n            g = buffer[offset++];\n            b = buffer[offset++];\n            cell.bgColor = r << 0 | g << 8 | b << 16;\n            currentLayer[x + y * this.width] = cell;\n          }\n        }\n        this.layers.push(currentLayer);\n      }\n    }\n  }]);\n\n  return RexPaintCodec;\n}();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlJleFBhaW50Q29kZWMuanMiXSwibmFtZXMiOlsiemxpYiIsImNvZGVQYWdlNDM3IiwicmVxdWlyZSIsImRlY29kZVRhYmxlIiwiY291bnQiLCJjaGFyYWN0ZXJzIiwiZm9yRWFjaCIsImUiLCJSZXhQYWludENvZGVjIiwibGF5ZXJzIiwid2lkdGgiLCJoZWlnaHQiLCJudW1MYXllcnMiLCJsZW5ndGgiLCJsYXllckxlbmd0aCIsImJ1ZmZlciIsIkFycmF5QnVmZmVyIiwiVWludDhWaWV3IiwiVWludDhBcnJheSIsIlVpbnQzMlZpZXciLCJVaW50MzJBcnJheSIsIm9mZnNldCIsImwiLCJ4IiwieSIsImMiLCJjaGFyIiwiY29ycmVjdE9mZnNldCIsImZnQ29sb3IiLCJiZ0NvbG9yIiwiY29tcHJlc3NlZCIsImd6aXBTeW5jIiwiQnVmZmVyIiwiZnJvbSIsImNvbXByZXNzZWRCdWZmZXIiLCJndW56aXBTeW5jIiwiY29uc29sZSIsImxvZyIsInZlcnNpb24iLCJuTGF5ZXJzIiwiY3VycmVudExheWVyIiwiQXJyYXkiLCJjZWxsIiwiciIsImciLCJiIiwicHVzaCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBdUJBOztJQUFZQSxJOzs7Ozs7QUF2Qlo7Ozs7Ozs7Ozs7Ozs7Ozs7QUFnQkEsSUFBTUMsY0FBY0MsUUFBUSxvQkFBUixDQUFwQjtBQUNBO0FBQ0EsSUFBSUMsY0FBYyxFQUFsQjtBQUNBLElBQUlDLFFBQVEsQ0FBWjtBQUNBSCxZQUFZSSxVQUFaLENBQXVCQyxPQUF2QixDQUErQixVQUFDQyxDQUFELEVBQUs7QUFDbENKLGNBQVlJLENBQVosSUFBaUJILE9BQWpCO0FBQ0QsQ0FGRDs7SUFLYUksYSxXQUFBQSxhO0FBRVgsMkJBQ0E7QUFBQTs7QUFDRSxTQUFLQyxNQUFMLEdBQWMsRUFBZDtBQUNBO0FBQ0E7QUFDQSxTQUFLQyxLQUFMLEdBQWEsQ0FBYjtBQUNBLFNBQUtDLE1BQUwsR0FBYyxDQUFkO0FBQ0Q7Ozs7NkJBRUQ7QUFDRTtBQUNBO0FBQ0E7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LEdBQ1hDLEtBQUssQ0FETSxHQUVYQyxLQUFLLEVBRlQ7O0FBSUFGLGdCQUFJNUIsT0FBT00sUUFBUCxDQUFKO0FBQ0F1QixnQkFBSTdCLE9BQU9NLFFBQVAsQ0FBSjtBQUNBd0IsZ0JBQUk5QixPQUFPTSxRQUFQLENBQUo7QUFDQXFCLGlCQUFLYixPQUFMLEdBQWVjLEtBQUssQ0FBTCxHQUNYQyxLQUFLLENBRE0sR0FFWEMsS0FBSyxFQUZUO0FBR0FMLHlCQUFhakIsSUFBRUMsSUFBRSxLQUFLZCxLQUF0QixJQUErQmdDLElBQS9CO0FBQ0Q7QUFDRjtBQUNELGFBQUtqQyxNQUFMLENBQVlxQyxJQUFaLENBQWlCTixZQUFqQjtBQUNEO0FBQ0YiLCJmaWxlIjoiUmV4UGFpbnRDb2RlYy5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL3NyYyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4jLS0tLS14cCBmb3JtYXQgdmVyc2lvbiAoMzIpXG5BLS0tLS1udW1iZXIgb2YgbGF5ZXJzICgzMilcbiAvLS0tLWltYWdlIHdpZHRoICgzMilcbiB8ICAgIGltYWdlIGhlaWdodCAoMzIpXG4gfCAgLy1BU0NJSSBjb2RlICgzMikgKGxpdHRsZS1lbmRpYW4hKVxuQnwgIHwgZm9yZWdyb3VuZCBjb2xvciByZWQgKDgpXG4gfCAgfCBmb3JlZ3JvdW5kIGNvbG9yIGdyZWVuICg4KVxuIHwgIHwgZm9yZWdyb3VuZCBjb2xvciBibHVlICg4KVxuIHwgQ3wgYmFja2dyb3VuZCBjb2xvciByZWQgKDgpXG4gfCAgfCBiYWNrZ3JvdW5kIGNvbG9yIGdyZWVuICg4KVxuIFxcLS1cXC1iYWNrZ3JvdW5kIGNvbG9yIGJsdWUgKDgpXG4gVGhlIGZpbGUgYmVnaW5zIHdpdGggdGhlIGludGVybmFsIC54cCBmb3JtYXQgdmVyc2lvbiBudW1iZXIsIFlvdSBjYW4gaWdub3JlIHRoaXMgdmFsdWUsIGFzIGl0IGlzIG9ubHkgdXNlZCBieSBSRVhQYWludCBpdHNlbGYgKGluIGNhc2UgZnV0dXJlIGNoYW5nZXMgdG8gdGhlIGZvcm1hdCBhcmUgcmVxdWlyZWQpLiBOb3RlIHRoYXQgYmVjYXVzZSBwcmUtUjkgdmVyc2lvbnMgb2YgUkVYUGFpbnQgZGlkIG5vdCBpbmNsdWRlIGFuIC54cCB2ZXJzaW9uIG51bWJlciwgaXQncyBhY3R1YWxseSBzdG9yZWQgYXMgYSBuZWdhdGl2ZSB2YWx1ZSB0byBkaWZmZXJlbnRpYXRlIG9sZCBpbWFnZSBmaWxlcyAod2hpY2ggYmVnaW4gd2l0aCBhIHBvc2l0aXZlIGxheWVyIGNvdW50KSBpbiBvcmRlciB0byBkZXRlY3QgYW5kIGF1dG9tYXRpY2FsbHkgdXBkYXRlIHRoZW0uXG5cdFRoZSBhY3R1YWwgaW1hZ2UgZGF0YSBiZWdpbnMgd2l0aCBBLCB0aGUgbnVtYmVyIG9mIGltYWdlIGxheWVycyAoYWx3YXlzIGEgbnVtYmVyIGZyb20gMSB0byA5IGluIHRoZSBjdXJyZW50IHZlcnNpb24pLCBmb2xsb3dlZCBieSBhIHNlY3Rpb24gQiBmb3IgZWFjaCBsYXllciAodGhlIGltYWdlIHdpZHRoL2hlaWdodCBpcyBzdG9yZWQgZm9yIGV2ZXJ5IGxheWVyIGR1ZSB0byB0aGUgbWV0aG9kIG9mIHNlcmlhbGl6YXRpb24gdXNlZCwgYnV0IHdpbGwgYWx3YXlzIGJlIHRoZSBzYW1lIHZhbHVlcyBmb3IgZXZlcnkgbGF5ZXIpLiBTZWN0aW9uIEMgaXMgdGhlbiByZXBlYXRlZCBmb3IgZWFjaCBjZWxsIGluIHRoZSBpbWFnZSwgc3RvcmluZyB0aGUgaW1hZ2UncyAyRCBtYXRyaXggaW4gMUQgYXJyYXkgZm9ybWF0LiBJLmUuLCB0aGUgbGVuZ3RoIG9mIHRoYXQgbWF0cml4IHdvdWxkIGVxdWFsIHdpZHRoKmhlaWdodCwgYW5kIGlmIHlvdSBuZWVkIHRoZW0geW91IGNhbiBnZXQgdGhlIHgtdmFsdWUgd2l0aCBcImluZGV4L2hlaWdodFwiLCBhbmQgeS12YWx1ZSB3aXRoIFwiaW5kZXglaGVpZ2h0XCIgKG15IG93biBtYXRyaXggY2xhc3Mgc3RvcmVzIGl0cyBkYXRhIGluIGEgMUQgYXJyYXkgc28gSSBqdXN0IHJlYWQgYWxsIHRoZSBjZWxscyBzdHJhaWdodCBpbikuIE5vdGUgdGhhdCB0aGlzIG1lYW5zIHRoZSBpbWFnZSBkYXRhIGhhcHBlbnMgdG8gYmUgc3RvcmVkIGluIGNvbHVtbi1tYWpvciBvcmRlciFcblx0T25lIHRoaW5nIHRvIHJlbWVtYmVyIGFib3V0IGRpcmVjdGx5IHJlYWRpbmcgLnhwIGZpbGVzIGlzIHRoYXQgdW5kcmF3biAoZW1wdHkpIGNlbGxzIG9uIGFueSBsYXllciAoZXZlbiB0aGUgYmFzZSBsYXllcikgYXJlIGNvbnNpZGVyZWQgdHJhbnNwYXJlbnQsIHdoaWNoIGlzIGlkZW50aWZpZWQgYnkgdGhlIGJhY2tncm91bmQgY29sb3IgMjU1LDAsMjU1LiBUaHVzIHRvIHJlYnVpbGQgdGhlIGltYWdlIGFzIHNlZW4gaW4gUkVYUGFpbnQsIGFsd2F5cyBmaXJzdCB0ZXN0IGEgY2VsbCdzIGJhY2tncm91bmQgY29sb3IgYW5kIHNraXAgZHJhd2luZyB0aG9zZSBjZWxscyB3aGljaCBhcmUgdHJhbnNwYXJlbnQsIHdoaWxlIGNvbnZlcnRpbmcgYW55IHZpc2libGUgKGkuZS4sIG5vbi1jb3ZlcmVkKSB0cmFuc3BhcmVudCBjZWxscyBvbiB0aGUgbG93ZXN0IGxheWVyIHRvIGJsYWNrLlxuKi9cbmNvbnN0IGNvZGVQYWdlNDM3ID0gcmVxdWlyZSgnLi9jb2RlUGFnZTQzNy5qc29uJyk7XG4vLyByZXZlcnNlIHRoZSBlbmNvZGluZ1xubGV0IGRlY29kZVRhYmxlID0ge307XG5sZXQgY291bnQgPSAwO1xuY29kZVBhZ2U0MzcuY2hhcmFjdGVycy5mb3JFYWNoKChlKT0+e1xuICBkZWNvZGVUYWJsZVtlXSA9IGNvdW50Kys7XG59KTtcbmltcG9ydCAqIGFzIHpsaWIgZnJvbSBcInpsaWJcIlxuXG5leHBvcnQgY2xhc3MgUmV4UGFpbnRDb2RlY1xue1xuICBjb25zdHJ1Y3RvcigpXG4gIHtcbiAgICB0aGlzLmxheWVycyA9IFtdO1xuICAgIC8vIGN1cnJlbnRseSB0aGVzZSBhcmUgc3RvcmVkIGZvciB0aGUgdG90YWwgZHJhd2luZywgcmF0aGVyIHRoYW4gcGVyIGxheWVyXG4gICAgLy8gYnV0IHRoZXkgbmVlZCB0byBiZSBzdG9yZWQgaW4gZWFjaCBsYXllci5cbiAgICB0aGlzLndpZHRoID0gMDtcbiAgICB0aGlzLmhlaWdodCA9IDA7XG4gIH1cbiAgZW5jb2RlKClcbiAge1xuICAgIC8vIGNhbGN1bGF0ZSB0aGUgbGVuZ3RoIG9mIHRoZSBidWZmZXIgd2UgbmVlZFxuICAgIC8vIHRoZXNlIGFyZSBhbGwgaW4gYnl0ZXMsIHdoZXJlIGFib3ZlIHRoZXkgYXJlIGdpdmVuIGluIGJpdHNcbiAgICAvLyA0KzQrKDQrNCs0KndpZHRoKmhlaWdodCsyNCp3aWR0aCpoZWlnaHQrMjQqd2lkdGgqaGVpZ2h0KSpuTGF5ZXJzXG4gICAgbGV0IG51bUxheWVycyA9IHRoaXMubGF5ZXJzLmxlbmd0aDtcbiAgICBsZXQgbGF5ZXJMZW5ndGggPSB0aGlzLndpZHRoKnRoaXMuaGVpZ2h0O1xuICAgIGxldCBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoNCs0Kyg0KzQgKyA0ICogbGF5ZXJMZW5ndGggKyAyNCpsYXllckxlbmd0aCArIDI0KmxheWVyTGVuZ3RoKSpudW1MYXllcnMpO1xuICAgIGxldCBVaW50OFZpZXcgPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xuICAgIHZhciBVaW50MzJWaWV3ID0gbmV3IFVpbnQzMkFycmF5KGJ1ZmZlciwgMCwgNCk7XG4gICAgbGV0IG9mZnNldCA9IDA7XG4gICAgLy8gc3RvcmUgdGhlIHByZWFtYmxlXG4gICAgLy8gbmVlZCB0byBsb29rIHVwIHRoZSBhY3R1YWwgbnVtYmVyIGhlcmVcbiAgICBVaW50MzJWaWV3W29mZnNldC80XSA9IDk7XG4gICAgb2Zmc2V0ICs9IDQ7XG4gICAgVWludDMyVmlld1tvZmZzZXQvNF0gPSBudW1MYXllcnM7XG4gICAgb2Zmc2V0ICs9IDQ7XG4gICAgZm9yKGxldCBsID0gMDtsPG51bUxheWVycztsKyspXG4gICAge1xuICAgICAgLy8gc3RvcmUgdGhlIGxheWVyIHByZWFtYmxlXG4gICAgICBVaW50OFZpZXdbb2Zmc2V0XSA9IHRoaXMud2lkdGg7XG4gICAgICBvZmZzZXQgKz0gNDtcbiAgICAgIFVpbnQ4Vmlld1tvZmZzZXRdID0gdGhpcy5oZWlnaHQ7XG4gICAgICBvZmZzZXQgKz0gNDtcbiAgICAgIC8vIHN0YXJ0IHN0b3JpbmcgdGhlIGFjdHVhbCBsYXllciBkYXRhXG4gICAgICBmb3IobGV0IHg9MDt4PHRoaXMud2lkdGg7eCsrKVxuICAgICAge1xuICAgICAgICBmb3IobGV0IHk9MDt5PHRoaXMuaGVpZ2h0O3krKylcbiAgICAgICAge1xuICAgICAgICAgIC8vIG1pZ2h0IG5lZWQgdG8gZm9yY2UgdGhlIGVuZGlhbiBuZXNzIG9mIHRoaXMgZGF0YSBhdCBzb21lIHBvaW50XG4gICAgICAgICAgLy8gbXkgc3lzdGVtIHN0b3JlcyBpbiByb3cgbWFqb3IsIHRoaXMgZ2V0cyBjb252ZXJ0ZWQgdG8gY29sdW1uIG1ham9yIGZvciByZXhwYWludFxuICAgICAgICAgIFxuICAgICAgICAgIC8vIG5lZWQgdG8gZml4IHRoZSBjaGFyYWN0ZXIgZW5jb2RpbmcgaGVyZVxuICAgICAgICAgIC8vIGlmIHRoZXJlIGFyZSBldmVyeSBtb3JlIHRoYW4gMHhmZiBjaGFyYWN0ZXJzLCB0aGVuIHRoaXMgaXMgZ29ubmEgYmxvdyB1cCA6KFxuICAgICAgICAgIGxldCBjID0gZGVjb2RlVGFibGVbdGhpcy5sYXllcnNbbF1beCt5KnRoaXMud2lkdGhdLmNoYXJdO1xuICAgICAgICAgIFVpbnQ4Vmlld1tvZmZzZXRdID0gYztcbiAgICAgICAgICBcbiAgICAgICAgICBsZXQgY29ycmVjdE9mZnNldCA9IG9mZnNldC80O1xuICAgICAgICAgIG9mZnNldCs9NDtcbiAgICAgICAgICAvLyBzdG9yZSB0aGUgZm9yZWdyb3VuZCBhbmQgYmFja2dyb3VuZCBjb2xvcnNcbiAgICAgICAgICAvLyBmZywgciwgZywgYlxuICAgICAgICAgIC8vIHRoaXMgbWFrZXMgc3VyZSB0aGF0IHdlIGFyZW4ndCB0cnlpbmcgdG8gcHVzaCBhIDMyIGJpdCBudW1iZXIgaW50byBhIDI0IGJpdCBzcGFjZVxuICAgICAgICAgIFVpbnQ4Vmlld1tvZmZzZXQrK10gPSB0aGlzLmxheWVyc1tsXVt4K3kqdGhpcy53aWR0aF0uZmdDb2xvciA+Pj4gMCAmIDB4RkY7XG4gICAgICAgICAgVWludDhWaWV3W29mZnNldCsrXSA9IHRoaXMubGF5ZXJzW2xdW3greSp0aGlzLndpZHRoXS5mZ0NvbG9yID4+PiA4ICYgMHhGRjtcbiAgICAgICAgICBVaW50OFZpZXdbb2Zmc2V0KytdID0gdGhpcy5sYXllcnNbbF1beCt5KnRoaXMud2lkdGhdLmZnQ29sb3IgPj4+IDE2ICYgMHhGRjtcbiAgICAgICAgICAvLyBiZywgciwgZywgYlxuICAgICAgICAgIFVpbnQ4Vmlld1tvZmZzZXQrK10gPSB0aGlzLmxheWVyc1tsXVt4K3kqdGhpcy53aWR0aF0uYmdDb2xvciA+Pj4gMCAmIDB4RkY7XG4gICAgICAgICAgVWludDhWaWV3W29mZnNldCsrXSA9IHRoaXMubGF5ZXJzW2xdW3greSp0aGlzLndpZHRoXS5iZ0NvbG9yID4+PiA4ICYgMHhGRjtcbiAgICAgICAgICBVaW50OFZpZXdbb2Zmc2V0KytdID0gdGhpcy5sYXllcnNbbF1beCt5KnRoaXMud2lkdGhdLmJnQ29sb3IgPj4+IDE2ICYgMHhGRjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBzbXVzaCBpdCB3aXRoIHpsaWJcbiAgICAvLyBpZiBJIG1vdmUgdGhpcyByb3V0aW5lIHRvIHRoZSBzZXJ2ZXIsIHdlIHdvdWxkIGdldCBtdWNoIG11Y2ggc21hbGxlciBjbGllbnQgc2lkZSBqcyBmaWxlIHNpemUuXG4gICAgLy8gd29ydGggZG9pbmcgYXQgc29tZSBwb2ludC5cbiAgICBsZXQgY29tcHJlc3NlZCA9IHpsaWIuZ3ppcFN5bmMoQnVmZmVyLmZyb20oVWludDhWaWV3KSk7XG4gICAgLy8gaXQgbWlnaHQgYmUgdmFsdWFibGUgZm9yIHF1aWNrZXIgdGVzdGluZyB0byByZXR1cm4ganVzdCBhIGJ1ZmZlciB2aWV3LlxuICAgIC8vIHJldHVybiBCdWZmZXIuZnJvbShVaW50OFZpZXcpO1xuICAgIC8vIHNlbmQgaXQgZG93biB0byB0aGUgY2xpZW50XG4gICAgcmV0dXJuIGNvbXByZXNzZWQ7XG4gIH1cbiAgXG4gIGRlY29kZShjb21wcmVzc2VkQnVmZmVyKVxuICB7XG4gICAgbGV0IGJ1ZmZlciA9IHpsaWIuZ3VuemlwU3luYyhCdWZmZXIuZnJvbShjb21wcmVzc2VkQnVmZmVyKSk7XG4gICAgLy8gdGhpcyBpcyBhIHVuaW50OGFycmF5IG5vd1xuICAgIGNvbnNvbGUubG9nKGJ1ZmZlcik7XG4gICAgbGV0IG9mZnNldCA9IDA7XG4gICAgLy8gc3RvcmUgdGhlIHByZWFtYmxlXG4gICAgLy8gbmVlZCB0byBsb29rIHVwIHRoZSBhY3R1YWwgbnVtYmVyIGhlcmVcbiAgICBsZXQgdmVyc2lvbiA9IGJ1ZmZlcltvZmZzZXRdO1xuICAgIG9mZnNldCArPSA0O1xuICAgIGxldCBuTGF5ZXJzID0gYnVmZmVyW29mZnNldF07XG4gICAgb2Zmc2V0ICs9IDQ7XG4gICAgZm9yKGxldCBsID0gMDtsPG5MYXllcnM7bCsrKVxuICAgIHtcbiAgICAgIHRoaXMud2lkdGggPSBidWZmZXJbb2Zmc2V0XTtcbiAgICAgIG9mZnNldCArPSA0O1xuICAgICAgdGhpcy5oZWlnaHQgPSBidWZmZXJbb2Zmc2V0XTtcbiAgICAgIG9mZnNldCArPSA0O1xuICAgICAgbGV0IGN1cnJlbnRMYXllciA9IG5ldyBBcnJheSh0aGlzLndpZHRoKnRoaXMuaGVpZ2h0KTtcbiAgICAgIC8vIHJlYWQgaW4gdGhlIGxheWVyIGRhdGFcbiAgICAgIGZvcihsZXQgeD0wO3g8dGhpcy53aWR0aDt4KyspXG4gICAgICB7XG4gICAgICAgIGZvcihsZXQgeT0wO3k8dGhpcy5oZWlnaHQ7eSsrKVxuICAgICAgICB7XG4gICAgICAgICAgbGV0IGNlbGwgPSB7fTtcbiAgICAgICAgICBjZWxsLmNoYXIgPSBjb2RlUGFnZTQzNy5jaGFyYWN0ZXJzW2J1ZmZlcltvZmZzZXRdXTtcbiAgICAgICAgICBvZmZzZXQgKz0gNDtcbiAgICAgICAgICAvLyBjb25zdHJ1Y3QgZmdcbiAgICAgICAgICBsZXQgciA9IGJ1ZmZlcltvZmZzZXQrK107XG4gICAgICAgICAgbGV0IGcgPSBidWZmZXJbb2Zmc2V0KytdO1xuICAgICAgICAgIGxldCBiID0gYnVmZmVyW29mZnNldCsrXTtcbiAgICAgICAgICBjZWxsLmZnQ29sb3IgPSByIDw8IDBcbiAgICAgICAgICAgIHwgZyA8PCA4XG4gICAgICAgICAgICB8IGIgPDwgMTY7XG4gICAgICAgICAgXG4gICAgICAgICAgciA9IGJ1ZmZlcltvZmZzZXQrK107XG4gICAgICAgICAgZyA9IGJ1ZmZlcltvZmZzZXQrK107XG4gICAgICAgICAgYiA9IGJ1ZmZlcltvZmZzZXQrK107XG4gICAgICAgICAgY2VsbC5iZ0NvbG9yID0gciA8PCAwXG4gICAgICAgICAgICB8IGcgPDwgOFxuICAgICAgICAgICAgfCBiIDw8IDE2O1xuICAgICAgICAgIGN1cnJlbnRMYXllclt4K3kqdGhpcy53aWR0aF0gPSBjZWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLmxheWVycy5wdXNoKGN1cnJlbnRMYXllcik7XG4gICAgfVxuICB9XG59Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "RexPaintCodec.js"
      ],
      "names": [
        "zlib",
        "codePage437",
        "require",
        "decodeTable",
        "count",
        "characters",
        "forEach",
        "e",
        "RexPaintCodec",
        "layers",
        "width",
        "height",
        "numLayers",
        "length",
        "layerLength",
        "buffer",
        "ArrayBuffer",
        "Uint8View",
        "Uint8Array",
        "Uint32View",
        "Uint32Array",
        "offset",
        "l",
        "x",
        "y",
        "c",
        "char",
        "correctOffset",
        "fgColor",
        "bgColor",
        "compressed",
        "gzipSync",
        "Buffer",
        "from",
        "compressedBuffer",
        "gunzipSync",
        "console",
        "log",
        "version",
        "nLayers",
        "currentLayer",
        "Array",
        "cell",
        "r",
        "g",
        "b",
        "push"
      ],
      "mappings": "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",
      "file": "RexPaintCodec.js",
      "sourceRoot": "/app/src",
      "sourcesContent": [
        "/*\n#-----xp format version (32)\nA-----number of layers (32)\n /----image width (32)\n |    image height (32)\n |  /-ASCII code (32) (little-endian!)\nB|  | foreground color red (8)\n |  | foreground color green (8)\n |  | foreground color blue (8)\n | C| background color red (8)\n |  | background color green (8)\n \\--\\-background color blue (8)\n The file begins with the internal .xp format version number, You can ignore this value, as it is only used by REXPaint itself (in case future changes to the format are required). Note that because pre-R9 versions of REXPaint did not include an .xp version number, it's actually stored as a negative value to differentiate old image files (which begin with a positive layer count) in order to detect and automatically update them.\n\tThe actual image data begins with A, the number of image layers (always a number from 1 to 9 in the current version), followed by a section B for each layer (the image width/height is stored for every layer due to the method of serialization used, but will always be the same values for every layer). Section C is then repeated for each cell in the image, storing the image's 2D matrix in 1D array format. I.e., the length of that matrix would equal width*height, and if you need them you can get the x-value with \"index/height\", and y-value with \"index%height\" (my own matrix class stores its data in a 1D array so I just read all the cells straight in). Note that this means the image data happens to be stored in column-major order!\n\tOne thing to remember about directly reading .xp files is that undrawn (empty) cells on any layer (even the base layer) are considered transparent, which is identified by the background color 255,0,255. Thus to rebuild the image as seen in REXPaint, always first test a cell's background color and skip drawing those cells which are transparent, while converting any visible (i.e., non-covered) transparent cells on the lowest layer to black.\n*/\nconst codePage437 = require('./codePage437.json');\n// reverse the encoding\nlet decodeTable = {};\nlet count = 0;\ncodePage437.characters.forEach((e)=>{\n  decodeTable[e] = count++;\n});\nimport * as zlib from \"zlib\"\n\nexport class RexPaintCodec\n{\n  constructor()\n  {\n    this.layers = [];\n    // currently these are stored for the total drawing, rather than per layer\n    // but they need to be stored in each layer.\n    this.width = 0;\n    this.height = 0;\n  }\n  encode()\n  {\n    // calculate the length of the buffer we need\n    // these are all in bytes, where above they are given in bits\n    // 4+4+(4+4+4*width*height+24*width*height+24*width*height)*nLayers\n    let numLayers = this.layers.length;\n    let layerLength = this.width*this.height;\n    let buffer = new ArrayBuffer(4+4+(4+4 + 4 * layerLength + 24*layerLength + 24*layerLength)*numLayers);\n    let Uint8View = new Uint8Array(buffer);\n    var Uint32View = new Uint32Array(buffer, 0, 4);\n    let offset = 0;\n    // store the preamble\n    // need to look up the actual number here\n    Uint32View[offset/4] = 9;\n    offset += 4;\n    Uint32View[offset/4] = numLayers;\n    offset += 4;\n    for(let l = 0;l<numLayers;l++)\n    {\n      // store the layer preamble\n      Uint8View[offset] = this.width;\n      offset += 4;\n      Uint8View[offset] = this.height;\n      offset += 4;\n      // start storing the actual layer data\n      for(let x=0;x<this.width;x++)\n      {\n        for(let y=0;y<this.height;y++)\n        {\n          // might need to force the endian ness of this data at some point\n          // my system stores in row major, this gets converted to column major for rexpaint\n          \n          // need to fix the character encoding here\n          // if there are every more than 0xff characters, then this is gonna blow up :(\n          let c = decodeTable[this.layers[l][x+y*this.width].char];\n          Uint8View[offset] = c;\n          \n          let correctOffset = offset/4;\n          offset+=4;\n          // store the foreground and background colors\n          // fg, r, g, b\n          // this makes sure that we aren't trying to push a 32 bit number into a 24 bit space\n          Uint8View[offset++] = this.layers[l][x+y*this.width].fgColor >>> 0 & 0xFF;\n          Uint8View[offset++] = this.layers[l][x+y*this.width].fgColor >>> 8 & 0xFF;\n          Uint8View[offset++] = this.layers[l][x+y*this.width].fgColor >>> 16 & 0xFF;\n          // bg, r, g, b\n          Uint8View[offset++] = this.layers[l][x+y*this.width].bgColor >>> 0 & 0xFF;\n          Uint8View[offset++] = this.layers[l][x+y*this.width].bgColor >>> 8 & 0xFF;\n          Uint8View[offset++] = this.layers[l][x+y*this.width].bgColor >>> 16 & 0xFF;\n        }\n      }\n    }\n    // smush it with zlib\n    // if I move this routine to the server, we would get much much smaller client side js file size.\n    // worth doing at some point.\n    let compressed = zlib.gzipSync(Buffer.from(Uint8View));\n    // it might be valuable for quicker testing to return just a buffer view.\n    // return Buffer.from(Uint8View);\n    // send it down to the client\n    return compressed;\n  }\n  \n  decode(compressedBuffer)\n  {\n    let buffer = zlib.gunzipSync(Buffer.from(compressedBuffer));\n    // this is a unint8array now\n    console.log(buffer);\n    let offset = 0;\n    // store the preamble\n    // need to look up the actual number here\n    let version = buffer[offset];\n    offset += 4;\n    let nLayers = buffer[offset];\n    offset += 4;\n    for(let l = 0;l<nLayers;l++)\n    {\n      this.width = buffer[offset];\n      offset += 4;\n      this.height = buffer[offset];\n      offset += 4;\n      let currentLayer = new Array(this.width*this.height);\n      // read in the layer data\n      for(let x=0;x<this.width;x++)\n      {\n        for(let y=0;y<this.height;y++)\n        {\n          let cell = {};\n          cell.char = codePage437.characters[buffer[offset]];\n          offset += 4;\n          // construct fg\n          let r = buffer[offset++];\n          let g = buffer[offset++];\n          let b = buffer[offset++];\n          cell.fgColor = r << 0\n            | g << 8\n            | b << 16;\n          \n          r = buffer[offset++];\n          g = buffer[offset++];\n          b = buffer[offset++];\n          cell.bgColor = r << 0\n            | g << 8\n            | b << 16;\n          currentLayer[x+y*this.width] = cell;\n        }\n      }\n      this.layers.push(currentLayer);\n    }\n  }\n}"
      ]
    },
    "mtime": 1546993729000
  }
}